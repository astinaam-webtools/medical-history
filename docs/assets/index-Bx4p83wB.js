var _M=Object.defineProperty;var EE=n=>{throw TypeError(n)};var TM=(n,e,t)=>e in n?_M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var H=(n,e,t)=>TM(n,typeof e!="symbol"?e+"":e,t),Zw=(n,e,t)=>e.has(n)||EE("Cannot "+t);var o=(n,e,t)=>(Zw(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?EE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),g=(n,e,t,s)=>(Zw(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),E=(n,e,t)=>(Zw(n,e,"access private method"),t);var xt=(n,e,t,s)=>({set _(r){g(n,e,r,t)},get _(){return o(n,e,s)}});function PM(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function kC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CC={exports:{}},dw={},_C={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0=Symbol.for("react.element"),NM=Symbol.for("react.portal"),RM=Symbol.for("react.fragment"),MM=Symbol.for("react.strict_mode"),DM=Symbol.for("react.profiler"),LM=Symbol.for("react.provider"),FM=Symbol.for("react.context"),OM=Symbol.for("react.forward_ref"),jM=Symbol.for("react.suspense"),IM=Symbol.for("react.memo"),BM=Symbol.for("react.lazy"),kE=Symbol.iterator;function UM(n){return n===null||typeof n!="object"?null:(n=kE&&n[kE]||n["@@iterator"],typeof n=="function"?n:null)}var TC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PC=Object.assign,NC={};function Sf(n,e,t){this.props=n,this.context=e,this.refs=NC,this.updater=t||TC}Sf.prototype.isReactComponent={};Sf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Sf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function RC(){}RC.prototype=Sf.prototype;function HS(n,e,t){this.props=n,this.context=e,this.refs=NC,this.updater=t||TC}var VS=HS.prototype=new RC;VS.constructor=HS;PC(VS,Sf.prototype);VS.isPureReactComponent=!0;var CE=Array.isArray,MC=Object.prototype.hasOwnProperty,WS={current:null},DC={key:!0,ref:!0,__self:!0,__source:!0};function LC(n,e,t){var s,r={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)MC.call(e,s)&&!DC.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:r0,type:n,key:i,ref:a,props:r,_owner:WS.current}}function $M(n,e){return{$$typeof:r0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function qS(n){return typeof n=="object"&&n!==null&&n.$$typeof===r0}function zM(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var _E=/\/+/g;function Jw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?zM(""+n.key):e.toString(36)}function sy(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case r0:case NM:a=!0}}if(a)return a=n,r=r(a),n=s===""?"."+Jw(a,0):s,CE(r)?(t="",n!=null&&(t=n.replace(_E,"$&/")+"/"),sy(r,e,t,"",function(u){return u})):r!=null&&(qS(r)&&(r=$M(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(_E,"$&/")+"/")+n)),e.push(r)),1;if(a=0,s=s===""?".":s+":",CE(n))for(var l=0;l<n.length;l++){i=n[l];var c=s+Jw(i,l);a+=sy(i,e,t,c,r)}else if(c=UM(n),typeof c=="function")for(n=c.call(n),l=0;!(i=n.next()).done;)i=i.value,c=s+Jw(i,l++),a+=sy(i,e,t,c,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function C0(n,e,t){if(n==null)return n;var s=[],r=0;return sy(n,s,"","",function(i){return e.call(t,i,r++)}),s}function HM(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Qn={current:null},ry={transition:null},VM={ReactCurrentDispatcher:Qn,ReactCurrentBatchConfig:ry,ReactCurrentOwner:WS};function FC(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:C0,forEach:function(n,e,t){C0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return C0(n,function(){e++}),e},toArray:function(n){return C0(n,function(e){return e})||[]},only:function(n){if(!qS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Se.Component=Sf;Se.Fragment=RM;Se.Profiler=DM;Se.PureComponent=HS;Se.StrictMode=MM;Se.Suspense=jM;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VM;Se.act=FC;Se.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=PC({},n.props),r=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=WS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)MC.call(e,c)&&!DC.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:r0,type:n.type,key:r,ref:i,props:s,_owner:a}};Se.createContext=function(n){return n={$$typeof:FM,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:LM,_context:n},n.Consumer=n};Se.createElement=LC;Se.createFactory=function(n){var e=LC.bind(null,n);return e.type=n,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:OM,render:n}};Se.isValidElement=qS;Se.lazy=function(n){return{$$typeof:BM,_payload:{_status:-1,_result:n},_init:HM}};Se.memo=function(n,e){return{$$typeof:IM,type:n,compare:e===void 0?null:e}};Se.startTransition=function(n){var e=ry.transition;ry.transition={};try{n()}finally{ry.transition=e}};Se.unstable_act=FC;Se.useCallback=function(n,e){return Qn.current.useCallback(n,e)};Se.useContext=function(n){return Qn.current.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n){return Qn.current.useDeferredValue(n)};Se.useEffect=function(n,e){return Qn.current.useEffect(n,e)};Se.useId=function(){return Qn.current.useId()};Se.useImperativeHandle=function(n,e,t){return Qn.current.useImperativeHandle(n,e,t)};Se.useInsertionEffect=function(n,e){return Qn.current.useInsertionEffect(n,e)};Se.useLayoutEffect=function(n,e){return Qn.current.useLayoutEffect(n,e)};Se.useMemo=function(n,e){return Qn.current.useMemo(n,e)};Se.useReducer=function(n,e,t){return Qn.current.useReducer(n,e,t)};Se.useRef=function(n){return Qn.current.useRef(n)};Se.useState=function(n){return Qn.current.useState(n)};Se.useSyncExternalStore=function(n,e,t){return Qn.current.useSyncExternalStore(n,e,t)};Se.useTransition=function(){return Qn.current.useTransition()};Se.version="18.3.1";_C.exports=Se;var C=_C.exports;const Mn=kC(C),WM=PM({__proto__:null,default:Mn},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM=C,GM=Symbol.for("react.element"),XM=Symbol.for("react.fragment"),YM=Object.prototype.hasOwnProperty,KM=qM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QM={key:!0,ref:!0,__self:!0,__source:!0};function OC(n,e,t){var s,r={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)YM.call(e,s)&&!QM.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:GM,type:n,key:i,ref:a,props:r,_owner:KM.current}}dw.Fragment=XM;dw.jsx=OC;dw.jsxs=OC;CC.exports=dw;var p=CC.exports,Wx={},jC={exports:{}},Qs={},IC={exports:{}},BC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(P,U){var $=P.length;P.push(U);e:for(;0<$;){var ie=$-1>>>1,Z=P[ie];if(0<r(Z,U))P[ie]=U,P[$]=Z,$=ie;else break e}}function t(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var U=P[0],$=P.pop();if($!==U){P[0]=$;e:for(var ie=0,Z=P.length,ae=Z>>>1;ie<ae;){var _e=2*(ie+1)-1,Me=P[_e],G=_e+1,de=P[G];if(0>r(Me,$))G<Z&&0>r(de,Me)?(P[ie]=de,P[G]=$,ie=G):(P[ie]=Me,P[_e]=$,ie=_e);else if(G<Z&&0>r(de,$))P[ie]=de,P[G]=$,ie=G;else break e}}return U}function r(P,U){var $=P.sortIndex-U.sortIndex;return $!==0?$:P.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,y=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var U=t(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=P)s(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(u)}}function k(P){if(v=!1,b(P),!y)if(t(c)!==null)y=!0,V(_);else{var U=t(u);U!==null&&Y(k,U.startTime-P)}}function _(P,U){y=!1,v&&(v=!1,w(M),M=-1),m=!0;var $=f;try{for(b(U),h=t(c);h!==null&&(!(h.expirationTime>U)||P&&!j());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var Z=ie(h.expirationTime<=U);U=n.unstable_now(),typeof Z=="function"?h.callback=Z:h===t(c)&&s(c),b(U)}else s(c);h=t(c)}if(h!==null)var ae=!0;else{var _e=t(u);_e!==null&&Y(k,_e.startTime-U),ae=!1}return ae}finally{h=null,f=$,m=!1}}var T=!1,N=null,M=-1,F=5,D=-1;function j(){return!(n.unstable_now()-D<F)}function B(){if(N!==null){var P=n.unstable_now();D=P;var U=!0;try{U=N(!0,P)}finally{U?z():(T=!1,N=null)}}else T=!1}var z;if(typeof x=="function")z=function(){x(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=B,z=function(){te.postMessage(null)}}else z=function(){A(B,0)};function V(P){N=P,T||(T=!0,z())}function Y(P,U){M=A(function(){P(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,V(_))},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(P){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var $=f;f=U;try{return P()}finally{f=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var $=f;f=P;try{return U()}finally{f=$}},n.unstable_scheduleCallback=function(P,U,$){var ie=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ie+$:ie):$=ie,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,P={id:d++,callback:U,priorityLevel:P,startTime:$,expirationTime:Z,sortIndex:-1},$>ie?(P.sortIndex=$,e(u,P),t(c)===null&&P===t(u)&&(v?(w(M),M=-1):v=!0,Y(k,$-ie))):(P.sortIndex=Z,e(c,P),y||m||(y=!0,V(_))),P},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(P){var U=f;return function(){var $=f;f=U;try{return P.apply(this,arguments)}finally{f=$}}}})(BC);IC.exports=BC;var ZM=IC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM=C,Ks=ZM;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UC=new Set,Op={};function ju(n,e){df(n,e),df(n+"Capture",e)}function df(n,e){for(Op[n]=e,n=0;n<e.length;n++)UC.add(e[n])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qx=Object.prototype.hasOwnProperty,eD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TE={},PE={};function tD(n){return qx.call(PE,n)?!0:qx.call(TE,n)?!1:eD.test(n)?PE[n]=!0:(TE[n]=!0,!1)}function nD(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function sD(n,e,t,s){if(e===null||typeof e>"u"||nD(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zn(n,e,t,s,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Sn[n]=new Zn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Sn[e]=new Zn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Sn[n]=new Zn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Sn[n]=new Zn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Sn[n]=new Zn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Sn[n]=new Zn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Sn[n]=new Zn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Sn[n]=new Zn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Sn[n]=new Zn(n,5,!1,n.toLowerCase(),null,!1,!1)});var GS=/[\-:]([a-z])/g;function XS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(GS,XS);Sn[e]=new Zn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(GS,XS);Sn[e]=new Zn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(GS,XS);Sn[e]=new Zn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Sn[n]=new Zn(n,1,!1,n.toLowerCase(),null,!1,!1)});Sn.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Sn[n]=new Zn(n,1,!1,n.toLowerCase(),null,!0,!0)});function YS(n,e,t,s){var r=Sn.hasOwnProperty(e)?Sn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sD(e,t,r,s)&&(t=null),s||r===null?tD(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Za=JM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_0=Symbol.for("react.element"),nd=Symbol.for("react.portal"),sd=Symbol.for("react.fragment"),KS=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),zC=Symbol.for("react.context"),QS=Symbol.for("react.forward_ref"),Xx=Symbol.for("react.suspense"),Yx=Symbol.for("react.suspense_list"),ZS=Symbol.for("react.memo"),io=Symbol.for("react.lazy"),HC=Symbol.for("react.offscreen"),NE=Symbol.iterator;function Rf(n){return n===null||typeof n!="object"?null:(n=NE&&n[NE]||n["@@iterator"],typeof n=="function"?n:null)}var vt=Object.assign,ex;function Zf(n){if(ex===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ex=e&&e[1]||""}return`
`+ex+n}var tx=!1;function nx(n,e){if(!n||tx)return"";tx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{tx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Zf(n):""}function rD(n){switch(n.tag){case 5:return Zf(n.type);case 16:return Zf("Lazy");case 13:return Zf("Suspense");case 19:return Zf("SuspenseList");case 0:case 2:case 15:return n=nx(n.type,!1),n;case 11:return n=nx(n.type.render,!1),n;case 1:return n=nx(n.type,!0),n;default:return""}}function Kx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case sd:return"Fragment";case nd:return"Portal";case Gx:return"Profiler";case KS:return"StrictMode";case Xx:return"Suspense";case Yx:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case zC:return(n.displayName||"Context")+".Consumer";case $C:return(n._context.displayName||"Context")+".Provider";case QS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ZS:return e=n.displayName||null,e!==null?e:Kx(n.type)||"Memo";case io:e=n._payload,n=n._init;try{return Kx(n(e))}catch{}}return null}function iD(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kx(e);case 8:return e===KS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function VC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aD(n){var e=VC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function T0(n){n._valueTracker||(n._valueTracker=aD(n))}function WC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=VC(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function ev(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Qx(n,e){var t=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function RE(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Tl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qC(n,e){e=e.checked,e!=null&&YS(n,"checked",e,!1)}function Zx(n,e){qC(n,e);var t=Tl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Jx(n,e.type,t):e.hasOwnProperty("defaultValue")&&Jx(n,e.type,Tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function ME(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Jx(n,e,t){(e!=="number"||ev(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Jf=Array.isArray;function xd(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Tl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function e1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function DE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Jf(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tl(t)}}function GC(n,e){var t=Tl(e.value),s=Tl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function LE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function XC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?XC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var P0,YC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(P0=P0||document.createElement("div"),P0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=P0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function jp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ep={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oD=["Webkit","ms","Moz","O"];Object.keys(Ep).forEach(function(n){oD.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ep[e]=Ep[n]})});function KC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ep.hasOwnProperty(n)&&Ep[n]?(""+e).trim():e+"px"}function QC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=KC(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var lD=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function n1(n,e){if(e){if(lD[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function s1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r1=null;function JS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var i1=null,bd=null,Sd=null;function FE(n){if(n=o0(n)){if(typeof i1!="function")throw Error(W(280));var e=n.stateNode;e&&(e=gw(e),i1(n.stateNode,n.type,e))}}function ZC(n){bd?Sd?Sd.push(n):Sd=[n]:bd=n}function JC(){if(bd){var n=bd,e=Sd;if(Sd=bd=null,FE(n),e)for(n=0;n<e.length;n++)FE(e[n])}}function e_(n,e){return n(e)}function t_(){}var sx=!1;function n_(n,e,t){if(sx)return n(e,t);sx=!0;try{return e_(n,e,t)}finally{sx=!1,(bd!==null||Sd!==null)&&(t_(),JC())}}function Ip(n,e){var t=n.stateNode;if(t===null)return null;var s=gw(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var a1=!1;if(Va)try{var Mf={};Object.defineProperty(Mf,"passive",{get:function(){a1=!0}}),window.addEventListener("test",Mf,Mf),window.removeEventListener("test",Mf,Mf)}catch{a1=!1}function cD(n,e,t,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var kp=!1,tv=null,nv=!1,o1=null,uD={onError:function(n){kp=!0,tv=n}};function dD(n,e,t,s,r,i,a,l,c){kp=!1,tv=null,cD.apply(uD,arguments)}function hD(n,e,t,s,r,i,a,l,c){if(dD.apply(this,arguments),kp){if(kp){var u=tv;kp=!1,tv=null}else throw Error(W(198));nv||(nv=!0,o1=u)}}function Iu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function s_(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function OE(n){if(Iu(n)!==n)throw Error(W(188))}function fD(n){var e=n.alternate;if(!e){if(e=Iu(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return OE(r),n;if(i===s)return OE(r),e;i=i.sibling}throw Error(W(188))}if(t.return!==s.return)t=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===t){a=!0,t=r,s=i;break}if(l===s){a=!0,s=r,t=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===t){a=!0,t=i,s=r;break}if(l===s){a=!0,s=i,t=r;break}l=l.sibling}if(!a)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function r_(n){return n=fD(n),n!==null?i_(n):null}function i_(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=i_(n);if(e!==null)return e;n=n.sibling}return null}var a_=Ks.unstable_scheduleCallback,jE=Ks.unstable_cancelCallback,pD=Ks.unstable_shouldYield,mD=Ks.unstable_requestPaint,Mt=Ks.unstable_now,gD=Ks.unstable_getCurrentPriorityLevel,eA=Ks.unstable_ImmediatePriority,o_=Ks.unstable_UserBlockingPriority,sv=Ks.unstable_NormalPriority,yD=Ks.unstable_LowPriority,l_=Ks.unstable_IdlePriority,hw=null,ji=null;function vD(n){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(hw,n,void 0,(n.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:bD,wD=Math.log,xD=Math.LN2;function bD(n){return n>>>=0,n===0?32:31-(wD(n)/xD|0)|0}var N0=64,R0=4194304;function ep(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function rv(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var l=a&~r;l!==0?s=ep(l):(i&=a,i!==0&&(s=ep(i)))}else a=t&~r,a!==0?s=ep(a):i!==0&&(s=ep(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Yr(e),r=1<<t,s|=n[t],e&=~r;return s}function SD(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AD(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-Yr(i),l=1<<a,c=r[a];c===-1?(!(l&t)||l&s)&&(r[a]=SD(l,e)):c<=e&&(n.expiredLanes|=l),i&=~l}}function l1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function c_(){var n=N0;return N0<<=1,!(N0&4194240)&&(N0=64),n}function rx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function i0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Yr(e),n[e]=t}function ED(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Yr(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function tA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Yr(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var $e=0;function u_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var d_,nA,h_,f_,p_,c1=!1,M0=[],gl=null,yl=null,vl=null,Bp=new Map,Up=new Map,oo=[],kD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IE(n,e){switch(n){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":Bp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Up.delete(e.pointerId)}}function Df(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=o0(e),e!==null&&nA(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function CD(n,e,t,s,r){switch(e){case"focusin":return gl=Df(gl,n,e,t,s,r),!0;case"dragenter":return yl=Df(yl,n,e,t,s,r),!0;case"mouseover":return vl=Df(vl,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return Bp.set(i,Df(Bp.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Up.set(i,Df(Up.get(i)||null,n,e,t,s,r)),!0}return!1}function m_(n){var e=ql(n.target);if(e!==null){var t=Iu(e);if(t!==null){if(e=t.tag,e===13){if(e=s_(t),e!==null){n.blockedOn=e,p_(n.priority,function(){h_(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function iy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=u1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);r1=s,t.target.dispatchEvent(s),r1=null}else return e=o0(t),e!==null&&nA(e),n.blockedOn=t,!1;e.shift()}return!0}function BE(n,e,t){iy(n)&&t.delete(e)}function _D(){c1=!1,gl!==null&&iy(gl)&&(gl=null),yl!==null&&iy(yl)&&(yl=null),vl!==null&&iy(vl)&&(vl=null),Bp.forEach(BE),Up.forEach(BE)}function Lf(n,e){n.blockedOn===e&&(n.blockedOn=null,c1||(c1=!0,Ks.unstable_scheduleCallback(Ks.unstable_NormalPriority,_D)))}function $p(n){function e(r){return Lf(r,n)}if(0<M0.length){Lf(M0[0],n);for(var t=1;t<M0.length;t++){var s=M0[t];s.blockedOn===n&&(s.blockedOn=null)}}for(gl!==null&&Lf(gl,n),yl!==null&&Lf(yl,n),vl!==null&&Lf(vl,n),Bp.forEach(e),Up.forEach(e),t=0;t<oo.length;t++)s=oo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<oo.length&&(t=oo[0],t.blockedOn===null);)m_(t),t.blockedOn===null&&oo.shift()}var Ad=Za.ReactCurrentBatchConfig,iv=!0;function TD(n,e,t,s){var r=$e,i=Ad.transition;Ad.transition=null;try{$e=1,sA(n,e,t,s)}finally{$e=r,Ad.transition=i}}function PD(n,e,t,s){var r=$e,i=Ad.transition;Ad.transition=null;try{$e=4,sA(n,e,t,s)}finally{$e=r,Ad.transition=i}}function sA(n,e,t,s){if(iv){var r=u1(n,e,t,s);if(r===null)px(n,e,s,av,t),IE(n,s);else if(CD(r,n,e,t,s))s.stopPropagation();else if(IE(n,s),e&4&&-1<kD.indexOf(n)){for(;r!==null;){var i=o0(r);if(i!==null&&d_(i),i=u1(n,e,t,s),i===null&&px(n,e,s,av,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else px(n,e,s,null,t)}}var av=null;function u1(n,e,t,s){if(av=null,n=JS(s),n=ql(n),n!==null)if(e=Iu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=s_(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return av=n,null}function g_(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gD()){case eA:return 1;case o_:return 4;case sv:case yD:return 16;case l_:return 536870912;default:return 16}default:return 16}}var fl=null,rA=null,ay=null;function y_(){if(ay)return ay;var n,e=rA,t=e.length,s,r="value"in fl?fl.value:fl.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===r[i-s];s++);return ay=r.slice(n,1<s?1-s:void 0)}function oy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function D0(){return!0}function UE(){return!1}function Zs(n){function e(t,s,r,i,a){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?D0:UE,this.isPropagationStopped=UE,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=D0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=D0)},persist:function(){},isPersistent:D0}),e}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iA=Zs(Af),a0=vt({},Af,{view:0,detail:0}),ND=Zs(a0),ix,ax,Ff,fw=vt({},a0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ff&&(Ff&&n.type==="mousemove"?(ix=n.screenX-Ff.screenX,ax=n.screenY-Ff.screenY):ax=ix=0,Ff=n),ix)},movementY:function(n){return"movementY"in n?n.movementY:ax}}),$E=Zs(fw),RD=vt({},fw,{dataTransfer:0}),MD=Zs(RD),DD=vt({},a0,{relatedTarget:0}),ox=Zs(DD),LD=vt({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),FD=Zs(LD),OD=vt({},Af,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jD=Zs(OD),ID=vt({},Af,{data:0}),zE=Zs(ID),BD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$D={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zD(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=$D[n])?!!e[n]:!1}function aA(){return zD}var HD=vt({},a0,{key:function(n){if(n.key){var e=BD[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=oy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?UD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aA,charCode:function(n){return n.type==="keypress"?oy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),VD=Zs(HD),WD=vt({},fw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HE=Zs(WD),qD=vt({},a0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aA}),GD=Zs(qD),XD=vt({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),YD=Zs(XD),KD=vt({},fw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QD=Zs(KD),ZD=[9,13,27,32],oA=Va&&"CompositionEvent"in window,Cp=null;Va&&"documentMode"in document&&(Cp=document.documentMode);var JD=Va&&"TextEvent"in window&&!Cp,v_=Va&&(!oA||Cp&&8<Cp&&11>=Cp),VE=" ",WE=!1;function w_(n,e){switch(n){case"keyup":return ZD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var rd=!1;function eL(n,e){switch(n){case"compositionend":return x_(e);case"keypress":return e.which!==32?null:(WE=!0,VE);case"textInput":return n=e.data,n===VE&&WE?null:n;default:return null}}function tL(n,e){if(rd)return n==="compositionend"||!oA&&w_(n,e)?(n=y_(),ay=rA=fl=null,rd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return v_&&e.locale!=="ko"?null:e.data;default:return null}}var nL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nL[n.type]:e==="textarea"}function b_(n,e,t,s){ZC(s),e=ov(e,"onChange"),0<e.length&&(t=new iA("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var _p=null,zp=null;function sL(n){M_(n,0)}function pw(n){var e=od(n);if(WC(e))return n}function rL(n,e){if(n==="change")return e}var S_=!1;if(Va){var lx;if(Va){var cx="oninput"in document;if(!cx){var GE=document.createElement("div");GE.setAttribute("oninput","return;"),cx=typeof GE.oninput=="function"}lx=cx}else lx=!1;S_=lx&&(!document.documentMode||9<document.documentMode)}function XE(){_p&&(_p.detachEvent("onpropertychange",A_),zp=_p=null)}function A_(n){if(n.propertyName==="value"&&pw(zp)){var e=[];b_(e,zp,n,JS(n)),n_(sL,e)}}function iL(n,e,t){n==="focusin"?(XE(),_p=e,zp=t,_p.attachEvent("onpropertychange",A_)):n==="focusout"&&XE()}function aL(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pw(zp)}function oL(n,e){if(n==="click")return pw(e)}function lL(n,e){if(n==="input"||n==="change")return pw(e)}function cL(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zr=typeof Object.is=="function"?Object.is:cL;function Hp(n,e){if(Zr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!qx.call(e,r)||!Zr(n[r],e[r]))return!1}return!0}function YE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function KE(n,e){var t=YE(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=YE(t)}}function E_(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?E_(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function k_(){for(var n=window,e=ev();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ev(n.document)}return e}function lA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uL(n){var e=k_(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&E_(t.ownerDocument.documentElement,t)){if(s!==null&&lA(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=KE(t,i);var a=KE(t,s);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dL=Va&&"documentMode"in document&&11>=document.documentMode,id=null,d1=null,Tp=null,h1=!1;function QE(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;h1||id==null||id!==ev(s)||(s=id,"selectionStart"in s&&lA(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Tp&&Hp(Tp,s)||(Tp=s,s=ov(d1,"onSelect"),0<s.length&&(e=new iA("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=id)))}function L0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ad={animationend:L0("Animation","AnimationEnd"),animationiteration:L0("Animation","AnimationIteration"),animationstart:L0("Animation","AnimationStart"),transitionend:L0("Transition","TransitionEnd")},ux={},C_={};Va&&(C_=document.createElement("div").style,"AnimationEvent"in window||(delete ad.animationend.animation,delete ad.animationiteration.animation,delete ad.animationstart.animation),"TransitionEvent"in window||delete ad.transitionend.transition);function mw(n){if(ux[n])return ux[n];if(!ad[n])return n;var e=ad[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in C_)return ux[n]=e[t];return n}var __=mw("animationend"),T_=mw("animationiteration"),P_=mw("animationstart"),N_=mw("transitionend"),R_=new Map,ZE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dl(n,e){R_.set(n,e),ju(e,[n])}for(var dx=0;dx<ZE.length;dx++){var hx=ZE[dx],hL=hx.toLowerCase(),fL=hx[0].toUpperCase()+hx.slice(1);Dl(hL,"on"+fL)}Dl(__,"onAnimationEnd");Dl(T_,"onAnimationIteration");Dl(P_,"onAnimationStart");Dl("dblclick","onDoubleClick");Dl("focusin","onFocus");Dl("focusout","onBlur");Dl(N_,"onTransitionEnd");df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pL=new Set("cancel close invalid load scroll toggle".split(" ").concat(tp));function JE(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,hD(s,e,void 0,n),n.currentTarget=null}function M_(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;JE(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;JE(r,l,u),i=c}}}if(nv)throw n=o1,nv=!1,o1=null,n}function rt(n,e){var t=e[y1];t===void 0&&(t=e[y1]=new Set);var s=n+"__bubble";t.has(s)||(D_(e,n,2,!1),t.add(s))}function fx(n,e,t){var s=0;e&&(s|=4),D_(t,n,s,e)}var F0="_reactListening"+Math.random().toString(36).slice(2);function Vp(n){if(!n[F0]){n[F0]=!0,UC.forEach(function(t){t!=="selectionchange"&&(pL.has(t)||fx(t,!1,n),fx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[F0]||(e[F0]=!0,fx("selectionchange",!1,e))}}function D_(n,e,t,s){switch(g_(e)){case 1:var r=TD;break;case 4:r=PD;break;default:r=sA}t=r.bind(null,e,t,n),r=void 0,!a1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function px(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=ql(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}n_(function(){var u=i,d=JS(t),h=[];e:{var f=R_.get(n);if(f!==void 0){var m=iA,y=n;switch(n){case"keypress":if(oy(t)===0)break e;case"keydown":case"keyup":m=VD;break;case"focusin":y="focus",m=ox;break;case"focusout":y="blur",m=ox;break;case"beforeblur":case"afterblur":m=ox;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$E;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=MD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=GD;break;case __:case T_:case P_:m=FD;break;case N_:m=YD;break;case"scroll":m=ND;break;case"wheel":m=QD;break;case"copy":case"cut":case"paste":m=jD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=HE}var v=(e&4)!==0,A=!v&&n==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var x=u,b;x!==null;){b=x;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,w!==null&&(k=Ip(x,w),k!=null&&v.push(Wp(x,k,b)))),A)break;x=x.return}0<v.length&&(f=new m(f,y,null,t,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==r1&&(y=t.relatedTarget||t.fromElement)&&(ql(y)||y[Wa]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?ql(y):null,y!==null&&(A=Iu(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=$E,k="onMouseLeave",w="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(v=HE,k="onPointerLeave",w="onPointerEnter",x="pointer"),A=m==null?f:od(m),b=y==null?f:od(y),f=new v(k,x+"leave",m,t,d),f.target=A,f.relatedTarget=b,k=null,ql(d)===u&&(v=new v(w,x+"enter",y,t,d),v.target=b,v.relatedTarget=A,k=v),A=k,m&&y)t:{for(v=m,w=y,x=0,b=v;b;b=zu(b))x++;for(b=0,k=w;k;k=zu(k))b++;for(;0<x-b;)v=zu(v),x--;for(;0<b-x;)w=zu(w),b--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=zu(v),w=zu(w)}v=null}else v=null;m!==null&&e2(h,f,m,v,!1),y!==null&&A!==null&&e2(h,A,y,v,!0)}}e:{if(f=u?od(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=rL;else if(qE(f))if(S_)_=lL;else{_=aL;var T=iL}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=oL);if(_&&(_=_(n,u))){b_(h,_,t,d);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Jx(f,"number",f.value)}switch(T=u?od(u):window,n){case"focusin":(qE(T)||T.contentEditable==="true")&&(id=T,d1=u,Tp=null);break;case"focusout":Tp=d1=id=null;break;case"mousedown":h1=!0;break;case"contextmenu":case"mouseup":case"dragend":h1=!1,QE(h,t,d);break;case"selectionchange":if(dL)break;case"keydown":case"keyup":QE(h,t,d)}var N;if(oA)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else rd?w_(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(v_&&t.locale!=="ko"&&(rd||M!=="onCompositionStart"?M==="onCompositionEnd"&&rd&&(N=y_()):(fl=d,rA="value"in fl?fl.value:fl.textContent,rd=!0)),T=ov(u,M),0<T.length&&(M=new zE(M,n,null,t,d),h.push({event:M,listeners:T}),N?M.data=N:(N=x_(t),N!==null&&(M.data=N)))),(N=JD?eL(n,t):tL(n,t))&&(u=ov(u,"onBeforeInput"),0<u.length&&(d=new zE("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=N))}M_(h,e)})}function Wp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ov(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ip(n,t),i!=null&&s.unshift(Wp(n,i,r)),i=Ip(n,e),i!=null&&s.push(Wp(n,i,r))),n=n.return}return s}function zu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function e2(n,e,t,s,r){for(var i=e._reactName,a=[];t!==null&&t!==s;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Ip(t,i),c!=null&&a.unshift(Wp(t,c,l))):r||(c=Ip(t,i),c!=null&&a.push(Wp(t,c,l)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var mL=/\r\n?/g,gL=/\u0000|\uFFFD/g;function t2(n){return(typeof n=="string"?n:""+n).replace(mL,`
`).replace(gL,"")}function O0(n,e,t){if(e=t2(e),t2(n)!==e&&t)throw Error(W(425))}function lv(){}var f1=null,p1=null;function m1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var g1=typeof setTimeout=="function"?setTimeout:void 0,yL=typeof clearTimeout=="function"?clearTimeout:void 0,n2=typeof Promise=="function"?Promise:void 0,vL=typeof queueMicrotask=="function"?queueMicrotask:typeof n2<"u"?function(n){return n2.resolve(null).then(n).catch(wL)}:g1;function wL(n){setTimeout(function(){throw n})}function mx(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),$p(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);$p(e)}function wl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function s2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ef=Math.random().toString(36).slice(2),Di="__reactFiber$"+Ef,qp="__reactProps$"+Ef,Wa="__reactContainer$"+Ef,y1="__reactEvents$"+Ef,xL="__reactListeners$"+Ef,bL="__reactHandles$"+Ef;function ql(n){var e=n[Di];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wa]||t[Di]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=s2(n);n!==null;){if(t=n[Di])return t;n=s2(n)}return e}n=t,t=n.parentNode}return null}function o0(n){return n=n[Di]||n[Wa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function od(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function gw(n){return n[qp]||null}var v1=[],ld=-1;function Ll(n){return{current:n}}function at(n){0>ld||(n.current=v1[ld],v1[ld]=null,ld--)}function tt(n,e){ld++,v1[ld]=n.current,n.current=e}var Pl={},Fn=Ll(Pl),gs=Ll(!1),Cu=Pl;function hf(n,e){var t=n.type.contextTypes;if(!t)return Pl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ys(n){return n=n.childContextTypes,n!=null}function cv(){at(gs),at(Fn)}function r2(n,e,t){if(Fn.current!==Pl)throw Error(W(168));tt(Fn,e),tt(gs,t)}function L_(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,iD(n)||"Unknown",r));return vt({},t,s)}function uv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pl,Cu=Fn.current,tt(Fn,n),tt(gs,gs.current),!0}function i2(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=L_(n,e,Cu),s.__reactInternalMemoizedMergedChildContext=n,at(gs),at(Fn),tt(Fn,n)):at(gs),tt(gs,t)}var Qi=null,yw=!1,gx=!1;function F_(n){Qi===null?Qi=[n]:Qi.push(n)}function SL(n){yw=!0,F_(n)}function Fl(){if(!gx&&Qi!==null){gx=!0;var n=0,e=$e;try{var t=Qi;for($e=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Qi=null,yw=!1}catch(r){throw Qi!==null&&(Qi=Qi.slice(n+1)),a_(eA,Fl),r}finally{$e=e,gx=!1}}return null}var cd=[],ud=0,dv=null,hv=0,yr=[],vr=0,_u=null,ja=1,Ia="";function jl(n,e){cd[ud++]=hv,cd[ud++]=dv,dv=n,hv=e}function O_(n,e,t){yr[vr++]=ja,yr[vr++]=Ia,yr[vr++]=_u,_u=n;var s=ja;n=Ia;var r=32-Yr(s)-1;s&=~(1<<r),t+=1;var i=32-Yr(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,ja=1<<32-Yr(e)+r|t<<r|s,Ia=i+n}else ja=1<<i|t<<r|s,Ia=n}function cA(n){n.return!==null&&(jl(n,1),O_(n,1,0))}function uA(n){for(;n===dv;)dv=cd[--ud],cd[ud]=null,hv=cd[--ud],cd[ud]=null;for(;n===_u;)_u=yr[--vr],yr[vr]=null,Ia=yr[--vr],yr[vr]=null,ja=yr[--vr],yr[vr]=null}var Gs=null,qs=null,dt=!1,Wr=null;function j_(n,e){var t=xr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function a2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Gs=n,qs=wl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Gs=n,qs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=_u!==null?{id:ja,overflow:Ia}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=xr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Gs=n,qs=null,!0):!1;default:return!1}}function w1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function x1(n){if(dt){var e=qs;if(e){var t=e;if(!a2(n,e)){if(w1(n))throw Error(W(418));e=wl(t.nextSibling);var s=Gs;e&&a2(n,e)?j_(s,t):(n.flags=n.flags&-4097|2,dt=!1,Gs=n)}}else{if(w1(n))throw Error(W(418));n.flags=n.flags&-4097|2,dt=!1,Gs=n}}}function o2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Gs=n}function j0(n){if(n!==Gs)return!1;if(!dt)return o2(n),dt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!m1(n.type,n.memoizedProps)),e&&(e=qs)){if(w1(n))throw I_(),Error(W(418));for(;e;)j_(n,e),e=wl(e.nextSibling)}if(o2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){qs=wl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}qs=null}}else qs=Gs?wl(n.stateNode.nextSibling):null;return!0}function I_(){for(var n=qs;n;)n=wl(n.nextSibling)}function ff(){qs=Gs=null,dt=!1}function dA(n){Wr===null?Wr=[n]:Wr.push(n)}var AL=Za.ReactCurrentBatchConfig;function Of(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function I0(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function l2(n){var e=n._init;return e(n._payload)}function B_(n){function e(w,x){if(n){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function t(w,x){if(!n)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function s(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function r(w,x){return w=Al(w,x),w.index=0,w.sibling=null,w}function i(w,x,b){return w.index=b,n?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function a(w){return n&&w.alternate===null&&(w.flags|=2),w}function l(w,x,b,k){return x===null||x.tag!==6?(x=Ax(b,w.mode,k),x.return=w,x):(x=r(x,b),x.return=w,x)}function c(w,x,b,k){var _=b.type;return _===sd?d(w,x,b.props.children,k,b.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===io&&l2(_)===x.type)?(k=r(x,b.props),k.ref=Of(w,x,b),k.return=w,k):(k=py(b.type,b.key,b.props,null,w.mode,k),k.ref=Of(w,x,b),k.return=w,k)}function u(w,x,b,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Ex(b,w.mode,k),x.return=w,x):(x=r(x,b.children||[]),x.return=w,x)}function d(w,x,b,k,_){return x===null||x.tag!==7?(x=Eu(b,w.mode,k,_),x.return=w,x):(x=r(x,b),x.return=w,x)}function h(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ax(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _0:return b=py(x.type,x.key,x.props,null,w.mode,b),b.ref=Of(w,null,x),b.return=w,b;case nd:return x=Ex(x,w.mode,b),x.return=w,x;case io:var k=x._init;return h(w,k(x._payload),b)}if(Jf(x)||Rf(x))return x=Eu(x,w.mode,b,null),x.return=w,x;I0(w,x)}return null}function f(w,x,b,k){var _=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(w,x,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _0:return b.key===_?c(w,x,b,k):null;case nd:return b.key===_?u(w,x,b,k):null;case io:return _=b._init,f(w,x,_(b._payload),k)}if(Jf(b)||Rf(b))return _!==null?null:d(w,x,b,k,null);I0(w,b)}return null}function m(w,x,b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(b)||null,l(x,w,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _0:return w=w.get(k.key===null?b:k.key)||null,c(x,w,k,_);case nd:return w=w.get(k.key===null?b:k.key)||null,u(x,w,k,_);case io:var T=k._init;return m(w,x,b,T(k._payload),_)}if(Jf(k)||Rf(k))return w=w.get(b)||null,d(x,w,k,_,null);I0(x,k)}return null}function y(w,x,b,k){for(var _=null,T=null,N=x,M=x=0,F=null;N!==null&&M<b.length;M++){N.index>M?(F=N,N=null):F=N.sibling;var D=f(w,N,b[M],k);if(D===null){N===null&&(N=F);break}n&&N&&D.alternate===null&&e(w,N),x=i(D,x,M),T===null?_=D:T.sibling=D,T=D,N=F}if(M===b.length)return t(w,N),dt&&jl(w,M),_;if(N===null){for(;M<b.length;M++)N=h(w,b[M],k),N!==null&&(x=i(N,x,M),T===null?_=N:T.sibling=N,T=N);return dt&&jl(w,M),_}for(N=s(w,N);M<b.length;M++)F=m(N,w,M,b[M],k),F!==null&&(n&&F.alternate!==null&&N.delete(F.key===null?M:F.key),x=i(F,x,M),T===null?_=F:T.sibling=F,T=F);return n&&N.forEach(function(j){return e(w,j)}),dt&&jl(w,M),_}function v(w,x,b,k){var _=Rf(b);if(typeof _!="function")throw Error(W(150));if(b=_.call(b),b==null)throw Error(W(151));for(var T=_=null,N=x,M=x=0,F=null,D=b.next();N!==null&&!D.done;M++,D=b.next()){N.index>M?(F=N,N=null):F=N.sibling;var j=f(w,N,D.value,k);if(j===null){N===null&&(N=F);break}n&&N&&j.alternate===null&&e(w,N),x=i(j,x,M),T===null?_=j:T.sibling=j,T=j,N=F}if(D.done)return t(w,N),dt&&jl(w,M),_;if(N===null){for(;!D.done;M++,D=b.next())D=h(w,D.value,k),D!==null&&(x=i(D,x,M),T===null?_=D:T.sibling=D,T=D);return dt&&jl(w,M),_}for(N=s(w,N);!D.done;M++,D=b.next())D=m(N,w,M,D.value,k),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?M:D.key),x=i(D,x,M),T===null?_=D:T.sibling=D,T=D);return n&&N.forEach(function(B){return e(w,B)}),dt&&jl(w,M),_}function A(w,x,b,k){if(typeof b=="object"&&b!==null&&b.type===sd&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _0:e:{for(var _=b.key,T=x;T!==null;){if(T.key===_){if(_=b.type,_===sd){if(T.tag===7){t(w,T.sibling),x=r(T,b.props.children),x.return=w,w=x;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===io&&l2(_)===T.type){t(w,T.sibling),x=r(T,b.props),x.ref=Of(w,T,b),x.return=w,w=x;break e}t(w,T);break}else e(w,T);T=T.sibling}b.type===sd?(x=Eu(b.props.children,w.mode,k,b.key),x.return=w,w=x):(k=py(b.type,b.key,b.props,null,w.mode,k),k.ref=Of(w,x,b),k.return=w,w=k)}return a(w);case nd:e:{for(T=b.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){t(w,x.sibling),x=r(x,b.children||[]),x.return=w,w=x;break e}else{t(w,x);break}else e(w,x);x=x.sibling}x=Ex(b,w.mode,k),x.return=w,w=x}return a(w);case io:return T=b._init,A(w,x,T(b._payload),k)}if(Jf(b))return y(w,x,b,k);if(Rf(b))return v(w,x,b,k);I0(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(t(w,x.sibling),x=r(x,b),x.return=w,w=x):(t(w,x),x=Ax(b,w.mode,k),x.return=w,w=x),a(w)):t(w,x)}return A}var pf=B_(!0),U_=B_(!1),fv=Ll(null),pv=null,dd=null,hA=null;function fA(){hA=dd=pv=null}function pA(n){var e=fv.current;at(fv),n._currentValue=e}function b1(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Ed(n,e){pv=n,hA=dd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ms=!0),n.firstContext=null)}function Ar(n){var e=n._currentValue;if(hA!==n)if(n={context:n,memoizedValue:e,next:null},dd===null){if(pv===null)throw Error(W(308));dd=n,pv.dependencies={lanes:0,firstContext:n}}else dd=dd.next=n;return e}var Gl=null;function mA(n){Gl===null?Gl=[n]:Gl.push(n)}function $_(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,mA(e)):(t.next=r.next,r.next=t),e.interleaved=t,qa(n,s)}function qa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ao=!1;function gA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z_(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ba(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xl(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Te&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,qa(n,t)}return r=s.interleaved,r===null?(e.next=e,mA(s)):(e.next=r.next,r.next=e),s.interleaved=e,qa(n,t)}function ly(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,tA(n,t)}}function c2(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function mv(n,e,t,s){var r=n.updateQueue;ao=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=n,v=l;switch(f=e,m=t,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=vt({},h,f);break e;case 2:ao=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Pu|=a,n.lanes=a,n.memoizedState=h}}function u2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var l0={},Ii=Ll(l0),Gp=Ll(l0),Xp=Ll(l0);function Xl(n){if(n===l0)throw Error(W(174));return n}function yA(n,e){switch(tt(Xp,e),tt(Gp,n),tt(Ii,l0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:t1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=t1(e,n)}at(Ii),tt(Ii,e)}function mf(){at(Ii),at(Gp),at(Xp)}function H_(n){Xl(Xp.current);var e=Xl(Ii.current),t=t1(e,n.type);e!==t&&(tt(Gp,n),tt(Ii,t))}function vA(n){Gp.current===n&&(at(Ii),at(Gp))}var pt=Ll(0);function gv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yx=[];function wA(){for(var n=0;n<yx.length;n++)yx[n]._workInProgressVersionPrimary=null;yx.length=0}var cy=Za.ReactCurrentDispatcher,vx=Za.ReactCurrentBatchConfig,Tu=0,mt=null,Vt=null,an=null,yv=!1,Pp=!1,Yp=0,EL=0;function An(){throw Error(W(321))}function xA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zr(n[t],e[t]))return!1;return!0}function bA(n,e,t,s,r,i){if(Tu=i,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cy.current=n===null||n.memoizedState===null?TL:PL,n=t(s,r),Pp){i=0;do{if(Pp=!1,Yp=0,25<=i)throw Error(W(301));i+=1,an=Vt=null,e.updateQueue=null,cy.current=NL,n=t(s,r)}while(Pp)}if(cy.current=vv,e=Vt!==null&&Vt.next!==null,Tu=0,an=Vt=mt=null,yv=!1,e)throw Error(W(300));return n}function SA(){var n=Yp!==0;return Yp=0,n}function ai(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?mt.memoizedState=an=n:an=an.next=n,an}function Er(){if(Vt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Vt.next;var e=an===null?mt.memoizedState:an.next;if(e!==null)an=e,Vt=n;else{if(n===null)throw Error(W(310));Vt=n,n={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},an===null?mt.memoizedState=an=n:an=an.next=n}return an}function Kp(n,e){return typeof e=="function"?e(n):e}function wx(n){var e=Er(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=Vt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Tu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,mt.lanes|=d,Pu|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,Zr(s,e.memoizedState)||(ms=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,mt.lanes|=i,Pu|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function xx(n){var e=Er(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do i=n(i,a.action),a=a.next;while(a!==r);Zr(i,e.memoizedState)||(ms=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function V_(){}function W_(n,e){var t=mt,s=Er(),r=e(),i=!Zr(s.memoizedState,r);if(i&&(s.memoizedState=r,ms=!0),s=s.queue,AA(X_.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||an!==null&&an.memoizedState.tag&1){if(t.flags|=2048,Qp(9,G_.bind(null,t,s,r,e),void 0,null),on===null)throw Error(W(349));Tu&30||q_(t,e,r)}return r}function q_(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function G_(n,e,t,s){e.value=t,e.getSnapshot=s,Y_(e)&&K_(n)}function X_(n,e,t){return t(function(){Y_(e)&&K_(n)})}function Y_(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zr(n,t)}catch{return!0}}function K_(n){var e=qa(n,1);e!==null&&Kr(e,n,1,-1)}function d2(n){var e=ai();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kp,lastRenderedState:n},e.queue=n,n=n.dispatch=_L.bind(null,mt,n),[e.memoizedState,n]}function Qp(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function Q_(){return Er().memoizedState}function uy(n,e,t,s){var r=ai();mt.flags|=n,r.memoizedState=Qp(1|e,t,void 0,s===void 0?null:s)}function vw(n,e,t,s){var r=Er();s=s===void 0?null:s;var i=void 0;if(Vt!==null){var a=Vt.memoizedState;if(i=a.destroy,s!==null&&xA(s,a.deps)){r.memoizedState=Qp(e,t,i,s);return}}mt.flags|=n,r.memoizedState=Qp(1|e,t,i,s)}function h2(n,e){return uy(8390656,8,n,e)}function AA(n,e){return vw(2048,8,n,e)}function Z_(n,e){return vw(4,2,n,e)}function J_(n,e){return vw(4,4,n,e)}function eT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function tT(n,e,t){return t=t!=null?t.concat([n]):null,vw(4,4,eT.bind(null,e,n),t)}function EA(){}function nT(n,e){var t=Er();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&xA(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function sT(n,e){var t=Er();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&xA(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function rT(n,e,t){return Tu&21?(Zr(t,e)||(t=c_(),mt.lanes|=t,Pu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ms=!0),n.memoizedState=t)}function kL(n,e){var t=$e;$e=t!==0&&4>t?t:4,n(!0);var s=vx.transition;vx.transition={};try{n(!1),e()}finally{$e=t,vx.transition=s}}function iT(){return Er().memoizedState}function CL(n,e,t){var s=Sl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},aT(n))oT(e,t);else if(t=$_(n,e,t,s),t!==null){var r=Yn();Kr(t,n,s,r),lT(t,e,s)}}function _L(n,e,t){var s=Sl(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(aT(n))oT(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,t);if(r.hasEagerState=!0,r.eagerState=l,Zr(l,a)){var c=e.interleaved;c===null?(r.next=r,mA(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=$_(n,e,r,s),t!==null&&(r=Yn(),Kr(t,n,s,r),lT(t,e,s))}}function aT(n){var e=n.alternate;return n===mt||e!==null&&e===mt}function oT(n,e){Pp=yv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function lT(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,tA(n,t)}}var vv={readContext:Ar,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},TL={readContext:Ar,useCallback:function(n,e){return ai().memoizedState=[n,e===void 0?null:e],n},useContext:Ar,useEffect:h2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,uy(4194308,4,eT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return uy(4194308,4,n,e)},useInsertionEffect:function(n,e){return uy(4,2,n,e)},useMemo:function(n,e){var t=ai();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ai();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=CL.bind(null,mt,n),[s.memoizedState,n]},useRef:function(n){var e=ai();return n={current:n},e.memoizedState=n},useState:d2,useDebugValue:EA,useDeferredValue:function(n){return ai().memoizedState=n},useTransition:function(){var n=d2(!1),e=n[0];return n=kL.bind(null,n[1]),ai().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=mt,r=ai();if(dt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),on===null)throw Error(W(349));Tu&30||q_(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,h2(X_.bind(null,s,i,n),[n]),s.flags|=2048,Qp(9,G_.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=ai(),e=on.identifierPrefix;if(dt){var t=Ia,s=ja;t=(s&~(1<<32-Yr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Yp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=EL++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},PL={readContext:Ar,useCallback:nT,useContext:Ar,useEffect:AA,useImperativeHandle:tT,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:sT,useReducer:wx,useRef:Q_,useState:function(){return wx(Kp)},useDebugValue:EA,useDeferredValue:function(n){var e=Er();return rT(e,Vt.memoizedState,n)},useTransition:function(){var n=wx(Kp)[0],e=Er().memoizedState;return[n,e]},useMutableSource:V_,useSyncExternalStore:W_,useId:iT,unstable_isNewReconciler:!1},NL={readContext:Ar,useCallback:nT,useContext:Ar,useEffect:AA,useImperativeHandle:tT,useInsertionEffect:Z_,useLayoutEffect:J_,useMemo:sT,useReducer:xx,useRef:Q_,useState:function(){return xx(Kp)},useDebugValue:EA,useDeferredValue:function(n){var e=Er();return Vt===null?e.memoizedState=n:rT(e,Vt.memoizedState,n)},useTransition:function(){var n=xx(Kp)[0],e=Er().memoizedState;return[n,e]},useMutableSource:V_,useSyncExternalStore:W_,useId:iT,unstable_isNewReconciler:!1};function Pr(n,e){if(n&&n.defaultProps){e=vt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function S1(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:vt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ww={isMounted:function(n){return(n=n._reactInternals)?Iu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Yn(),r=Sl(n),i=Ba(s,r);i.payload=e,t!=null&&(i.callback=t),e=xl(n,i,r),e!==null&&(Kr(e,n,r,s),ly(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Yn(),r=Sl(n),i=Ba(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=xl(n,i,r),e!==null&&(Kr(e,n,r,s),ly(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yn(),s=Sl(n),r=Ba(t,s);r.tag=2,e!=null&&(r.callback=e),e=xl(n,r,s),e!==null&&(Kr(e,n,s,t),ly(e,n,s))}};function f2(n,e,t,s,r,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!Hp(t,s)||!Hp(r,i):!0}function cT(n,e,t){var s=!1,r=Pl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ar(i):(r=ys(e)?Cu:Fn.current,s=e.contextTypes,i=(s=s!=null)?hf(n,r):Pl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ww,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function p2(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&ww.enqueueReplaceState(e,e.state,null)}function A1(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},gA(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ar(i):(i=ys(e)?Cu:Fn.current,r.context=hf(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(S1(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ww.enqueueReplaceState(r,r.state,null),mv(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function gf(n,e){try{var t="",s=e;do t+=rD(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function bx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function E1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var RL=typeof WeakMap=="function"?WeakMap:Map;function uT(n,e,t){t=Ba(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){xv||(xv=!0,L1=s),E1(n,e)},t}function dT(n,e,t){t=Ba(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){E1(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){E1(n,e),typeof s!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function m2(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new RL;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=WL.bind(null,n,e,t),e.then(n,n))}function g2(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function y2(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ba(-1,1),e.tag=2,xl(t,e,1))),t.lanes|=1),n)}var ML=Za.ReactCurrentOwner,ms=!1;function qn(n,e,t,s){e.child=n===null?U_(e,null,t,s):pf(e,n.child,t,s)}function v2(n,e,t,s,r){t=t.render;var i=e.ref;return Ed(e,r),s=bA(n,e,t,s,i,r),t=SA(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ga(n,e,r)):(dt&&t&&cA(e),e.flags|=1,qn(n,e,s,r),e.child)}function w2(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!MA(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,hT(n,e,i,s,r)):(n=py(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:Hp,t(a,s)&&n.ref===e.ref)return Ga(n,e,r)}return e.flags|=1,n=Al(i,s),n.ref=e.ref,n.return=e,e.child=n}function hT(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(Hp(i,s)&&n.ref===e.ref)if(ms=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(ms=!0);else return e.lanes=n.lanes,Ga(n,e,r)}return k1(n,e,t,s,r)}function fT(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(fd,zs),zs|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,tt(fd,zs),zs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,tt(fd,zs),zs|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,tt(fd,zs),zs|=s;return qn(n,e,r,t),e.child}function pT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function k1(n,e,t,s,r){var i=ys(t)?Cu:Fn.current;return i=hf(e,i),Ed(e,r),t=bA(n,e,t,s,i,r),s=SA(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ga(n,e,r)):(dt&&s&&cA(e),e.flags|=1,qn(n,e,t,r),e.child)}function x2(n,e,t,s,r){if(ys(t)){var i=!0;uv(e)}else i=!1;if(Ed(e,r),e.stateNode===null)dy(n,e),cT(e,t,s),A1(e,t,s,r),s=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ar(u):(u=ys(t)?Cu:Fn.current,u=hf(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&p2(e,a,s,u),ao=!1;var f=e.memoizedState;a.state=f,mv(e,s,a,r),c=e.memoizedState,l!==s||f!==c||gs.current||ao?(typeof d=="function"&&(S1(e,t,d,s),c=e.memoizedState),(l=ao||f2(e,t,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,z_(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Pr(e.type,l),a.props=u,h=e.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=Ar(c):(c=ys(t)?Cu:Fn.current,c=hf(e,c));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&p2(e,a,s,c),ao=!1,f=e.memoizedState,a.state=f,mv(e,s,a,r);var y=e.memoizedState;l!==h||f!==y||gs.current||ao?(typeof m=="function"&&(S1(e,t,m,s),y=e.memoizedState),(u=ao||f2(e,t,u,s,f,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),a.props=s,a.state=y,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return C1(n,e,t,s,i,r)}function C1(n,e,t,s,r,i){pT(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&i2(e,t,!1),Ga(n,e,i);s=e.stateNode,ML.current=e;var l=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=pf(e,n.child,null,i),e.child=pf(e,null,l,i)):qn(n,e,l,i),e.memoizedState=s.state,r&&i2(e,t,!0),e.child}function mT(n){var e=n.stateNode;e.pendingContext?r2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&r2(n,e.context,!1),yA(n,e.containerInfo)}function b2(n,e,t,s,r){return ff(),dA(r),e.flags|=256,qn(n,e,t,s),e.child}var _1={dehydrated:null,treeContext:null,retryLane:0};function T1(n){return{baseLanes:n,cachePool:null,transitions:null}}function gT(n,e,t){var s=e.pendingProps,r=pt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),tt(pt,r&1),n===null)return x1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Sw(a,s,0,null),n=Eu(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=T1(t),e.memoizedState=_1,n):kA(e,a));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return DL(n,e,a,s,l,r,t);if(i){i=s.fallback,a=e.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Al(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Al(l,i):(i=Eu(i,a,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=n.child.memoizedState,a=a===null?T1(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=_1,s}return i=n.child,n=i.sibling,s=Al(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function kA(n,e){return e=Sw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function B0(n,e,t,s){return s!==null&&dA(s),pf(e,n.child,null,t),n=kA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function DL(n,e,t,s,r,i,a){if(t)return e.flags&256?(e.flags&=-257,s=bx(Error(W(422))),B0(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Sw({mode:"visible",children:s.children},r,0,null),i=Eu(i,r,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&pf(e,n.child,null,a),e.child.memoizedState=T1(a),e.memoizedState=_1,i);if(!(e.mode&1))return B0(n,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(W(419)),s=bx(i,s,void 0),B0(n,e,a,s)}if(l=(a&n.childLanes)!==0,ms||l){if(s=on,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,qa(n,r),Kr(s,n,r,-1))}return RA(),s=bx(Error(W(421))),B0(n,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=qL.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,qs=wl(r.nextSibling),Gs=e,dt=!0,Wr=null,n!==null&&(yr[vr++]=ja,yr[vr++]=Ia,yr[vr++]=_u,ja=n.id,Ia=n.overflow,_u=e),e=kA(e,s.children),e.flags|=4096,e)}function S2(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),b1(n.return,e,t)}function Sx(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function yT(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(qn(n,e,s.children,t),s=pt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&S2(n,t,e);else if(n.tag===19)S2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(tt(pt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&gv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Sx(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&gv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Sx(e,!0,t,null,i);break;case"together":Sx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ga(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Pu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Al(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Al(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function LL(n,e,t){switch(e.tag){case 3:mT(e),ff();break;case 5:H_(e);break;case 1:ys(e.type)&&uv(e);break;case 4:yA(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;tt(fv,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(tt(pt,pt.current&1),e.flags|=128,null):t&e.child.childLanes?gT(n,e,t):(tt(pt,pt.current&1),n=Ga(n,e,t),n!==null?n.sibling:null);tt(pt,pt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return yT(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),tt(pt,pt.current),s)break;return null;case 22:case 23:return e.lanes=0,fT(n,e,t)}return Ga(n,e,t)}var vT,P1,wT,xT;vT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};P1=function(){};wT=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,Xl(Ii.current);var i=null;switch(t){case"input":r=Qx(n,r),s=Qx(n,s),i=[];break;case"select":r=vt({},r,{value:void 0}),s=vt({},s,{value:void 0}),i=[];break;case"textarea":r=e1(n,r),s=e1(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=lv)}n1(t,s);var a;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Op.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Op.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&rt("scroll",n),i||l===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};xT=function(n,e,t,s){t!==s&&(e.flags|=4)};function jf(n,e){if(!dt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function En(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function FL(n,e,t){var s=e.pendingProps;switch(uA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(e),null;case 1:return ys(e.type)&&cv(),En(e),null;case 3:return s=e.stateNode,mf(),at(gs),at(Fn),wA(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(j0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(j1(Wr),Wr=null))),P1(n,e),En(e),null;case 5:vA(e);var r=Xl(Xp.current);if(t=e.type,n!==null&&e.stateNode!=null)wT(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return En(e),null}if(n=Xl(Ii.current),j0(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[Di]=e,s[qp]=i,n=(e.mode&1)!==0,t){case"dialog":rt("cancel",s),rt("close",s);break;case"iframe":case"object":case"embed":rt("load",s);break;case"video":case"audio":for(r=0;r<tp.length;r++)rt(tp[r],s);break;case"source":rt("error",s);break;case"img":case"image":case"link":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"input":RE(s,i),rt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},rt("invalid",s);break;case"textarea":DE(s,i),rt("invalid",s)}n1(t,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&O0(s.textContent,l,n),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&O0(s.textContent,l,n),r=["children",""+l]):Op.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&rt("scroll",s)}switch(t){case"input":T0(s),ME(s,i,!0);break;case"textarea":T0(s),LE(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=lv)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=XC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[Di]=e,n[qp]=s,vT(n,e,!1,!1),e.stateNode=n;e:{switch(a=s1(t,s),t){case"dialog":rt("cancel",n),rt("close",n),r=s;break;case"iframe":case"object":case"embed":rt("load",n),r=s;break;case"video":case"audio":for(r=0;r<tp.length;r++)rt(tp[r],n);r=s;break;case"source":rt("error",n),r=s;break;case"img":case"image":case"link":rt("error",n),rt("load",n),r=s;break;case"details":rt("toggle",n),r=s;break;case"input":RE(n,s),r=Qx(n,s),rt("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=vt({},s,{value:void 0}),rt("invalid",n);break;case"textarea":DE(n,s),r=e1(n,s),rt("invalid",n);break;default:r=s}n1(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?QC(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&YC(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&jp(n,c):typeof c=="number"&&jp(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Op.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rt("scroll",n):c!=null&&YS(n,i,c,a))}switch(t){case"input":T0(n),ME(n,s,!1);break;case"textarea":T0(n),LE(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Tl(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?xd(n,!!s.multiple,i,!1):s.defaultValue!=null&&xd(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=lv)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return En(e),null;case 6:if(n&&e.stateNode!=null)xT(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=Xl(Xp.current),Xl(Ii.current),j0(e)){if(s=e.stateNode,t=e.memoizedProps,s[Di]=e,(i=s.nodeValue!==t)&&(n=Gs,n!==null))switch(n.tag){case 3:O0(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&O0(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Di]=e,e.stateNode=s}return En(e),null;case 13:if(at(pt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&qs!==null&&e.mode&1&&!(e.flags&128))I_(),ff(),e.flags|=98560,i=!1;else if(i=j0(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Di]=e}else ff(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;En(e),i=!1}else Wr!==null&&(j1(Wr),Wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||pt.current&1?Gt===0&&(Gt=3):RA())),e.updateQueue!==null&&(e.flags|=4),En(e),null);case 4:return mf(),P1(n,e),n===null&&Vp(e.stateNode.containerInfo),En(e),null;case 10:return pA(e.type._context),En(e),null;case 17:return ys(e.type)&&cv(),En(e),null;case 19:if(at(pt),i=e.memoizedState,i===null)return En(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)jf(i,!1);else{if(Gt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=gv(n),a!==null){for(e.flags|=128,jf(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return tt(pt,pt.current&1|2),e.child}n=n.sibling}i.tail!==null&&Mt()>yf&&(e.flags|=128,s=!0,jf(i,!1),e.lanes=4194304)}else{if(!s)if(n=gv(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),jf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!dt)return En(e),null}else 2*Mt()-i.renderingStartTime>yf&&t!==1073741824&&(e.flags|=128,s=!0,jf(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,t=pt.current,tt(pt,s?t&1|2:t&1),e):(En(e),null);case 22:case 23:return NA(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?zs&1073741824&&(En(e),e.subtreeFlags&6&&(e.flags|=8192)):En(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function OL(n,e){switch(uA(e),e.tag){case 1:return ys(e.type)&&cv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return mf(),at(gs),at(Fn),wA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return vA(e),null;case 13:if(at(pt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ff()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return at(pt),null;case 4:return mf(),null;case 10:return pA(e.type._context),null;case 22:case 23:return NA(),null;case 24:return null;default:return null}}var U0=!1,Dn=!1,jL=typeof WeakSet=="function"?WeakSet:Set,se=null;function hd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){_t(n,e,s)}else t.current=null}function N1(n,e,t){try{t()}catch(s){_t(n,e,s)}}var A2=!1;function IL(n,e){if(f1=iv,n=k_(),lA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(p1={focusedElem:n,selectionRange:t},iv=!1,se=e;se!==null;)if(e=se,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,se=n;else for(;se!==null;){e=se;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,A=y.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:Pr(e.type,v),A);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(k){_t(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}return y=A2,A2=!1,y}function Np(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&N1(e,t,i)}r=r.next}while(r!==s)}}function xw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function R1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function bT(n){var e=n.alternate;e!==null&&(n.alternate=null,bT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Di],delete e[qp],delete e[y1],delete e[xL],delete e[bL])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ST(n){return n.tag===5||n.tag===3||n.tag===4}function E2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ST(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function M1(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=lv));else if(s!==4&&(n=n.child,n!==null))for(M1(n,e,t),n=n.sibling;n!==null;)M1(n,e,t),n=n.sibling}function D1(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(D1(n,e,t),n=n.sibling;n!==null;)D1(n,e,t),n=n.sibling}var pn=null,Vr=!1;function to(n,e,t){for(t=t.child;t!==null;)AT(n,e,t),t=t.sibling}function AT(n,e,t){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(hw,t)}catch{}switch(t.tag){case 5:Dn||hd(t,e);case 6:var s=pn,r=Vr;pn=null,to(n,e,t),pn=s,Vr=r,pn!==null&&(Vr?(n=pn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):pn.removeChild(t.stateNode));break;case 18:pn!==null&&(Vr?(n=pn,t=t.stateNode,n.nodeType===8?mx(n.parentNode,t):n.nodeType===1&&mx(n,t),$p(n)):mx(pn,t.stateNode));break;case 4:s=pn,r=Vr,pn=t.stateNode.containerInfo,Vr=!0,to(n,e,t),pn=s,Vr=r;break;case 0:case 11:case 14:case 15:if(!Dn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&N1(t,e,a),r=r.next}while(r!==s)}to(n,e,t);break;case 1:if(!Dn&&(hd(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){_t(t,e,l)}to(n,e,t);break;case 21:to(n,e,t);break;case 22:t.mode&1?(Dn=(s=Dn)||t.memoizedState!==null,to(n,e,t),Dn=s):to(n,e,t);break;default:to(n,e,t)}}function k2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new jL),e.forEach(function(s){var r=GL.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Cr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:pn=l.stateNode,Vr=!1;break e;case 3:pn=l.stateNode.containerInfo,Vr=!0;break e;case 4:pn=l.stateNode.containerInfo,Vr=!0;break e}l=l.return}if(pn===null)throw Error(W(160));AT(i,a,r),pn=null,Vr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){_t(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ET(e,n),e=e.sibling}function ET(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cr(e,n),ti(n),s&4){try{Np(3,n,n.return),xw(3,n)}catch(v){_t(n,n.return,v)}try{Np(5,n,n.return)}catch(v){_t(n,n.return,v)}}break;case 1:Cr(e,n),ti(n),s&512&&t!==null&&hd(t,t.return);break;case 5:if(Cr(e,n),ti(n),s&512&&t!==null&&hd(t,t.return),n.flags&32){var r=n.stateNode;try{jp(r,"")}catch(v){_t(n,n.return,v)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qC(r,i),s1(l,a);var u=s1(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?QC(r,h):d==="dangerouslySetInnerHTML"?YC(r,h):d==="children"?jp(r,h):YS(r,d,h,u)}switch(l){case"input":Zx(r,i);break;case"textarea":GC(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?xd(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?xd(r,!!i.multiple,i.defaultValue,!0):xd(r,!!i.multiple,i.multiple?[]:"",!1))}r[qp]=i}catch(v){_t(n,n.return,v)}}break;case 6:if(Cr(e,n),ti(n),s&4){if(n.stateNode===null)throw Error(W(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(v){_t(n,n.return,v)}}break;case 3:if(Cr(e,n),ti(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{$p(e.containerInfo)}catch(v){_t(n,n.return,v)}break;case 4:Cr(e,n),ti(n);break;case 13:Cr(e,n),ti(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(TA=Mt())),s&4&&k2(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Dn=(u=Dn)||d,Cr(e,n),Dn=u):Cr(e,n),ti(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(se=n,d=n.child;d!==null;){for(h=se=d;se!==null;){switch(f=se,m=f.child,f.tag){case 0:case 11:case 14:case 15:Np(4,f,f.return);break;case 1:hd(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){_t(s,t,v)}}break;case 5:hd(f,f.return);break;case 22:if(f.memoizedState!==null){_2(h);continue}}m!==null?(m.return=f,se=m):_2(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=KC("display",a))}catch(v){_t(n,n.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){_t(n,n.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cr(e,n),ti(n),s&4&&k2(n);break;case 21:break;default:Cr(e,n),ti(n)}}function ti(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ST(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(jp(r,""),s.flags&=-33);var i=E2(n);D1(n,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=E2(n);M1(n,l,a);break;default:throw Error(W(161))}}catch(c){_t(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function BL(n,e,t){se=n,kT(n)}function kT(n,e,t){for(var s=(n.mode&1)!==0;se!==null;){var r=se,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||U0;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Dn;l=U0;var u=Dn;if(U0=a,(Dn=c)&&!u)for(se=r;se!==null;)a=se,c=a.child,a.tag===22&&a.memoizedState!==null?T2(r):c!==null?(c.return=a,se=c):T2(r);for(;i!==null;)se=i,kT(i),i=i.sibling;se=r,U0=l,Dn=u}C2(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,se=i):C2(n)}}function C2(n){for(;se!==null;){var e=se;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||xw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Dn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Pr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&u2(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}u2(e,a,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&$p(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Dn||e.flags&512&&R1(e)}catch(f){_t(e,e.return,f)}}if(e===n){se=null;break}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}}function _2(n){for(;se!==null;){var e=se;if(e===n){se=null;break}var t=e.sibling;if(t!==null){t.return=e.return,se=t;break}se=e.return}}function T2(n){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{xw(4,e)}catch(c){_t(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){_t(e,r,c)}}var i=e.return;try{R1(e)}catch(c){_t(e,i,c)}break;case 5:var a=e.return;try{R1(e)}catch(c){_t(e,a,c)}}}catch(c){_t(e,e.return,c)}if(e===n){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var UL=Math.ceil,wv=Za.ReactCurrentDispatcher,CA=Za.ReactCurrentOwner,br=Za.ReactCurrentBatchConfig,Te=0,on=null,jt=null,wn=0,zs=0,fd=Ll(0),Gt=0,Zp=null,Pu=0,bw=0,_A=0,Rp=null,ps=null,TA=0,yf=1/0,Xi=null,xv=!1,L1=null,bl=null,$0=!1,pl=null,bv=0,Mp=0,F1=null,hy=-1,fy=0;function Yn(){return Te&6?Mt():hy!==-1?hy:hy=Mt()}function Sl(n){return n.mode&1?Te&2&&wn!==0?wn&-wn:AL.transition!==null?(fy===0&&(fy=c_()),fy):(n=$e,n!==0||(n=window.event,n=n===void 0?16:g_(n.type)),n):1}function Kr(n,e,t,s){if(50<Mp)throw Mp=0,F1=null,Error(W(185));i0(n,t,s),(!(Te&2)||n!==on)&&(n===on&&(!(Te&2)&&(bw|=t),Gt===4&&lo(n,wn)),vs(n,s),t===1&&Te===0&&!(e.mode&1)&&(yf=Mt()+500,yw&&Fl()))}function vs(n,e){var t=n.callbackNode;AD(n,e);var s=rv(n,n===on?wn:0);if(s===0)t!==null&&jE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&jE(t),e===1)n.tag===0?SL(P2.bind(null,n)):F_(P2.bind(null,n)),vL(function(){!(Te&6)&&Fl()}),t=null;else{switch(u_(s)){case 1:t=eA;break;case 4:t=o_;break;case 16:t=sv;break;case 536870912:t=l_;break;default:t=sv}t=DT(t,CT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function CT(n,e){if(hy=-1,fy=0,Te&6)throw Error(W(327));var t=n.callbackNode;if(kd()&&n.callbackNode!==t)return null;var s=rv(n,n===on?wn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Sv(n,s);else{e=s;var r=Te;Te|=2;var i=TT();(on!==n||wn!==e)&&(Xi=null,yf=Mt()+500,Au(n,e));do try{HL();break}catch(l){_T(n,l)}while(!0);fA(),wv.current=i,Te=r,jt!==null?e=0:(on=null,wn=0,e=Gt)}if(e!==0){if(e===2&&(r=l1(n),r!==0&&(s=r,e=O1(n,r))),e===1)throw t=Zp,Au(n,0),lo(n,s),vs(n,Mt()),t;if(e===6)lo(n,s);else{if(r=n.current.alternate,!(s&30)&&!$L(r)&&(e=Sv(n,s),e===2&&(i=l1(n),i!==0&&(s=i,e=O1(n,i))),e===1))throw t=Zp,Au(n,0),lo(n,s),vs(n,Mt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:Il(n,ps,Xi);break;case 3:if(lo(n,s),(s&130023424)===s&&(e=TA+500-Mt(),10<e)){if(rv(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Yn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=g1(Il.bind(null,n,ps,Xi),e);break}Il(n,ps,Xi);break;case 4:if(lo(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var a=31-Yr(s);i=1<<a,a=e[a],a>r&&(r=a),s&=~i}if(s=r,s=Mt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*UL(s/1960))-s,10<s){n.timeoutHandle=g1(Il.bind(null,n,ps,Xi),s);break}Il(n,ps,Xi);break;case 5:Il(n,ps,Xi);break;default:throw Error(W(329))}}}return vs(n,Mt()),n.callbackNode===t?CT.bind(null,n):null}function O1(n,e){var t=Rp;return n.current.memoizedState.isDehydrated&&(Au(n,e).flags|=256),n=Sv(n,e),n!==2&&(e=ps,ps=t,e!==null&&j1(e)),n}function j1(n){ps===null?ps=n:ps.push.apply(ps,n)}function $L(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Zr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lo(n,e){for(e&=~_A,e&=~bw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Yr(e),s=1<<t;n[t]=-1,e&=~s}}function P2(n){if(Te&6)throw Error(W(327));kd();var e=rv(n,0);if(!(e&1))return vs(n,Mt()),null;var t=Sv(n,e);if(n.tag!==0&&t===2){var s=l1(n);s!==0&&(e=s,t=O1(n,s))}if(t===1)throw t=Zp,Au(n,0),lo(n,e),vs(n,Mt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Il(n,ps,Xi),vs(n,Mt()),null}function PA(n,e){var t=Te;Te|=1;try{return n(e)}finally{Te=t,Te===0&&(yf=Mt()+500,yw&&Fl())}}function Nu(n){pl!==null&&pl.tag===0&&!(Te&6)&&kd();var e=Te;Te|=1;var t=br.transition,s=$e;try{if(br.transition=null,$e=1,n)return n()}finally{$e=s,br.transition=t,Te=e,!(Te&6)&&Fl()}}function NA(){zs=fd.current,at(fd)}function Au(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,yL(t)),jt!==null)for(t=jt.return;t!==null;){var s=t;switch(uA(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&cv();break;case 3:mf(),at(gs),at(Fn),wA();break;case 5:vA(s);break;case 4:mf();break;case 13:at(pt);break;case 19:at(pt);break;case 10:pA(s.type._context);break;case 22:case 23:NA()}t=t.return}if(on=n,jt=n=Al(n.current,null),wn=zs=e,Gt=0,Zp=null,_A=bw=Pu=0,ps=Rp=null,Gl!==null){for(e=0;e<Gl.length;e++)if(t=Gl[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}t.pending=s}Gl=null}return n}function _T(n,e){do{var t=jt;try{if(fA(),cy.current=vv,yv){for(var s=mt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}yv=!1}if(Tu=0,an=Vt=mt=null,Pp=!1,Yp=0,CA.current=null,t===null||t.return===null){Gt=1,Zp=e,jt=null;break}e:{var i=n,a=t.return,l=t,c=e;if(e=wn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=g2(a);if(m!==null){m.flags&=-257,y2(m,a,l,i,e),m.mode&1&&m2(i,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){m2(i,u,e),RA();break e}c=Error(W(426))}}else if(dt&&l.mode&1){var A=g2(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),y2(A,a,l,i,e),dA(gf(c,l));break e}}i=c=gf(c,l),Gt!==4&&(Gt=2),Rp===null?Rp=[i]:Rp.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=uT(i,c,e);c2(i,w);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(bl===null||!bl.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=dT(i,l,e);c2(i,k);break e}}i=i.return}while(i!==null)}NT(t)}catch(_){e=_,jt===t&&t!==null&&(jt=t=t.return);continue}break}while(!0)}function TT(){var n=wv.current;return wv.current=vv,n===null?vv:n}function RA(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),on===null||!(Pu&268435455)&&!(bw&268435455)||lo(on,wn)}function Sv(n,e){var t=Te;Te|=2;var s=TT();(on!==n||wn!==e)&&(Xi=null,Au(n,e));do try{zL();break}catch(r){_T(n,r)}while(!0);if(fA(),Te=t,wv.current=s,jt!==null)throw Error(W(261));return on=null,wn=0,Gt}function zL(){for(;jt!==null;)PT(jt)}function HL(){for(;jt!==null&&!pD();)PT(jt)}function PT(n){var e=MT(n.alternate,n,zs);n.memoizedProps=n.pendingProps,e===null?NT(n):jt=e,CA.current=null}function NT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=OL(t,e),t!==null){t.flags&=32767,jt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gt=6,jt=null;return}}else if(t=FL(t,e,zs),t!==null){jt=t;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=n}while(e!==null);Gt===0&&(Gt=5)}function Il(n,e,t){var s=$e,r=br.transition;try{br.transition=null,$e=1,VL(n,e,t,s)}finally{br.transition=r,$e=s}return null}function VL(n,e,t,s){do kd();while(pl!==null);if(Te&6)throw Error(W(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(ED(n,i),n===on&&(jt=on=null,wn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||$0||($0=!0,DT(sv,function(){return kd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=br.transition,br.transition=null;var a=$e;$e=1;var l=Te;Te|=4,CA.current=null,IL(n,t),ET(t,n),uL(p1),iv=!!f1,p1=f1=null,n.current=t,BL(t),mD(),Te=l,$e=a,br.transition=i}else n.current=t;if($0&&($0=!1,pl=n,bv=r),i=n.pendingLanes,i===0&&(bl=null),vD(t.stateNode),vs(n,Mt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(xv)throw xv=!1,n=L1,L1=null,n;return bv&1&&n.tag!==0&&kd(),i=n.pendingLanes,i&1?n===F1?Mp++:(Mp=0,F1=n):Mp=0,Fl(),null}function kd(){if(pl!==null){var n=u_(bv),e=br.transition,t=$e;try{if(br.transition=null,$e=16>n?16:n,pl===null)var s=!1;else{if(n=pl,pl=null,bv=0,Te&6)throw Error(W(331));var r=Te;for(Te|=4,se=n.current;se!==null;){var i=se,a=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Np(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var f=d.sibling,m=d.return;if(bT(d),d===u){se=null;break}if(f!==null){f.return=m,se=f;break}se=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}se=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,se=a;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Np(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,se=w;break e}se=i.return}}var x=n.current;for(se=x;se!==null;){a=se;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,se=b;else e:for(a=x;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xw(9,l)}}catch(_){_t(l,l.return,_)}if(l===a){se=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,se=k;break e}se=l.return}}if(Te=r,Fl(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(hw,n)}catch{}s=!0}return s}finally{$e=t,br.transition=e}}return!1}function N2(n,e,t){e=gf(t,e),e=uT(n,e,1),n=xl(n,e,1),e=Yn(),n!==null&&(i0(n,1,e),vs(n,e))}function _t(n,e,t){if(n.tag===3)N2(n,n,t);else for(;e!==null;){if(e.tag===3){N2(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(bl===null||!bl.has(s))){n=gf(t,n),n=dT(e,n,1),e=xl(e,n,1),n=Yn(),e!==null&&(i0(e,1,n),vs(e,n));break}}e=e.return}}function WL(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Yn(),n.pingedLanes|=n.suspendedLanes&t,on===n&&(wn&t)===t&&(Gt===4||Gt===3&&(wn&130023424)===wn&&500>Mt()-TA?Au(n,0):_A|=t),vs(n,e)}function RT(n,e){e===0&&(n.mode&1?(e=R0,R0<<=1,!(R0&130023424)&&(R0=4194304)):e=1);var t=Yn();n=qa(n,e),n!==null&&(i0(n,e,t),vs(n,t))}function qL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),RT(n,t)}function GL(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),RT(n,t)}var MT;MT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||gs.current)ms=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ms=!1,LL(n,e,t);ms=!!(n.flags&131072)}else ms=!1,dt&&e.flags&1048576&&O_(e,hv,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;dy(n,e),n=e.pendingProps;var r=hf(e,Fn.current);Ed(e,t),r=bA(null,e,s,n,r,t);var i=SA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(s)?(i=!0,uv(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,gA(e),r.updater=ww,e.stateNode=r,r._reactInternals=e,A1(e,s,n,t),e=C1(null,e,s,!0,i,t)):(e.tag=0,dt&&i&&cA(e),qn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(dy(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=YL(s),n=Pr(s,n),r){case 0:e=k1(null,e,s,n,t);break e;case 1:e=x2(null,e,s,n,t);break e;case 11:e=v2(null,e,s,n,t);break e;case 14:e=w2(null,e,s,Pr(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pr(s,r),k1(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pr(s,r),x2(n,e,s,r,t);case 3:e:{if(mT(e),n===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,z_(n,e),mv(e,s,null,t);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=gf(Error(W(423)),e),e=b2(n,e,s,t,r);break e}else if(s!==r){r=gf(Error(W(424)),e),e=b2(n,e,s,t,r);break e}else for(qs=wl(e.stateNode.containerInfo.firstChild),Gs=e,dt=!0,Wr=null,t=U_(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ff(),s===r){e=Ga(n,e,t);break e}qn(n,e,s,t)}e=e.child}return e;case 5:return H_(e),n===null&&x1(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,a=r.children,m1(s,r)?a=null:i!==null&&m1(s,i)&&(e.flags|=32),pT(n,e),qn(n,e,a,t),e.child;case 6:return n===null&&x1(e),null;case 13:return gT(n,e,t);case 4:return yA(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=pf(e,null,s,t):qn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pr(s,r),v2(n,e,s,r,t);case 7:return qn(n,e,e.pendingProps,t),e.child;case 8:return qn(n,e,e.pendingProps.children,t),e.child;case 12:return qn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,tt(fv,s._currentValue),s._currentValue=a,i!==null)if(Zr(i.value,a)){if(i.children===r.children&&!gs.current){e=Ga(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ba(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),b1(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),b1(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}qn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Ed(e,t),r=Ar(r),s=s(r),e.flags|=1,qn(n,e,s,t),e.child;case 14:return s=e.type,r=Pr(s,e.pendingProps),r=Pr(s.type,r),w2(n,e,s,r,t);case 15:return hT(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Pr(s,r),dy(n,e),e.tag=1,ys(s)?(n=!0,uv(e)):n=!1,Ed(e,t),cT(e,s,r),A1(e,s,r,t),C1(null,e,s,!0,n,t);case 19:return yT(n,e,t);case 22:return fT(n,e,t)}throw Error(W(156,e.tag))};function DT(n,e){return a_(n,e)}function XL(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(n,e,t,s){return new XL(n,e,t,s)}function MA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YL(n){if(typeof n=="function")return MA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===QS)return 11;if(n===ZS)return 14}return 2}function Al(n,e){var t=n.alternate;return t===null?(t=xr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function py(n,e,t,s,r,i){var a=2;if(s=n,typeof n=="function")MA(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case sd:return Eu(t.children,r,i,e);case KS:a=8,r|=8;break;case Gx:return n=xr(12,t,e,r|2),n.elementType=Gx,n.lanes=i,n;case Xx:return n=xr(13,t,e,r),n.elementType=Xx,n.lanes=i,n;case Yx:return n=xr(19,t,e,r),n.elementType=Yx,n.lanes=i,n;case HC:return Sw(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $C:a=10;break e;case zC:a=9;break e;case QS:a=11;break e;case ZS:a=14;break e;case io:a=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=xr(a,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function Eu(n,e,t,s){return n=xr(7,n,s,e),n.lanes=t,n}function Sw(n,e,t,s){return n=xr(22,n,s,e),n.elementType=HC,n.lanes=t,n.stateNode={isHidden:!1},n}function Ax(n,e,t){return n=xr(6,n,null,e),n.lanes=t,n}function Ex(n,e,t){return e=xr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KL(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rx(0),this.expirationTimes=rx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rx(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function DA(n,e,t,s,r,i,a,l,c){return n=new KL(n,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},gA(i),n}function QL(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nd,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function LT(n){if(!n)return Pl;n=n._reactInternals;e:{if(Iu(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(ys(t))return L_(n,t,e)}return e}function FT(n,e,t,s,r,i,a,l,c){return n=DA(t,s,!0,n,r,i,a,l,c),n.context=LT(null),t=n.current,s=Yn(),r=Sl(t),i=Ba(s,r),i.callback=e??null,xl(t,i,r),n.current.lanes=r,i0(n,r,s),vs(n,s),n}function Aw(n,e,t,s){var r=e.current,i=Yn(),a=Sl(r);return t=LT(t),e.context===null?e.context=t:e.pendingContext=t,e=Ba(i,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=xl(r,e,a),n!==null&&(Kr(n,r,a,i),ly(n,r,a)),a}function Av(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function R2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function LA(n,e){R2(n,e),(n=n.alternate)&&R2(n,e)}function ZL(){return null}var OT=typeof reportError=="function"?reportError:function(n){console.error(n)};function FA(n){this._internalRoot=n}Ew.prototype.render=FA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));Aw(n,e,null,null)};Ew.prototype.unmount=FA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Nu(function(){Aw(null,n,null,null)}),e[Wa]=null}};function Ew(n){this._internalRoot=n}Ew.prototype.unstable_scheduleHydration=function(n){if(n){var e=f_();n={blockedOn:null,target:n,priority:e};for(var t=0;t<oo.length&&e!==0&&e<oo[t].priority;t++);oo.splice(t,0,n),t===0&&m_(n)}};function OA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function kw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function M2(){}function JL(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Av(a);i.call(u)}}var a=FT(e,s,n,0,null,!1,!1,"",M2);return n._reactRootContainer=a,n[Wa]=a.current,Vp(n.nodeType===8?n.parentNode:n),Nu(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Av(c);l.call(u)}}var c=DA(n,0,!1,null,null,!1,!1,"",M2);return n._reactRootContainer=c,n[Wa]=c.current,Vp(n.nodeType===8?n.parentNode:n),Nu(function(){Aw(e,c,t,s)}),c}function Cw(n,e,t,s,r){var i=t._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=Av(a);l.call(c)}}Aw(e,a,n,r)}else a=JL(t,e,n,r,s);return Av(a)}d_=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ep(e.pendingLanes);t!==0&&(tA(e,t|1),vs(e,Mt()),!(Te&6)&&(yf=Mt()+500,Fl()))}break;case 13:Nu(function(){var s=qa(n,1);if(s!==null){var r=Yn();Kr(s,n,1,r)}}),LA(n,1)}};nA=function(n){if(n.tag===13){var e=qa(n,134217728);if(e!==null){var t=Yn();Kr(e,n,134217728,t)}LA(n,134217728)}};h_=function(n){if(n.tag===13){var e=Sl(n),t=qa(n,e);if(t!==null){var s=Yn();Kr(t,n,e,s)}LA(n,e)}};f_=function(){return $e};p_=function(n,e){var t=$e;try{return $e=n,e()}finally{$e=t}};i1=function(n,e,t){switch(e){case"input":if(Zx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=gw(s);if(!r)throw Error(W(90));WC(s),Zx(s,r)}}}break;case"textarea":GC(n,t);break;case"select":e=t.value,e!=null&&xd(n,!!t.multiple,e,!1)}};e_=PA;t_=Nu;var e5={usingClientEntryPoint:!1,Events:[o0,od,gw,ZC,JC,PA]},If={findFiberByHostInstance:ql,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t5={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Za.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=r_(n),n===null?null:n.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||ZL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z0.isDisabled&&z0.supportsFiber)try{hw=z0.inject(t5),ji=z0}catch{}}Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e5;Qs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OA(e))throw Error(W(200));return QL(n,e,null,t)};Qs.createRoot=function(n,e){if(!OA(n))throw Error(W(299));var t=!1,s="",r=OT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=DA(n,1,!1,null,null,t,!1,s,r),n[Wa]=e.current,Vp(n.nodeType===8?n.parentNode:n),new FA(e)};Qs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=r_(e),n=n===null?null:n.stateNode,n};Qs.flushSync=function(n){return Nu(n)};Qs.hydrate=function(n,e,t){if(!kw(e))throw Error(W(200));return Cw(null,n,e,!0,t)};Qs.hydrateRoot=function(n,e,t){if(!OA(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",a=OT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=FT(e,null,n,1,t??null,r,!1,i,a),n[Wa]=e.current,Vp(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Ew(e)};Qs.render=function(n,e,t){if(!kw(e))throw Error(W(200));return Cw(null,n,e,!1,t)};Qs.unmountComponentAtNode=function(n){if(!kw(n))throw Error(W(40));return n._reactRootContainer?(Nu(function(){Cw(null,null,n,!1,function(){n._reactRootContainer=null,n[Wa]=null})}),!0):!1};Qs.unstable_batchedUpdates=PA;Qs.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!kw(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return Cw(n,e,t,!1,s)};Qs.version="18.3.1-next-f1338f8080-20240426";function jT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jT)}catch(n){console.error(n)}}jT(),jC.exports=Qs;var n5=jC.exports,D2=n5;Wx.createRoot=D2.createRoot,Wx.hydrateRoot=D2.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jp(){return Jp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Jp.apply(this,arguments)}var ml;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ml||(ml={}));const L2="popstate";function s5(n){n===void 0&&(n={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return I1("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:Ev(r)}return i5(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jA(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r5(){return Math.random().toString(36).substr(2,8)}function F2(n,e){return{usr:n.state,key:n.key,idx:e}}function I1(n,e,t,s){return t===void 0&&(t=null),Jp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?kf(e):e,{state:t,key:e&&e.key||s||r5()})}function Ev(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function kf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function i5(n,e,t,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=ml.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Jp({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=ml.Pop;let A=d(),w=A==null?null:A-u;u=A,c&&c({action:l,location:v.location,delta:w})}function f(A,w){l=ml.Push;let x=I1(v.location,A,w);u=d()+1;let b=F2(x,u),k=v.createHref(x);try{a.pushState(b,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(k)}i&&c&&c({action:l,location:v.location,delta:1})}function m(A,w){l=ml.Replace;let x=I1(v.location,A,w);u=d();let b=F2(x,u),k=v.createHref(x);a.replaceState(b,"",k),i&&c&&c({action:l,location:v.location,delta:0})}function y(A){let w=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof A=="string"?A:Ev(A);return x=x.replace(/ $/,"%20"),gt(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return l},get location(){return n(r,a)},listen(A){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(L2,h),c=A,()=>{r.removeEventListener(L2,h),c=null}},createHref(A){return e(r,A)},createURL:y,encodeLocation(A){let w=y(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(A){return a.go(A)}};return v}var O2;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(O2||(O2={}));function a5(n,e,t){return t===void 0&&(t="/"),o5(n,e,t)}function o5(n,e,t,s){let r=typeof e=="string"?kf(e):e,i=vf(r.pathname||"/",t);if(i==null)return null;let a=IT(n);l5(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=w5(i);l=y5(a[c],u)}return l}function IT(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=El([s,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),IT(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:m5(u,i.index),routesMeta:d})};return n.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of BT(i.path))r(i,a,c)}),e}function BT(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=BT(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function l5(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:g5(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const c5=/^:[\w-]+$/,u5=3,d5=2,h5=1,f5=10,p5=-2,j2=n=>n==="*";function m5(n,e){let t=n.split("/"),s=t.length;return t.some(j2)&&(s+=p5),e&&(s+=d5),t.filter(r=>!j2(r)).reduce((r,i)=>r+(c5.test(i)?u5:i===""?h5:f5),s)}function g5(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function y5(n,e,t){let{routesMeta:s}=n,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=B1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:El([i,h.pathname]),pathnameBase:E5(El([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=El([i,h.pathnameBase]))}return a}function B1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=v5(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let v=l[h]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[h];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:n}}function v5(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jA(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function w5(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jA(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function vf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const x5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b5=n=>x5.test(n);function S5(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?kf(n):n,i;if(t)if(b5(t))i=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),jA(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?i=I2(t.substring(1),"/"):i=I2(t,e)}else i=e;return{pathname:i,search:k5(s),hash:C5(r)}}function I2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function kx(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A5(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IA(n,e){let t=A5(n);return e?t.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function BA(n,e,t,s){s===void 0&&(s=!1);let r;typeof n=="string"?r=kf(n):(r=Jp({},n),gt(!r.pathname||!r.pathname.includes("?"),kx("?","pathname","search",r)),gt(!r.pathname||!r.pathname.includes("#"),kx("#","pathname","hash",r)),gt(!r.search||!r.search.includes("#"),kx("#","search","hash",r)));let i=n===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=t;else{let h=e.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=S5(r,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const El=n=>n.join("/").replace(/\/\/+/g,"/"),E5=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),k5=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,C5=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _5(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const UT=["post","put","patch","delete"];new Set(UT);const T5=["get",...UT];new Set(T5);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function em(){return em=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},em.apply(this,arguments)}const _w=C.createContext(null),$T=C.createContext(null),Ja=C.createContext(null),Tw=C.createContext(null),$i=C.createContext({outlet:null,matches:[],isDataRoute:!1}),zT=C.createContext(null);function P5(n,e){let{relative:t}=e===void 0?{}:e;Cf()||gt(!1);let{basename:s,navigator:r}=C.useContext(Ja),{hash:i,pathname:a,search:l}=Pw(n,{relative:t}),c=a;return s!=="/"&&(c=a==="/"?s:El([s,a])),r.createHref({pathname:c,search:l,hash:i})}function Cf(){return C.useContext(Tw)!=null}function Bu(){return Cf()||gt(!1),C.useContext(Tw).location}function HT(n){C.useContext(Ja).static||C.useLayoutEffect(n)}function _f(){let{isDataRoute:n}=C.useContext($i);return n?W5():N5()}function N5(){Cf()||gt(!1);let n=C.useContext(_w),{basename:e,future:t,navigator:s}=C.useContext(Ja),{matches:r}=C.useContext($i),{pathname:i}=Bu(),a=JSON.stringify(IA(r,t.v7_relativeSplatPath)),l=C.useRef(!1);return HT(()=>{l.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=BA(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:El([e,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[e,s,a,i,n])}const R5=C.createContext(null);function M5(n){let e=C.useContext($i).outlet;return e&&C.createElement(R5.Provider,{value:n},e)}function D5(){let{matches:n}=C.useContext($i),e=n[n.length-1];return e?e.params:{}}function Pw(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=C.useContext(Ja),{matches:r}=C.useContext($i),{pathname:i}=Bu(),a=JSON.stringify(IA(r,s.v7_relativeSplatPath));return C.useMemo(()=>BA(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function L5(n,e){return F5(n,e)}function F5(n,e,t,s){Cf()||gt(!1);let{navigator:r}=C.useContext(Ja),{matches:i}=C.useContext($i),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Bu(),d;if(e){var h;let A=typeof e=="string"?kf(e):e;c==="/"||(h=A.pathname)!=null&&h.startsWith(c)||gt(!1),d=A}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let A=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=a5(n,{pathname:m}),v=U5(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:El([c,r.encodeLocation?r.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:El([c,r.encodeLocation?r.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,t,s);return e&&v?C.createElement(Tw.Provider,{value:{location:em({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ml.Pop}},v):v}function O5(){let n=V5(),e=_5(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:r},t):null,null)}const j5=C.createElement(O5,null);class I5 extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement($i.Provider,{value:this.props.routeContext},C.createElement(zT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B5(n){let{routeContext:e,match:t,children:s}=n,r=C.useContext(_w);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement($i.Provider,{value:e},s)}function U5(n,e,t,s){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=t,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,y=!1,v=null,A=null;t&&(m=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||j5,c&&(u<0&&f===0?(q5("route-fallback"),y=!0,A=null):u===f&&(y=!0,A=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,f+1)),x=()=>{let b;return m?b=v:y?b=A:h.route.Component?b=C.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,C.createElement(B5,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:b})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?C.createElement(I5,{location:t.location,revalidation:t.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var VT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(VT||{}),WT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(WT||{});function $5(n){let e=C.useContext(_w);return e||gt(!1),e}function z5(n){let e=C.useContext($T);return e||gt(!1),e}function H5(n){let e=C.useContext($i);return e||gt(!1),e}function qT(n){let e=H5(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function V5(){var n;let e=C.useContext(zT),t=z5(),s=qT();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function W5(){let{router:n}=$5(VT.UseNavigateStable),e=qT(WT.UseNavigateStable),t=C.useRef(!1);return HT(()=>{t.current=!0}),C.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,em({fromRouteId:e},i)))},[n,e])}const B2={};function q5(n,e,t){B2[n]||(B2[n]=!0)}function G5(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function H0(n){let{to:e,replace:t,state:s,relative:r}=n;Cf()||gt(!1);let{future:i,static:a}=C.useContext(Ja),{matches:l}=C.useContext($i),{pathname:c}=Bu(),u=_f(),d=BA(e,IA(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(h),{replace:t,state:s,relative:r}),[u,h,r,t,s]),null}function GT(n){return M5(n.context)}function es(n){gt(!1)}function X5(n){let{basename:e="/",children:t=null,location:s,navigationType:r=ml.Pop,navigator:i,static:a=!1,future:l}=n;Cf()&&gt(!1);let c=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:i,static:a,future:em({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=kf(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=s,v=C.useMemo(()=>{let A=vf(d,c);return A==null?null:{location:{pathname:A,search:h,hash:f,state:m,key:y},navigationType:r}},[c,d,h,f,m,y,r]);return v==null?null:C.createElement(Ja.Provider,{value:u},C.createElement(Tw.Provider,{children:t,value:v}))}function Y5(n){let{children:e,location:t}=n;return L5(U1(e),t)}new Promise(()=>{});function U1(n,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(n,(s,r)=>{if(!C.isValidElement(s))return;let i=[...e,r];if(s.type===C.Fragment){t.push.apply(t,U1(s.props.children,i));return}s.type!==es&&gt(!1),!s.props.index||!s.props.children||gt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=U1(s.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kv(){return kv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},kv.apply(this,arguments)}function XT(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function K5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Q5(n,e){return n.button===0&&(!e||e==="_self")&&!K5(n)}function $1(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(r=>[t,r]):[[t,s]])},[]))}function Z5(n,e){let t=$1(n);return e&&e.forEach((s,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const J5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eF=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tF="6";try{window.__reactRouterVersion=tF}catch{}const nF=C.createContext({isTransitioning:!1}),sF="startTransition",U2=WM[sF];function rF(n){let{basename:e,children:t,future:s,window:r}=n,i=C.useRef();i.current==null&&(i.current=s5({window:r,v5Compat:!0}));let a=i.current,[l,c]=C.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},d=C.useCallback(h=>{u&&U2?U2(()=>c(h)):c(h)},[c,u]);return C.useLayoutEffect(()=>a.listen(d),[a,d]),C.useEffect(()=>G5(s),[s]),C.createElement(X5,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:s})}const iF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mn=C.forwardRef(function(e,t){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=XT(e,J5),{basename:m}=C.useContext(Ja),y,v=!1;if(typeof u=="string"&&aF.test(u)&&(y=u,iF))try{let b=new URL(window.location.href),k=u.startsWith("//")?new URL(b.protocol+u):new URL(u),_=vf(k.pathname,m);k.origin===b.origin&&_!=null?u=_+k.search+k.hash:v=!0}catch{}let A=P5(u,{relative:r}),w=cF(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function x(b){s&&s(b),b.defaultPrevented||w(b)}return C.createElement("a",kv({},f,{href:y||A,onClick:v||i?s:x,ref:t,target:c}))}),oF=C.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,h=XT(e,eF),f=Pw(c,{relative:h.relative}),m=Bu(),y=C.useContext($T),{navigator:v,basename:A}=C.useContext(Ja),w=y!=null&&dF(f)&&u===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=m.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(b=b.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&A&&(k=vf(k,A)||k);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let T=b===x||!a&&b.startsWith(x)&&b.charAt(_)==="/",N=k!=null&&(k===x||!a&&k.startsWith(x)&&k.charAt(x.length)==="/"),M={isActive:T,isPending:N,isTransitioning:w},F=T?s:void 0,D;typeof i=="function"?D=i(M):D=[i,T?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(M):l;return C.createElement(mn,kv({},h,{"aria-current":F,className:D,ref:t,style:j,to:c,viewTransition:u}),typeof d=="function"?d(M):d)});var z1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(z1||(z1={}));var $2;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})($2||($2={}));function lF(n){let e=C.useContext(_w);return e||gt(!1),e}function cF(n,e){let{target:t,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=_f(),u=Bu(),d=Pw(n,{relative:a});return C.useCallback(h=>{if(Q5(h,t)){h.preventDefault();let f=s!==void 0?s:Ev(u)===Ev(d);c(n,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,s,r,t,n,i,a,l])}function uF(n){let e=C.useRef($1(n)),t=C.useRef(!1),s=Bu(),r=C.useMemo(()=>Z5(s.search,t.current?null:e.current),[s.search]),i=_f(),a=C.useCallback((l,c)=>{const u=$1(typeof l=="function"?l(r):l);t.current=!0,i("?"+u,c)},[i,r]);return[r,a]}function dF(n,e){e===void 0&&(e={});let t=C.useContext(nF);t==null&&gt(!1);let{basename:s}=lF(z1.useViewTransitionState),r=Pw(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=vf(t.currentLocation.pathname,s)||t.currentLocation.pathname,a=vf(t.nextLocation.pathname,s)||t.nextLocation.pathname;return B1(r.pathname,a)!=null||B1(r.pathname,i)!=null}var Tf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hF={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},fo,zS,fC,fF=(fC=class{constructor(){S(this,fo,hF);S(this,zS,!1)}setTimeoutProvider(n){g(this,fo,n)}setTimeout(n,e){return o(this,fo).setTimeout(n,e)}clearTimeout(n){o(this,fo).clearTimeout(n)}setInterval(n,e){return o(this,fo).setInterval(n,e)}clearInterval(n){o(this,fo).clearInterval(n)}},fo=new WeakMap,zS=new WeakMap,fC),Yl=new fF;function pF(n){setTimeout(n,0)}var Ru=typeof window>"u"||"Deno"in globalThis;function Gn(){}function mF(n,e){return typeof n=="function"?n(e):n}function H1(n){return typeof n=="number"&&n>=0&&n!==1/0}function YT(n,e){return Math.max(n+(e||0)-Date.now(),0)}function kl(n,e){return typeof n=="function"?n(e):n}function gr(n,e){return typeof n=="function"?n(e):n}function z2(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:l}=n;if(a){if(s){if(e.queryHash!==UA(a,e.options))return!1}else if(!tm(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function H2(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Mu(e.options.mutationKey)!==Mu(i))return!1}else if(!tm(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function UA(n,e){return((e==null?void 0:e.queryKeyHashFn)||Mu)(n)}function Mu(n){return JSON.stringify(n,(e,t)=>V1(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function tm(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>tm(n[t],e[t])):!1}var gF=Object.prototype.hasOwnProperty;function KT(n,e){if(n===e)return n;const t=V2(n)&&V2(e);if(!t&&!(V1(n)&&V1(e)))return e;const r=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),a=i.length,l=t?new Array(a):{};let c=0;for(let u=0;u<a;u++){const d=t?u:i[u],h=n[d],f=e[d];if(h===f){l[d]=h,(t?u<r:gF.call(n,d))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[d]=f;continue}const m=KT(h,f);l[d]=m,m===h&&c++}return r===a&&c===r?n:l}function Cv(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function V2(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function V1(n){if(!W2(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!W2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function W2(n){return Object.prototype.toString.call(n)==="[object Object]"}function yF(n){return new Promise(e=>{Yl.setTimeout(e,n)})}function W1(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?KT(n,e):e}function vF(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function wF(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var $A=Symbol();function QT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===$A?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function ZT(n,e){return typeof n=="function"?n(...e):!!n}var Jl,po,_d,pC,xF=(pC=class extends Tf{constructor(){super();S(this,Jl);S(this,po);S(this,_d);g(this,_d,e=>{if(!Ru&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){o(this,po)||this.setEventListener(o(this,_d))}onUnsubscribe(){var e;this.hasListeners()||((e=o(this,po))==null||e.call(this),g(this,po,void 0))}setEventListener(e){var t;g(this,_d,e),(t=o(this,po))==null||t.call(this),g(this,po,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){o(this,Jl)!==e&&(g(this,Jl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof o(this,Jl)=="boolean"?o(this,Jl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Jl=new WeakMap,po=new WeakMap,_d=new WeakMap,pC),zA=new xF;function q1(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}var bF=pF;function SF(){let n=[],e=0,t=l=>{l()},s=l=>{l()},r=bF;const i=l=>{e?n.push(l):r(()=>{t(l)})},a=()=>{const l=n;n=[],l.length&&r(()=>{s(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{r=l}}}var Wt=SF(),Td,mo,Pd,mC,AF=(mC=class extends Tf{constructor(){super();S(this,Td,!0);S(this,mo);S(this,Pd);g(this,Pd,e=>{if(!Ru&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){o(this,mo)||this.setEventListener(o(this,Pd))}onUnsubscribe(){var e;this.hasListeners()||((e=o(this,mo))==null||e.call(this),g(this,mo,void 0))}setEventListener(e){var t;g(this,Pd,e),(t=o(this,mo))==null||t.call(this),g(this,mo,e(this.setOnline.bind(this)))}setOnline(e){o(this,Td)!==e&&(g(this,Td,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return o(this,Td)}},Td=new WeakMap,mo=new WeakMap,Pd=new WeakMap,mC),_v=new AF;function EF(n){return Math.min(1e3*2**n,3e4)}function JT(n){return(n??"online")==="online"?_v.isOnline():!0}var G1=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function eP(n){let e=!1,t=0,s;const r=q1(),i=()=>r.status!=="pending",a=v=>{var A;if(!i()){const w=new G1(v);f(w),(A=n.onCancel)==null||A.call(n,w)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>zA.isFocused()&&(n.networkMode==="always"||_v.isOnline())&&n.canRun(),d=()=>JT(n.networkMode)&&n.canRun(),h=v=>{i()||(s==null||s(),r.resolve(v))},f=v=>{i()||(s==null||s(),r.reject(v))},m=()=>new Promise(v=>{var A;s=w=>{(i()||u())&&v(w)},(A=n.onPause)==null||A.call(n)}).then(()=>{var v;s=void 0,i()||(v=n.onContinue)==null||v.call(n)}),y=()=>{if(i())return;let v;const A=t===0?n.initialPromise:void 0;try{v=A??n.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(h).catch(w=>{var T;if(i())return;const x=n.retry??(Ru?0:3),b=n.retryDelay??EF,k=typeof b=="function"?b(t,w):b,_=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,w);if(e||!_){f(w);return}t++,(T=n.onFail)==null||T.call(n,t,w),yF(k).then(()=>u()?void 0:m()).then(()=>{e?f(w):y()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(s==null||s(),r),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),r)}}var ec,gC,tP=(gC=class{constructor(){S(this,ec)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),H1(this.gcTime)&&g(this,ec,Yl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ru?1/0:5*60*1e3))}clearGcTimeout(){o(this,ec)&&(Yl.clearTimeout(o(this,ec)),g(this,ec,void 0))}},ec=new WeakMap,gC),tc,Nd,sr,nc,Qt,um,sc,Nr,Vi,yC,kF=(yC=class extends tP{constructor(e){super();S(this,Nr);S(this,tc);S(this,Nd);S(this,sr);S(this,nc);S(this,Qt);S(this,um);S(this,sc);g(this,sc,!1),g(this,um,e.defaultOptions),this.setOptions(e.options),this.observers=[],g(this,nc,e.client),g(this,sr,o(this,nc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,g(this,tc,G2(this.options)),this.state=e.state??o(this,tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=o(this,Qt))==null?void 0:e.promise}setOptions(e){if(this.options={...o(this,um),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=G2(this.options);t.data!==void 0&&(this.setState(q2(t.data,t.dataUpdatedAt)),g(this,tc,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&o(this,sr).remove(this)}setData(e,t){const s=W1(this.state.data,e,this.options);return E(this,Nr,Vi).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){E(this,Nr,Vi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=o(this,Qt))==null?void 0:s.promise;return(r=o(this,Qt))==null||r.cancel(e),t?t.then(Gn).catch(Gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(o(this,tc))}isActive(){return this.observers.some(e=>gr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$A||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>kl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!YT(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=o(this,Qt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=o(this,Qt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),o(this,sr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(o(this,Qt)&&(o(this,sc)?o(this,Qt).cancel({revert:!0}):o(this,Qt).cancelRetry()),this.scheduleGc()),o(this,sr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||E(this,Nr,Vi).call(this,{type:"invalidate"})}async fetch(e,t){var c,u,d,h,f,m,y,v,A,w,x,b;if(this.state.fetchStatus!=="idle"&&((c=o(this,Qt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(o(this,Qt))return o(this,Qt).continueRetry(),o(this,Qt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(_=>_.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,r=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(g(this,sc,!0),s.signal)})},i=()=>{const k=QT(this.options,t),T=(()=>{const N={client:o(this,nc),queryKey:this.queryKey,meta:this.meta};return r(N),N})();return g(this,sc,!1),this.options.persister?this.options.persister(k,T,this):k(T)},l=(()=>{const k={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:o(this,nc),state:this.state,fetchFn:i};return r(k),k})();(u=this.options.behavior)==null||u.onFetch(l,this),g(this,Nd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&E(this,Nr,Vi).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),g(this,Qt,eP({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof G1&&k.revert&&this.setState({...o(this,Nd),fetchStatus:"idle"}),s.abort()},onFail:(k,_)=>{E(this,Nr,Vi).call(this,{type:"failed",failureCount:k,error:_})},onPause:()=>{E(this,Nr,Vi).call(this,{type:"pause"})},onContinue:()=>{E(this,Nr,Vi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await o(this,Qt).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(m=(f=o(this,sr).config).onSuccess)==null||m.call(f,k,this),(v=(y=o(this,sr).config).onSettled)==null||v.call(y,k,this.state.error,this),k}catch(k){if(k instanceof G1){if(k.silent)return o(this,Qt).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw E(this,Nr,Vi).call(this,{type:"error",error:k}),(w=(A=o(this,sr).config).onError)==null||w.call(A,k,this),(b=(x=o(this,sr).config).onSettled)==null||b.call(x,this.state.data,k,this),k}finally{this.scheduleGc()}}},tc=new WeakMap,Nd=new WeakMap,sr=new WeakMap,nc=new WeakMap,Qt=new WeakMap,um=new WeakMap,sc=new WeakMap,Nr=new WeakSet,Vi=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...nP(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,...q2(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return g(this,Nd,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Wt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),o(this,sr).notify({query:this,type:"updated",action:e})})},yC);function nP(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function q2(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function G2(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ss,Ee,dm,In,rc,Rd,Zi,go,hm,Md,Dd,ic,ac,yo,Ld,Fe,np,X1,Y1,K1,Q1,Z1,J1,eb,sP,vC,CF=(vC=class extends Tf{constructor(e,t){super();S(this,Fe);S(this,ss);S(this,Ee);S(this,dm);S(this,In);S(this,rc);S(this,Rd);S(this,Zi);S(this,go);S(this,hm);S(this,Md);S(this,Dd);S(this,ic);S(this,ac);S(this,yo);S(this,Ld,new Set);this.options=t,g(this,ss,e),g(this,go,null),g(this,Zi,q1()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(o(this,Ee).addObserver(this),X2(o(this,Ee),this.options)?E(this,Fe,np).call(this):this.updateResult(),E(this,Fe,Q1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tb(o(this,Ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tb(o(this,Ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,E(this,Fe,Z1).call(this),E(this,Fe,J1).call(this),o(this,Ee).removeObserver(this)}setOptions(e){const t=this.options,s=o(this,Ee);if(this.options=o(this,ss).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,o(this,Ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");E(this,Fe,eb).call(this),o(this,Ee).setOptions(this.options),t._defaulted&&!Cv(this.options,t)&&o(this,ss).getQueryCache().notify({type:"observerOptionsUpdated",query:o(this,Ee),observer:this});const r=this.hasListeners();r&&Y2(o(this,Ee),s,this.options,t)&&E(this,Fe,np).call(this),this.updateResult(),r&&(o(this,Ee)!==s||gr(this.options.enabled,o(this,Ee))!==gr(t.enabled,o(this,Ee))||kl(this.options.staleTime,o(this,Ee))!==kl(t.staleTime,o(this,Ee)))&&E(this,Fe,X1).call(this);const i=E(this,Fe,Y1).call(this);r&&(o(this,Ee)!==s||gr(this.options.enabled,o(this,Ee))!==gr(t.enabled,o(this,Ee))||i!==o(this,yo))&&E(this,Fe,K1).call(this,i)}getOptimisticResult(e){const t=o(this,ss).getQueryCache().build(o(this,ss),e),s=this.createResult(t,e);return TF(this,s)&&(g(this,In,s),g(this,Rd,this.options),g(this,rc,o(this,Ee).state)),s}getCurrentResult(){return o(this,In)}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t==null||t(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&o(this,Zi).status==="pending"&&o(this,Zi).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){o(this,Ld).add(e)}getCurrentQuery(){return o(this,Ee)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=o(this,ss).defaultQueryOptions(e),s=o(this,ss).getQueryCache().build(o(this,ss),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return E(this,Fe,np).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),o(this,In)))}createResult(e,t){var F;const s=o(this,Ee),r=this.options,i=o(this,In),a=o(this,rc),l=o(this,Rd),u=e!==s?e.state:o(this,dm),{state:d}=e;let h={...d},f=!1,m;if(t._optimisticResults){const D=this.hasListeners(),j=!D&&X2(e,t),B=D&&Y2(e,s,t,r);(j||B)&&(h={...h,...nP(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:A}=h;m=h.data;let w=!1;if(t.placeholderData!==void 0&&m===void 0&&A==="pending"){let D;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(D=i.data,w=!0):D=typeof t.placeholderData=="function"?t.placeholderData((F=o(this,Dd))==null?void 0:F.state.data,o(this,Dd)):t.placeholderData,D!==void 0&&(A="success",m=W1(i==null?void 0:i.data,D,t),f=!0)}if(t.select&&m!==void 0&&!w)if(i&&m===(a==null?void 0:a.data)&&t.select===o(this,hm))m=o(this,Md);else try{g(this,hm,t.select),m=t.select(m),m=W1(i==null?void 0:i.data,m,t),g(this,Md,m),g(this,go,null)}catch(D){g(this,go,D)}o(this,go)&&(y=o(this,go),m=o(this,Md),v=Date.now(),A="error");const x=h.fetchStatus==="fetching",b=A==="pending",k=A==="error",_=b&&x,T=m!==void 0,M={status:A,fetchStatus:h.fetchStatus,isPending:b,isSuccess:A==="success",isError:k,isInitialLoading:_,isLoading:_,data:m,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:k&&!T,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&T,isStale:HA(e,t),refetch:this.refetch,promise:o(this,Zi),isEnabled:gr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=z=>{M.status==="error"?z.reject(M.error):M.data!==void 0&&z.resolve(M.data)},j=()=>{const z=g(this,Zi,M.promise=q1());D(z)},B=o(this,Zi);switch(B.status){case"pending":e.queryHash===s.queryHash&&D(B);break;case"fulfilled":(M.status==="error"||M.data!==B.value)&&j();break;case"rejected":(M.status!=="error"||M.error!==B.reason)&&j();break}}return M}updateResult(){const e=o(this,In),t=this.createResult(o(this,Ee),this.options);if(g(this,rc,o(this,Ee).state),g(this,Rd,this.options),o(this,rc).data!==void 0&&g(this,Dd,o(this,Ee)),Cv(t,e))return;g(this,In,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!o(this,Ld).size)return!0;const a=new Set(i??o(this,Ld));return this.options.throwOnError&&a.add("error"),Object.keys(o(this,In)).some(l=>{const c=l;return o(this,In)[c]!==e[c]&&a.has(c)})};E(this,Fe,sP).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&E(this,Fe,Q1).call(this)}},ss=new WeakMap,Ee=new WeakMap,dm=new WeakMap,In=new WeakMap,rc=new WeakMap,Rd=new WeakMap,Zi=new WeakMap,go=new WeakMap,hm=new WeakMap,Md=new WeakMap,Dd=new WeakMap,ic=new WeakMap,ac=new WeakMap,yo=new WeakMap,Ld=new WeakMap,Fe=new WeakSet,np=function(e){E(this,Fe,eb).call(this);let t=o(this,Ee).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Gn)),t},X1=function(){E(this,Fe,Z1).call(this);const e=kl(this.options.staleTime,o(this,Ee));if(Ru||o(this,In).isStale||!H1(e))return;const s=YT(o(this,In).dataUpdatedAt,e)+1;g(this,ic,Yl.setTimeout(()=>{o(this,In).isStale||this.updateResult()},s))},Y1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(o(this,Ee)):this.options.refetchInterval)??!1},K1=function(e){E(this,Fe,J1).call(this),g(this,yo,e),!(Ru||gr(this.options.enabled,o(this,Ee))===!1||!H1(o(this,yo))||o(this,yo)===0)&&g(this,ac,Yl.setInterval(()=>{(this.options.refetchIntervalInBackground||zA.isFocused())&&E(this,Fe,np).call(this)},o(this,yo)))},Q1=function(){E(this,Fe,X1).call(this),E(this,Fe,K1).call(this,E(this,Fe,Y1).call(this))},Z1=function(){o(this,ic)&&(Yl.clearTimeout(o(this,ic)),g(this,ic,void 0))},J1=function(){o(this,ac)&&(Yl.clearInterval(o(this,ac)),g(this,ac,void 0))},eb=function(){const e=o(this,ss).getQueryCache().build(o(this,ss),this.options);if(e===o(this,Ee))return;const t=o(this,Ee);g(this,Ee,e),g(this,dm,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},sP=function(e){Wt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(o(this,In))}),o(this,ss).getQueryCache().notify({query:o(this,Ee),type:"observerResultsUpdated"})})},vC);function _F(n,e){return gr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function X2(n,e){return _F(n,e)||n.state.data!==void 0&&tb(n,e,e.refetchOnMount)}function tb(n,e,t){if(gr(e.enabled,n)!==!1&&kl(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&HA(n,e)}return!1}function Y2(n,e,t,s){return(n!==e||gr(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&HA(n,t)}function HA(n,e){return gr(e.enabled,n)!==!1&&n.isStaleByTime(kl(e.staleTime,n))}function TF(n,e){return!Cv(n.getCurrentResult(),e)}function K2(n){return{onFetch:(e,t)=>{var d,h,f,m,y;const s=e.options,r=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const A=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},w=QT(e.options,e.fetchOptions),x=async(b,k,_)=>{if(v)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:k,direction:_?"backward":"forward",meta:e.options.meta};return A(j),j})(),M=await w(N),{maxPages:F}=e.options,D=_?wF:vF;return{pages:D(b.pages,M,F),pageParams:D(b.pageParams,k,F)}};if(r&&i.length){const b=r==="backward",k=b?PF:Q2,_={pages:i,pageParams:a},T=k(s,_);l=await x(_,T,b)}else{const b=n??i.length;do{const k=c===0?a[0]??s.initialPageParam:Q2(s,l);if(c>0&&k==null)break;l=await x(l,k),c++}while(c<b)}return l};e.options.persister?e.fetchFn=()=>{var v,A;return(A=(v=e.options).persister)==null?void 0:A.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function Q2(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function PF(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var fm,li,Bn,oc,ci,so,wC,NF=(wC=class extends tP{constructor(e){super();S(this,ci);S(this,fm);S(this,li);S(this,Bn);S(this,oc);g(this,fm,e.client),this.mutationId=e.mutationId,g(this,Bn,e.mutationCache),g(this,li,[]),this.state=e.state||rP(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){o(this,li).includes(e)||(o(this,li).push(e),this.clearGcTimeout(),o(this,Bn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){g(this,li,o(this,li).filter(t=>t!==e)),this.scheduleGc(),o(this,Bn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){o(this,li).length||(this.state.status==="pending"?this.scheduleGc():o(this,Bn).remove(this))}continue(){var e;return((e=o(this,oc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,c,u,d,h,f,m,y,v,A,w,x,b,k,_,T,N,M,F;const t=()=>{E(this,ci,so).call(this,{type:"continue"})},s={client:o(this,fm),meta:this.options.meta,mutationKey:this.options.mutationKey};g(this,oc,eP({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(D,j)=>{E(this,ci,so).call(this,{type:"failed",failureCount:D,error:j})},onPause:()=>{E(this,ci,so).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>o(this,Bn).canRun(this)}));const r=this.state.status==="pending",i=!o(this,oc).canStart();try{if(r)t();else{E(this,ci,so).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(a=o(this,Bn).config).onMutate)==null?void 0:l.call(a,e,this,s));const j=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,s));j!==this.state.context&&E(this,ci,so).call(this,{type:"pending",context:j,variables:e,isPaused:i})}const D=await o(this,oc).start();return await((h=(d=o(this,Bn).config).onSuccess)==null?void 0:h.call(d,D,e,this.state.context,this,s)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,D,e,this.state.context,s)),await((v=(y=o(this,Bn).config).onSettled)==null?void 0:v.call(y,D,null,this.state.variables,this.state.context,this,s)),await((w=(A=this.options).onSettled)==null?void 0:w.call(A,D,null,e,this.state.context,s)),E(this,ci,so).call(this,{type:"success",data:D}),D}catch(D){try{throw await((b=(x=o(this,Bn).config).onError)==null?void 0:b.call(x,D,e,this.state.context,this,s)),await((_=(k=this.options).onError)==null?void 0:_.call(k,D,e,this.state.context,s)),await((N=(T=o(this,Bn).config).onSettled)==null?void 0:N.call(T,void 0,D,this.state.variables,this.state.context,this,s)),await((F=(M=this.options).onSettled)==null?void 0:F.call(M,void 0,D,e,this.state.context,s)),D}finally{E(this,ci,so).call(this,{type:"error",error:D})}}finally{o(this,Bn).runNext(this)}}},fm=new WeakMap,li=new WeakMap,Bn=new WeakMap,oc=new WeakMap,ci=new WeakSet,so=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Wt.batch(()=>{o(this,li).forEach(s=>{s.onMutationUpdate(e)}),o(this,Bn).notify({mutation:this,type:"updated",action:e})})},wC);function rP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ji,Rr,pm,xC,RF=(xC=class extends Tf{constructor(e={}){super();S(this,Ji);S(this,Rr);S(this,pm);this.config=e,g(this,Ji,new Set),g(this,Rr,new Map),g(this,pm,0)}build(e,t,s){const r=new NF({client:e,mutationCache:this,mutationId:++xt(this,pm)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){o(this,Ji).add(e);const t=V0(e);if(typeof t=="string"){const s=o(this,Rr).get(t);s?s.push(e):o(this,Rr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(o(this,Ji).delete(e)){const t=V0(e);if(typeof t=="string"){const s=o(this,Rr).get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&o(this,Rr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=V0(e);if(typeof t=="string"){const s=o(this,Rr).get(t),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const t=V0(e);if(typeof t=="string"){const r=(s=o(this,Rr).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wt.batch(()=>{o(this,Ji).forEach(e=>{this.notify({type:"removed",mutation:e})}),o(this,Ji).clear(),o(this,Rr).clear()})}getAll(){return Array.from(o(this,Ji))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>H2(t,s))}findAll(e={}){return this.getAll().filter(t=>H2(e,t))}notify(e){Wt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Wt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Gn))))}},Ji=new WeakMap,Rr=new WeakMap,pm=new WeakMap,xC);function V0(n){var e;return(e=n.options.scope)==null?void 0:e.id}var ea,vo,rs,ta,Ua,my,nb,bC,MF=(bC=class extends Tf{constructor(t,s){super();S(this,Ua);S(this,ea);S(this,vo);S(this,rs);S(this,ta);g(this,ea,t),this.setOptions(s),this.bindMethods(),E(this,Ua,my).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=o(this,ea).defaultMutationOptions(t),Cv(this.options,s)||o(this,ea).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,rs),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Mu(s.mutationKey)!==Mu(this.options.mutationKey)?this.reset():((r=o(this,rs))==null?void 0:r.state.status)==="pending"&&o(this,rs).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,rs))==null||t.removeObserver(this)}onMutationUpdate(t){E(this,Ua,my).call(this),E(this,Ua,nb).call(this,t)}getCurrentResult(){return o(this,vo)}reset(){var t;(t=o(this,rs))==null||t.removeObserver(this),g(this,rs,void 0),E(this,Ua,my).call(this),E(this,Ua,nb).call(this)}mutate(t,s){var r;return g(this,ta,s),(r=o(this,rs))==null||r.removeObserver(this),g(this,rs,o(this,ea).getMutationCache().build(o(this,ea),this.options)),o(this,rs).addObserver(this),o(this,rs).execute(t)}},ea=new WeakMap,vo=new WeakMap,rs=new WeakMap,ta=new WeakMap,Ua=new WeakSet,my=function(){var s;const t=((s=o(this,rs))==null?void 0:s.state)??rP();g(this,vo,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},nb=function(t){Wt.batch(()=>{var s,r,i,a,l,c,u,d;if(o(this,ta)&&this.hasListeners()){const h=o(this,vo).variables,f=o(this,vo).context,m={client:o(this,ea),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((r=(s=o(this,ta)).onSuccess)==null||r.call(s,t.data,h,f,m),(a=(i=o(this,ta)).onSettled)==null||a.call(i,t.data,null,h,f,m)):(t==null?void 0:t.type)==="error"&&((c=(l=o(this,ta)).onError)==null||c.call(l,t.error,h,f,m),(d=(u=o(this,ta)).onSettled)==null||d.call(u,void 0,t.error,h,f,m))}this.listeners.forEach(h=>{h(o(this,vo))})})},bC),ui,SC,DF=(SC=class extends Tf{constructor(e={}){super();S(this,ui);this.config=e,g(this,ui,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??UA(r,t);let a=this.get(i);return a||(a=new kF({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){o(this,ui).has(e.queryHash)||(o(this,ui).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=o(this,ui).get(e.queryHash);t&&(e.destroy(),t===e&&o(this,ui).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return o(this,ui).get(e)}getAll(){return[...o(this,ui).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>z2(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>z2(e,s)):t}notify(e){Wt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ui=new WeakMap,SC),bt,wo,xo,Fd,Od,bo,jd,Id,AC,LF=(AC=class{constructor(n={}){S(this,bt);S(this,wo);S(this,xo);S(this,Fd);S(this,Od);S(this,bo);S(this,jd);S(this,Id);g(this,bt,n.queryCache||new DF),g(this,wo,n.mutationCache||new RF),g(this,xo,n.defaultOptions||{}),g(this,Fd,new Map),g(this,Od,new Map),g(this,bo,0)}mount(){xt(this,bo)._++,o(this,bo)===1&&(g(this,jd,zA.subscribe(async n=>{n&&(await this.resumePausedMutations(),o(this,bt).onFocus())})),g(this,Id,_v.subscribe(async n=>{n&&(await this.resumePausedMutations(),o(this,bt).onOnline())})))}unmount(){var n,e;xt(this,bo)._--,o(this,bo)===0&&((n=o(this,jd))==null||n.call(this),g(this,jd,void 0),(e=o(this,Id))==null||e.call(this),g(this,Id,void 0))}isFetching(n){return o(this,bt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return o(this,wo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=o(this,bt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=o(this,bt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(kl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return o(this,bt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=o(this,bt).get(s.queryHash),i=r==null?void 0:r.state.data,a=mF(e,i);if(a!==void 0)return o(this,bt).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Wt.batch(()=>o(this,bt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=o(this,bt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=o(this,bt);Wt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=o(this,bt);return Wt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=Wt.batch(()=>o(this,bt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(Gn).catch(Gn)}invalidateQueries(n,e={}){return Wt.batch(()=>(o(this,bt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=Wt.batch(()=>o(this,bt).findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(Gn)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Gn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=o(this,bt).build(this,e);return t.isStaleByTime(kl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Gn).catch(Gn)}fetchInfiniteQuery(n){return n.behavior=K2(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Gn).catch(Gn)}ensureInfiniteQueryData(n){return n.behavior=K2(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return _v.isOnline()?o(this,wo).resumePausedMutations():Promise.resolve()}getQueryCache(){return o(this,bt)}getMutationCache(){return o(this,wo)}getDefaultOptions(){return o(this,xo)}setDefaultOptions(n){g(this,xo,n)}setQueryDefaults(n,e){o(this,Fd).set(Mu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...o(this,Fd).values()],t={};return e.forEach(s=>{tm(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){o(this,Od).set(Mu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...o(this,Od).values()],t={};return e.forEach(s=>{tm(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...o(this,xo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=UA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$A&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...o(this,xo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){o(this,bt).clear(),o(this,wo).clear()}},bt=new WeakMap,wo=new WeakMap,xo=new WeakMap,Fd=new WeakMap,Od=new WeakMap,bo=new WeakMap,jd=new WeakMap,Id=new WeakMap,AC),iP=C.createContext(void 0),c0=n=>{const e=C.useContext(iP);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},FF=({client:n,children:e})=>(C.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),p.jsx(iP.Provider,{value:n,children:e})),aP=C.createContext(!1),OF=()=>C.useContext(aP);aP.Provider;function jF(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var IF=C.createContext(jF()),BF=()=>C.useContext(IF),UF=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},$F=n=>{C.useEffect(()=>{n.clearReset()},[n])},zF=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:r})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(r&&n.data===void 0||ZT(t,[n.error,s])),HF=n=>{if(n.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),s=n.staleTime;n.staleTime=typeof s=="function"?(...r)=>t(s(...r)):t(s),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},VF=(n,e)=>n.isLoading&&n.isFetching&&!e,WF=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,Z2=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function qF(n,e,t){var h,f,m,y,v;const s=OF(),r=BF(),i=c0(),a=i.defaultQueryOptions(n);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",HF(a),UF(a,r),$F(r);const l=!i.getQueryCache().get(a.queryHash),[c]=C.useState(()=>new e(i,a)),u=c.getOptimisticResult(a),d=!s&&n.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(A=>{const w=d?c.subscribe(Wt.batchCalls(A)):Gn;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),C.useEffect(()=>{c.setOptions(a)},[a,c]),WF(a,u))throw Z2(a,c,r);if(zF({result:u,errorResetBoundary:r,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((y=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||y.call(m,a,u),a.experimental_prefetchInRender&&!Ru&&VF(u,s)){const A=l?Z2(a,c,r):(v=i.getQueryCache().get(a.queryHash))==null?void 0:v.promise;A==null||A.catch(Gn).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function Xs(n,e){return qF(n,CF)}function Kl(n,e){const t=c0(),[s]=C.useState(()=>new MF(t,n));C.useEffect(()=>{s.setOptions(n)},[s,n]);const r=C.useSyncExternalStore(C.useCallback(a=>s.subscribe(Wt.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=C.useCallback((a,l)=>{s.mutate(a,l).catch(Gn)},[s]);if(r.error&&ZT(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}let GF={data:""},XF=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||GF},YF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,KF=/\/\*[^]*?\*\/|  +/g,J2=/\n+/g,co=(n,e)=>{let t="",s="",r="";for(let i in n){let a=n[i];i[0]=="@"?i[1]=="i"?t=i+" "+a+";":s+=i[1]=="f"?co(a,i):i+"{"+co(a,i[1]=="k"?"":e)+"}":typeof a=="object"?s+=co(a,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=co.p?co.p(i,a):i+":"+a+";")}return t+(e&&r?e+"{"+r+"}":r)+s},zi={},oP=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+oP(n[t]);return e}return n},QF=(n,e,t,s,r)=>{let i=oP(n),a=zi[i]||(zi[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!zi[a]){let c=i!==n?n:(u=>{let d,h,f=[{}];for(;d=YF.exec(u.replace(KF,""));)d[4]?f.shift():d[3]?(h=d[3].replace(J2," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(J2," ").trim();return f[0]})(n);zi[a]=co(r?{["@keyframes "+a]:c}:c,t?"":"."+a)}let l=t&&zi.g?zi.g:null;return t&&(zi.g=zi[a]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(zi[a],e,s,l),a},ZF=(n,e,t)=>n.reduce((s,r,i)=>{let a=e[i];if(a&&a.call){let l=a(t),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":co(l,""):l===!1?"":l}return s+r+(a??"")},"");function Nw(n){let e=this||{},t=n.call?n(e.p):n;return QF(t.unshift?t.raw?ZF(t,[].slice.call(arguments,1),e.p):t.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):t,XF(e.target),e.g,e.o,e.k)}let lP,sb,rb;Nw.bind({g:1});let Xa=Nw.bind({k:1});function JF(n,e,t,s){co.p=e,lP=n,sb=t,rb=s}function Ol(n,e){let t=this||{};return function(){let s=arguments;function r(i,a){let l=Object.assign({},i),c=l.className||r.className;t.p=Object.assign({theme:sb&&sb()},l),t.o=/ *go\d+/.test(c),l.className=Nw.apply(t,s)+(c?" "+c:"");let u=n;return n[0]&&(u=l.as||n,delete l.as),rb&&u[0]&&rb(l),lP(u,l)}return r}}var eO=n=>typeof n=="function",Tv=(n,e)=>eO(n)?n(e):n,tO=(()=>{let n=0;return()=>(++n).toString()})(),cP=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),nO=20,VA="default",uP=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:s}=e;return uP(n,{type:n.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=e;return{...n,toasts:n.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},gy=[],dP={toasts:[],pausedAt:void 0,settings:{toastLimit:nO}},Oi={},hP=(n,e=VA)=>{Oi[e]=uP(Oi[e]||dP,n),gy.forEach(([t,s])=>{t===e&&s(Oi[e])})},fP=n=>Object.keys(Oi).forEach(e=>hP(n,e)),sO=n=>Object.keys(Oi).find(e=>Oi[e].toasts.some(t=>t.id===n)),Rw=(n=VA)=>e=>{hP(e,n)},rO={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iO=(n={},e=VA)=>{let[t,s]=C.useState(Oi[e]||dP),r=C.useRef(Oi[e]);C.useEffect(()=>(r.current!==Oi[e]&&s(Oi[e]),gy.push([e,s]),()=>{let a=gy.findIndex(([l])=>l===e);a>-1&&gy.splice(a,1)}),[e]);let i=t.toasts.map(a=>{var l,c,u;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((l=n[a.type])==null?void 0:l.removeDelay)||(n==null?void 0:n.removeDelay),duration:a.duration||((c=n[a.type])==null?void 0:c.duration)||(n==null?void 0:n.duration)||rO[a.type],style:{...n.style,...(u=n[a.type])==null?void 0:u.style,...a.style}}});return{...t,toasts:i}},aO=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||tO()}),u0=n=>(e,t)=>{let s=aO(e,n,t);return Rw(s.toasterId||sO(s.id))({type:2,toast:s}),s.id},qt=(n,e)=>u0("blank")(n,e);qt.error=u0("error");qt.success=u0("success");qt.loading=u0("loading");qt.custom=u0("custom");qt.dismiss=(n,e)=>{let t={type:3,toastId:n};e?Rw(e)(t):fP(t)};qt.dismissAll=n=>qt.dismiss(void 0,n);qt.remove=(n,e)=>{let t={type:4,toastId:n};e?Rw(e)(t):fP(t)};qt.removeAll=n=>qt.remove(void 0,n);qt.promise=(n,e,t)=>{let s=qt.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let i=e.success?Tv(e.success,r):void 0;return i?qt.success(i,{id:s,...t,...t==null?void 0:t.success}):qt.dismiss(s),r}).catch(r=>{let i=e.error?Tv(e.error,r):void 0;i?qt.error(i,{id:s,...t,...t==null?void 0:t.error}):qt.dismiss(s)}),n};var oO=1e3,lO=(n,e="default")=>{let{toasts:t,pausedAt:s}=iO(n,e),r=C.useRef(new Map).current,i=C.useCallback((h,f=oO)=>{if(r.has(h))return;let m=setTimeout(()=>{r.delete(h),a({type:4,toastId:h})},f);r.set(h,m)},[]);C.useEffect(()=>{if(s)return;let h=Date.now(),f=t.map(m=>{if(m.duration===1/0)return;let y=(m.duration||0)+m.pauseDuration-(h-m.createdAt);if(y<0){m.visible&&qt.dismiss(m.id);return}return setTimeout(()=>qt.dismiss(m.id,e),y)});return()=>{f.forEach(m=>m&&clearTimeout(m))}},[t,s,e]);let a=C.useCallback(Rw(e),[e]),l=C.useCallback(()=>{a({type:5,time:Date.now()})},[a]),c=C.useCallback((h,f)=>{a({type:1,toast:{id:h,height:f}})},[a]),u=C.useCallback(()=>{s&&a({type:6,time:Date.now()})},[s,a]),d=C.useCallback((h,f)=>{let{reverseOrder:m=!1,gutter:y=8,defaultPosition:v}=f||{},A=t.filter(b=>(b.position||v)===(h.position||v)&&b.height),w=A.findIndex(b=>b.id===h.id),x=A.filter((b,k)=>k<w&&b.visible).length;return A.filter(b=>b.visible).slice(...m?[x+1]:[0,x]).reduce((b,k)=>b+(k.height||0)+y,0)},[t]);return C.useEffect(()=>{t.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=r.get(h.id);f&&(clearTimeout(f),r.delete(h.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},cO=Xa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,uO=Xa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dO=Xa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hO=Ol("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${uO} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dO} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fO=Xa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pO=Ol("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${fO} 1s linear infinite;
`,mO=Xa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gO=Xa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,yO=Ol("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gO} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vO=Ol("div")`
  position: absolute;
`,wO=Ol("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,xO=Xa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bO=Ol("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${xO} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SO=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?C.createElement(bO,null,e):e:t==="blank"?null:C.createElement(wO,null,C.createElement(pO,{...s}),t!=="loading"&&C.createElement(vO,null,t==="error"?C.createElement(hO,{...s}):C.createElement(yO,{...s})))},AO=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,EO=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,kO="0%{opacity:0;} 100%{opacity:1;}",CO="0%{opacity:1;} 100%{opacity:0;}",_O=Ol("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,TO=Ol("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,PO=(n,e)=>{let t=n.includes("top")?1:-1,[s,r]=cP()?[kO,CO]:[AO(t),EO(t)];return{animation:e?`${Xa(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Xa(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},NO=C.memo(({toast:n,position:e,style:t,children:s})=>{let r=n.height?PO(n.position||e||"top-center",n.visible):{opacity:0},i=C.createElement(SO,{toast:n}),a=C.createElement(TO,{...n.ariaProps},Tv(n.message,n));return C.createElement(_O,{className:n.className,style:{...r,...t,...n.style}},typeof s=="function"?s({icon:i,message:a}):C.createElement(C.Fragment,null,i,a))});JF(C.createElement);var RO=({id:n,className:e,style:t,onHeightUpdate:s,children:r})=>{let i=C.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;s(n,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return C.createElement("div",{ref:i,className:e,style:t},r)},MO=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},r=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:cP()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...r}},DO=Nw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,W0=16,LO=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:r,toasterId:i,containerStyle:a,containerClassName:l})=>{let{toasts:c,handlers:u}=lO(t,i);return C.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:W0,left:W0,right:W0,bottom:W0,pointerEvents:"none",...a},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let h=d.position||e,f=u.calculateOffset(d,{reverseOrder:n,gutter:s,defaultPosition:e}),m=MO(h,f);return C.createElement(RO,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?DO:"",style:m},d.type==="custom"?Tv(d.message,d):r?r(d):C.createElement(NO,{toast:d,position:h}))}))},Li=qt;const FO={},ek=n=>{let e;const t=new Set,s=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(y=>y(e,m))}},r=()=>e,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(FO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(s,r,c);return c},OO=n=>n?ek(n):ek;var pP={exports:{}},mP={},gP={exports:{}},yP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=C;function jO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var IO=typeof Object.is=="function"?Object.is:jO,BO=wf.useState,UO=wf.useEffect,$O=wf.useLayoutEffect,zO=wf.useDebugValue;function HO(n,e){var t=e(),s=BO({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return $O(function(){r.value=t,r.getSnapshot=e,Cx(r)&&i({inst:r})},[n,t,e]),UO(function(){return Cx(r)&&i({inst:r}),n(function(){Cx(r)&&i({inst:r})})},[n]),zO(t),t}function Cx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!IO(n,t)}catch{return!0}}function VO(n,e){return e()}var WO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VO:HO;yP.useSyncExternalStore=wf.useSyncExternalStore!==void 0?wf.useSyncExternalStore:WO;gP.exports=yP;var qO=gP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=C,GO=qO;function XO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var YO=typeof Object.is=="function"?Object.is:XO,KO=GO.useSyncExternalStore,QO=Mw.useRef,ZO=Mw.useEffect,JO=Mw.useMemo,e3=Mw.useDebugValue;mP.useSyncExternalStoreWithSelector=function(n,e,t,s,r){var i=QO(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=JO(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var y=a.value;if(r(y,m))return h=y}return h=m}if(y=h,YO(d,m))return y;var v=s(m);return r!==void 0&&r(y,v)?(d=m,y):(d=m,h=v)}var u=!1,d,h,f=t===void 0?null:t;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,t,s,r]);var l=KO(n,i[0],i[1]);return ZO(function(){a.hasValue=!0,a.value=l},[l]),e3(l),l};pP.exports=mP;var t3=pP.exports;const n3=kC(t3),vP={},{useDebugValue:s3}=Mn,{useSyncExternalStoreWithSelector:r3}=n3;let tk=!1;const i3=n=>n;function a3(n,e=i3,t){(vP?"production":void 0)!=="production"&&t&&!tk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tk=!0);const s=r3(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return s3(s),s}const nk=n=>{(vP?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?OO(n):n,t=(s,r)=>a3(e,s,r);return Object.assign(t,e),t},WA=n=>n?nk(n):nk,o3={};function l3(n,e){let t;try{t=n()}catch{return}return{getItem:r=>{var i;const a=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(r))!=null?i:null;return l instanceof Promise?l.then(a):a(l)},setItem:(r,i)=>t.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>t.removeItem(r)}}const nm=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return nm(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return nm(s)(t)}}}},c3=(n,e)=>(t,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,w)=>({...w,...A}),...e},a=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...A)},s,r);const d=nm(i.serialize),h=()=>{const A=i.partialize({...s()});let w;const x=d({state:A,version:i.version}).then(b=>u.setItem(i.name,b)).catch(b=>{w=b});if(w)throw w;return x},f=r.setState;r.setState=(A,w)=>{f(A,w),h()};const m=n((...A)=>{t(...A),h()},s,r);let y;const v=()=>{var A;if(!u)return;a=!1,l.forEach(x=>x(s()));const w=((A=i.onRehydrateStorage)==null?void 0:A.call(i,s()))||void 0;return nm(u.getItem.bind(u))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return y=i.merge(x,(b=s())!=null?b:m),t(y,!0),h()}).then(()=>{w==null||w(y,void 0),a=!0,c.forEach(x=>x(y))}).catch(x=>{w==null||w(void 0,x)})};return r.persist={setOptions:A=>{i={...i,...A},A.getStorage&&(u=A.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:A=>(l.add(A),()=>{l.delete(A)}),onFinishHydration:A=>(c.add(A),()=>{c.delete(A)})},v(),y||m},u3=(n,e)=>(t,s,r)=>{let i={storage:l3(()=>localStorage),partialize:v=>v,version:0,merge:(v,A)=>({...A,...v}),...e},a=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...v)},s,r);const d=()=>{const v=i.partialize({...s()});return u.setItem(i.name,{state:v,version:i.version})},h=r.setState;r.setState=(v,A)=>{h(v,A),d()};const f=n((...v)=>{t(...v),d()},s,r);r.getInitialState=()=>f;let m;const y=()=>{var v,A;if(!u)return;a=!1,l.forEach(x=>{var b;return x((b=s())!=null?b:f)});const w=((A=i.onRehydrateStorage)==null?void 0:A.call(i,(v=s())!=null?v:f))||void 0;return nm(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[k,_]=x;if(m=i.merge(_,(b=s())!=null?b:f),t(m,!0),k)return d()}).then(()=>{w==null||w(m,void 0),m=s(),a=!0,c.forEach(x=>x(m))}).catch(x=>{w==null||w(void 0,x)})};return r.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},i.skipHydration||y(),m||f},d3=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((o3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),c3(n,e)):u3(n,e),wP=d3,d0=WA()(wP(n=>({user:null,isAuthenticated:!1,isLoading:!0,setUser:e=>n({user:e,isAuthenticated:!!e,isLoading:!1}),setLoading:e=>n({isLoading:e}),login:(e,t,s)=>{localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",s),n({user:e,isAuthenticated:!0,isLoading:!1})},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),n({user:null,isAuthenticated:!1,isLoading:!1})}}),{name:"auth-storage",partialize:n=>({user:n.user,isAuthenticated:n.isAuthenticated})}));WA(n=>({patients:[],selectedPatient:null,setPatients:e=>n({patients:e}),setSelectedPatient:e=>n({selectedPatient:e}),addPatient:e=>n(t=>({patients:[...t.patients,e]})),updatePatient:e=>n(t=>{var s;return{patients:t.patients.map(r=>r.id===e.id?e:r),selectedPatient:((s=t.selectedPatient)==null?void 0:s.id)===e.id?e:t.selectedPatient}}),removePatient:e=>n(t=>{var s;return{patients:t.patients.filter(r=>r.id!==e),selectedPatient:((s=t.selectedPatient)==null?void 0:s.id)===e?null:t.selectedPatient}})}));const h3=WA()(wP(n=>({isDarkMode:!1,isSidebarOpen:!0,toggleDarkMode:()=>n(e=>{const t=!e.isDarkMode;return t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),{isDarkMode:t}}),toggleSidebar:()=>n(e=>({isSidebarOpen:!e.isSidebarOpen})),setSidebarOpen:e=>n({isSidebarOpen:e})}),{name:"ui-storage",onRehydrateStorage:()=>n=>{n!=null&&n.isDarkMode&&document.documentElement.classList.add("dark")}}));function xP(n,e){return function(){return n.apply(e,arguments)}}const{toString:f3}=Object.prototype,{getPrototypeOf:qA}=Object,{iterator:Dw,toStringTag:bP}=Symbol,Lw=(n=>e=>{const t=f3.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ei=n=>(n=n.toLowerCase(),e=>Lw(e)===n),Fw=n=>e=>typeof e===n,{isArray:Pf}=Array,xf=Fw("undefined");function h0(n){return n!==null&&!xf(n)&&n.constructor!==null&&!xf(n.constructor)&&ws(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const SP=ei("ArrayBuffer");function p3(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&SP(n.buffer),e}const m3=Fw("string"),ws=Fw("function"),AP=Fw("number"),f0=n=>n!==null&&typeof n=="object",g3=n=>n===!0||n===!1,yy=n=>{if(Lw(n)!=="object")return!1;const e=qA(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bP in n)&&!(Dw in n)},y3=n=>{if(!f0(n)||h0(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},v3=ei("Date"),w3=ei("File"),x3=ei("Blob"),b3=ei("FileList"),S3=n=>f0(n)&&ws(n.pipe),A3=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ws(n.append)&&((e=Lw(n))==="formdata"||e==="object"&&ws(n.toString)&&n.toString()==="[object FormData]"))},E3=ei("URLSearchParams"),[k3,C3,_3,T3]=["ReadableStream","Request","Response","Headers"].map(ei),P3=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function p0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),Pf(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{if(h0(n))return;const i=t?Object.getOwnPropertyNames(n):Object.keys(n),a=i.length;let l;for(s=0;s<a;s++)l=i[s],e.call(null,n[l],l,n)}}function EP(n,e){if(h0(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const Ql=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kP=n=>!xf(n)&&n!==Ql;function ib(){const{caseless:n,skipUndefined:e}=kP(this)&&this||{},t={},s=(r,i)=>{const a=n&&EP(t,i)||i;yy(t[a])&&yy(r)?t[a]=ib(t[a],r):yy(r)?t[a]=ib({},r):Pf(r)?t[a]=r.slice():(!e||!xf(r))&&(t[a]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&p0(arguments[r],s);return t}const N3=(n,e,t,{allOwnKeys:s}={})=>(p0(e,(r,i)=>{t&&ws(r)?n[i]=xP(r,t):n[i]=r},{allOwnKeys:s}),n),R3=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),M3=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},D3=(n,e,t,s)=>{let r,i,a;const l={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)a=r[i],(!s||s(a,n,e))&&!l[a]&&(e[a]=n[a],l[a]=!0);n=t!==!1&&qA(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},L3=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},F3=n=>{if(!n)return null;if(Pf(n))return n;let e=n.length;if(!AP(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},O3=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&qA(Uint8Array)),j3=(n,e)=>{const s=(n&&n[Dw]).call(n);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(n,i[0],i[1])}},I3=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},B3=ei("HTMLFormElement"),U3=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),sk=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),$3=ei("RegExp"),CP=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};p0(t,(r,i)=>{let a;(a=e(r,i,n))!==!1&&(s[i]=a||r)}),Object.defineProperties(n,s)},z3=n=>{CP(n,(e,t)=>{if(ws(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(ws(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},H3=(n,e)=>{const t={},s=r=>{r.forEach(i=>{t[i]=!0})};return Pf(n)?s(n):s(String(n).split(e)),t},V3=()=>{},W3=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function q3(n){return!!(n&&ws(n.append)&&n[bP]==="FormData"&&n[Dw])}const G3=n=>{const e=new Array(10),t=(s,r)=>{if(f0(s)){if(e.indexOf(s)>=0)return;if(h0(s))return s;if(!("toJSON"in s)){e[r]=s;const i=Pf(s)?[]:{};return p0(s,(a,l)=>{const c=t(a,r+1);!xf(c)&&(i[l]=c)}),e[r]=void 0,i}}return s};return t(n,0)},X3=ei("AsyncFunction"),Y3=n=>n&&(f0(n)||ws(n))&&ws(n.then)&&ws(n.catch),_P=((n,e)=>n?setImmediate:e?((t,s)=>(Ql.addEventListener("message",({source:r,data:i})=>{r===Ql&&i===t&&s.length&&s.shift()()},!1),r=>{s.push(r),Ql.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ws(Ql.postMessage)),K3=typeof queueMicrotask<"u"?queueMicrotask.bind(Ql):typeof process<"u"&&process.nextTick||_P,Q3=n=>n!=null&&ws(n[Dw]),O={isArray:Pf,isArrayBuffer:SP,isBuffer:h0,isFormData:A3,isArrayBufferView:p3,isString:m3,isNumber:AP,isBoolean:g3,isObject:f0,isPlainObject:yy,isEmptyObject:y3,isReadableStream:k3,isRequest:C3,isResponse:_3,isHeaders:T3,isUndefined:xf,isDate:v3,isFile:w3,isBlob:x3,isRegExp:$3,isFunction:ws,isStream:S3,isURLSearchParams:E3,isTypedArray:O3,isFileList:b3,forEach:p0,merge:ib,extend:N3,trim:P3,stripBOM:R3,inherits:M3,toFlatObject:D3,kindOf:Lw,kindOfTest:ei,endsWith:L3,toArray:F3,forEachEntry:j3,matchAll:I3,isHTMLForm:B3,hasOwnProperty:sk,hasOwnProp:sk,reduceDescriptors:CP,freezeMethods:z3,toObjectSet:H3,toCamelCase:U3,noop:V3,toFiniteNumber:W3,findKey:EP,global:Ql,isContextDefined:kP,isSpecCompliantForm:q3,toJSONObject:G3,isAsyncFn:X3,isThenable:Y3,setImmediate:_P,asap:K3,isIterable:Q3};function ve(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}O.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const TP=ve.prototype,PP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{PP[n]={value:n}});Object.defineProperties(ve,PP);Object.defineProperty(TP,"isAxiosError",{value:!0});ve.from=(n,e,t,s,r,i)=>{const a=Object.create(TP);O.toFlatObject(n,a,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=n&&n.message?n.message:"Error",c=e==null&&n?n.code:e;return ve.call(a,l,c,t,s,r),n&&a.cause==null&&Object.defineProperty(a,"cause",{value:n,configurable:!0}),a.name=n&&n.name||"Error",i&&Object.assign(a,i),a};const Z3=null;function ab(n){return O.isPlainObject(n)||O.isArray(n)}function NP(n){return O.endsWith(n,"[]")?n.slice(0,-2):n}function rk(n,e,t){return n?n.concat(e).map(function(r,i){return r=NP(r),!t&&i?"["+r+"]":r}).join(t?".":""):e}function J3(n){return O.isArray(n)&&!n.some(ab)}const ej=O.toFlatObject(O,{},null,function(e){return/^is[A-Z]/.test(e)});function Ow(n,e,t){if(!O.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=O.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,A){return!O.isUndefined(A[v])});const s=t.metaTokens,r=t.visitor||d,i=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(e);if(!O.isFunction(r))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(O.isDate(y))return y.toISOString();if(O.isBoolean(y))return y.toString();if(!c&&O.isBlob(y))throw new ve("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(y)||O.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,A){let w=y;if(y&&!A&&typeof y=="object"){if(O.endsWith(v,"{}"))v=s?v:v.slice(0,-2),y=JSON.stringify(y);else if(O.isArray(y)&&J3(y)||(O.isFileList(y)||O.endsWith(v,"[]"))&&(w=O.toArray(y)))return v=NP(v),w.forEach(function(b,k){!(O.isUndefined(b)||b===null)&&e.append(a===!0?rk([v],k,i):a===null?v:v+"[]",u(b))}),!1}return ab(y)?!0:(e.append(rk(A,v,i),u(y)),!1)}const h=[],f=Object.assign(ej,{defaultVisitor:d,convertValue:u,isVisitable:ab});function m(y,v){if(!O.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),O.forEach(y,function(w,x){(!(O.isUndefined(w)||w===null)&&r.call(e,w,O.isString(x)?x.trim():x,v,f))===!0&&m(w,v?v.concat(x):[x])}),h.pop()}}if(!O.isObject(n))throw new TypeError("data must be an object");return m(n),e}function ik(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function GA(n,e){this._pairs=[],n&&Ow(n,this,e)}const RP=GA.prototype;RP.append=function(e,t){this._pairs.push([e,t])};RP.toString=function(e){const t=e?function(s){return e.call(this,s,ik)}:ik;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function tj(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function MP(n,e,t){if(!e)return n;const s=t&&t.encode||tj;O.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let i;if(r?i=r(e,t):i=O.isURLSearchParams(e)?e.toString():new GA(e,t).toString(s),i){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class ak{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){O.forEach(this.handlers,function(s){s!==null&&e(s)})}}const DP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nj=typeof URLSearchParams<"u"?URLSearchParams:GA,sj=typeof FormData<"u"?FormData:null,rj=typeof Blob<"u"?Blob:null,ij={isBrowser:!0,classes:{URLSearchParams:nj,FormData:sj,Blob:rj},protocols:["http","https","file","blob","url","data"]},XA=typeof window<"u"&&typeof document<"u",ob=typeof navigator=="object"&&navigator||void 0,aj=XA&&(!ob||["ReactNative","NativeScript","NS"].indexOf(ob.product)<0),oj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lj=XA&&window.location.href||"http://localhost",cj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:XA,hasStandardBrowserEnv:aj,hasStandardBrowserWebWorkerEnv:oj,navigator:ob,origin:lj},Symbol.toStringTag,{value:"Module"})),Ln={...cj,...ij};function uj(n,e){return Ow(n,new Ln.classes.URLSearchParams,{visitor:function(t,s,r,i){return Ln.isNode&&O.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function dj(n){return O.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hj(n){const e={},t=Object.keys(n);let s;const r=t.length;let i;for(s=0;s<r;s++)i=t[s],e[i]=n[i];return e}function LP(n){function e(t,s,r,i){let a=t[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=t.length;return a=!a&&O.isArray(r)?r.length:a,c?(O.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!l):((!r[a]||!O.isObject(r[a]))&&(r[a]=[]),e(t,s,r[a],i)&&O.isArray(r[a])&&(r[a]=hj(r[a])),!l)}if(O.isFormData(n)&&O.isFunction(n.entries)){const t={};return O.forEachEntry(n,(s,r)=>{e(dj(s),r,t,0)}),t}return null}function fj(n,e,t){if(O.isString(n))try{return(e||JSON.parse)(n),O.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const m0={transitional:DP,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,i=O.isObject(e);if(i&&O.isHTMLForm(e)&&(e=new FormData(e)),O.isFormData(e))return r?JSON.stringify(LP(e)):e;if(O.isArrayBuffer(e)||O.isBuffer(e)||O.isStream(e)||O.isFile(e)||O.isBlob(e)||O.isReadableStream(e))return e;if(O.isArrayBufferView(e))return e.buffer;if(O.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return uj(e,this.formSerializer).toString();if((l=O.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ow(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),fj(e)):e}],transformResponse:[function(e){const t=this.transitional||m0.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(O.isResponse(e)||O.isReadableStream(e))return e;if(e&&O.isString(e)&&(s&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?ve.from(l,ve.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],n=>{m0.headers[n]={}});const pj=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mj=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!t||e[t]&&pj[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},ok=Symbol("internals");function Bf(n){return n&&String(n).trim().toLowerCase()}function vy(n){return n===!1||n==null?n:O.isArray(n)?n.map(vy):String(n)}function gj(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const yj=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function _x(n,e,t,s,r){if(O.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!O.isString(e)){if(O.isString(s))return e.indexOf(s)!==-1;if(O.isRegExp(s))return s.test(e)}}function vj(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function wj(n,e){const t=O.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,i,a){return this[s].call(this,e,r,i,a)},configurable:!0})})}let xs=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function i(l,c,u){const d=Bf(c);if(!d)throw new Error("header name must be a non-empty string");const h=O.findKey(r,d);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||c]=vy(l))}const a=(l,c)=>O.forEach(l,(u,d)=>i(u,d,c));if(O.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(O.isString(e)&&(e=e.trim())&&!yj(e))a(mj(e),t);else if(O.isObject(e)&&O.isIterable(e)){let l={},c,u;for(const d of e){if(!O.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?O.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(l,t)}else e!=null&&i(t,e,s);return this}get(e,t){if(e=Bf(e),e){const s=O.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return gj(r);if(O.isFunction(t))return t.call(this,r,s);if(O.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bf(e),e){const s=O.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||_x(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function i(a){if(a=Bf(a),a){const l=O.findKey(s,a);l&&(!t||_x(s,s[l],l,t))&&(delete s[l],r=!0)}}return O.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const i=t[s];(!e||_x(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,s={};return O.forEach(this,(r,i)=>{const a=O.findKey(s,i);if(a){t[a]=vy(r),delete t[i];return}const l=e?vj(i):String(i).trim();l!==i&&delete t[i],t[l]=vy(r),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return O.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&O.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[ok]=this[ok]={accessors:{}}).accessors,r=this.prototype;function i(a){const l=Bf(a);s[l]||(wj(r,a),s[l]=!0)}return O.isArray(e)?e.forEach(i):i(e),this}};xs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(xs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});O.freezeMethods(xs);function Tx(n,e){const t=this||m0,s=e||t,r=xs.from(s.headers);let i=s.data;return O.forEach(n,function(l){i=l.call(t,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function FP(n){return!!(n&&n.__CANCEL__)}function Nf(n,e,t){ve.call(this,n??"canceled",ve.ERR_CANCELED,e,t),this.name="CanceledError"}O.inherits(Nf,ve,{__CANCEL__:!0});function OP(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new ve("Request failed with status code "+t.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function xj(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function bj(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=s[i];a||(a=u),t[r]=c,s[r]=u;let h=i,f=0;for(;h!==r;)f+=t[h++],h=h%n;if(r=(r+1)%n,r===i&&(i=(i+1)%n),u-a<e)return;const m=d&&u-d;return m?Math.round(f*1e3/m):void 0}}function Sj(n,e){let t=0,s=1e3/e,r,i;const a=(u,d=Date.now())=>{t=d,r=null,i&&(clearTimeout(i),i=null),n(...u)};return[(...u)=>{const d=Date.now(),h=d-t;h>=s?a(u,d):(r=u,i||(i=setTimeout(()=>{i=null,a(r)},s-h)))},()=>r&&a(r)]}const Pv=(n,e,t=3)=>{let s=0;const r=bj(50,250);return Sj(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-s,u=r(c),d=a<=l;s=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(h)},t)},lk=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},ck=n=>(...e)=>O.asap(()=>n(...e)),Aj=Ln.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ln.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ln.origin),Ln.navigator&&/(msie|trident)/i.test(Ln.navigator.userAgent)):()=>!0,Ej=Ln.hasStandardBrowserEnv?{write(n,e,t,s,r,i,a){if(typeof document>"u")return;const l=[`${n}=${encodeURIComponent(e)}`];O.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),O.isString(s)&&l.push(`path=${s}`),O.isString(r)&&l.push(`domain=${r}`),i===!0&&l.push("secure"),O.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function kj(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Cj(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function jP(n,e,t){let s=!kj(e);return n&&(s||t==!1)?Cj(n,e):e}const uk=n=>n instanceof xs?{...n}:n;function Du(n,e){e=e||{};const t={};function s(u,d,h,f){return O.isPlainObject(u)&&O.isPlainObject(d)?O.merge.call({caseless:f},u,d):O.isPlainObject(d)?O.merge({},d):O.isArray(d)?d.slice():d}function r(u,d,h,f){if(O.isUndefined(d)){if(!O.isUndefined(u))return s(void 0,u,h,f)}else return s(u,d,h,f)}function i(u,d){if(!O.isUndefined(d))return s(void 0,d)}function a(u,d){if(O.isUndefined(d)){if(!O.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,h){if(h in e)return s(u,d);if(h in n)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,h)=>r(uk(u),uk(d),h,!0)};return O.forEach(Object.keys({...n,...e}),function(d){const h=c[d]||r,f=h(n[d],e[d],d);O.isUndefined(f)&&h!==l||(t[d]=f)}),t}const IP=n=>{const e=Du({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:l}=e;if(e.headers=a=xs.from(a),e.url=MP(jP(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),O.isFormData(t)){if(Ln.hasStandardBrowserEnv||Ln.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(O.isFunction(t.getHeaders)){const c=t.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&a.set(d,h)})}}if(Ln.hasStandardBrowserEnv&&(s&&O.isFunction(s)&&(s=s(e)),s||s!==!1&&Aj(e.url))){const c=r&&i&&Ej.read(i);c&&a.set(r,c)}return e},_j=typeof XMLHttpRequest<"u",Tj=_j&&function(n){return new Promise(function(t,s){const r=IP(n);let i=r.data;const a=xs.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,d,h,f,m,y;function v(){m&&m(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function w(){if(!A)return;const b=xs.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:b,config:n,request:A};OP(function(N){t(N),v()},function(N){s(N),v()},_),A=null}"onloadend"in A?A.onloadend=w:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(w)},A.onabort=function(){A&&(s(new ve("Request aborted",ve.ECONNABORTED,n,A)),A=null)},A.onerror=function(k){const _=k&&k.message?k.message:"Network Error",T=new ve(_,ve.ERR_NETWORK,n,A);T.event=k||null,s(T),A=null},A.ontimeout=function(){let k=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const _=r.transitional||DP;r.timeoutErrorMessage&&(k=r.timeoutErrorMessage),s(new ve(k,_.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,n,A)),A=null},i===void 0&&a.setContentType(null),"setRequestHeader"in A&&O.forEach(a.toJSON(),function(k,_){A.setRequestHeader(_,k)}),O.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),l&&l!=="json"&&(A.responseType=r.responseType),u&&([f,y]=Pv(u,!0),A.addEventListener("progress",f)),c&&A.upload&&([h,m]=Pv(c),A.upload.addEventListener("progress",h),A.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(d=b=>{A&&(s(!b||b.type?new Nf(null,n,A):b),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const x=xj(r.url);if(x&&Ln.protocols.indexOf(x)===-1){s(new ve("Unsupported protocol "+x+":",ve.ERR_BAD_REQUEST,n));return}A.send(i||null)})},Pj=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof ve?d:new Nf(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new ve(`timeout ${e} of ms exceeded`,ve.ETIMEDOUT))},e);const l=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),n=null)};n.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>O.asap(l),c}},Nj=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},Rj=async function*(n,e){for await(const t of Mj(n))yield*Nj(t,e)},Mj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},dk=(n,e,t,s)=>{const r=Rj(n,e);let i=0,a,l=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){l(),c.close();return}let h=d.byteLength;if(t){let f=i+=h;t(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},hk=64*1024,{isFunction:q0}=O,Dj=(({Request:n,Response:e})=>({Request:n,Response:e}))(O.global),{ReadableStream:fk,TextEncoder:pk}=O.global,mk=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Lj=n=>{n=O.merge.call({skipUndefined:!0},Dj,n);const{fetch:e,Request:t,Response:s}=n,r=e?q0(e):typeof fetch=="function",i=q0(t),a=q0(s);if(!r)return!1;const l=r&&q0(fk),c=r&&(typeof pk=="function"?(y=>v=>y.encode(v))(new pk):async y=>new Uint8Array(await new t(y).arrayBuffer())),u=i&&l&&mk(()=>{let y=!1;const v=new t(Ln.origin,{body:new fk,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!v}),d=a&&l&&mk(()=>O.isReadableStream(new s("").body)),h={stream:d&&(y=>y.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!h[y]&&(h[y]=(v,A)=>{let w=v&&v[y];if(w)return w.call(v);throw new ve(`Response type '${y}' is not supported`,ve.ERR_NOT_SUPPORT,A)})});const f=async y=>{if(y==null)return 0;if(O.isBlob(y))return y.size;if(O.isSpecCompliantForm(y))return(await new t(Ln.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(O.isArrayBufferView(y)||O.isArrayBuffer(y))return y.byteLength;if(O.isURLSearchParams(y)&&(y=y+""),O.isString(y))return(await c(y)).byteLength},m=async(y,v)=>{const A=O.toFiniteNumber(y.getContentLength());return A??f(v)};return async y=>{let{url:v,method:A,data:w,signal:x,cancelToken:b,timeout:k,onDownloadProgress:_,onUploadProgress:T,responseType:N,headers:M,withCredentials:F="same-origin",fetchOptions:D}=IP(y),j=e||fetch;N=N?(N+"").toLowerCase():"text";let B=Pj([x,b&&b.toAbortSignal()],k),z=null;const q=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let te;try{if(T&&u&&A!=="get"&&A!=="head"&&(te=await m(M,w))!==0){let ie=new t(v,{method:"POST",body:w,duplex:"half"}),Z;if(O.isFormData(w)&&(Z=ie.headers.get("content-type"))&&M.setContentType(Z),ie.body){const[ae,_e]=lk(te,Pv(ck(T)));w=dk(ie.body,hk,ae,_e)}}O.isString(F)||(F=F?"include":"omit");const V=i&&"credentials"in t.prototype,Y={...D,signal:B,method:A.toUpperCase(),headers:M.normalize().toJSON(),body:w,duplex:"half",credentials:V?F:void 0};z=i&&new t(v,Y);let P=await(i?j(z,D):j(v,Y));const U=d&&(N==="stream"||N==="response");if(d&&(_||U&&q)){const ie={};["status","statusText","headers"].forEach(Me=>{ie[Me]=P[Me]});const Z=O.toFiniteNumber(P.headers.get("content-length")),[ae,_e]=_&&lk(Z,Pv(ck(_),!0))||[];P=new s(dk(P.body,hk,ae,()=>{_e&&_e(),q&&q()}),ie)}N=N||"text";let $=await h[O.findKey(h,N)||"text"](P,y);return!U&&q&&q(),await new Promise((ie,Z)=>{OP(ie,Z,{data:$,headers:xs.from(P.headers),status:P.status,statusText:P.statusText,config:y,request:z})})}catch(V){throw q&&q(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,y,z),{cause:V.cause||V}):ve.from(V,V&&V.code,y,z)}}},Fj=new Map,BP=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:r}=e,i=[s,r,t];let a=i.length,l=a,c,u,d=Fj;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:Lj(e)),d=u;return u};BP();const YA={http:Z3,xhr:Tj,fetch:{get:BP}};O.forEach(YA,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const gk=n=>`- ${n}`,Oj=n=>O.isFunction(n)||n===null||n===!1;function jj(n,e){n=O.isArray(n)?n:[n];const{length:t}=n;let s,r;const i={};for(let a=0;a<t;a++){s=n[a];let l;if(r=s,!Oj(s)&&(r=YA[(l=String(s)).toLowerCase()],r===void 0))throw new ve(`Unknown adapter '${l}'`);if(r&&(O.isFunction(r)||(r=r.get(e))))break;i[l||"#"+a]=r}if(!r){const a=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(gk).join(`
`):" "+gk(a[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r}const UP={getAdapter:jj,adapters:YA};function Px(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Nf(null,n)}function yk(n){return Px(n),n.headers=xs.from(n.headers),n.data=Tx.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),UP.getAdapter(n.adapter||m0.adapter,n)(n).then(function(s){return Px(n),s.data=Tx.call(n,n.transformResponse,s),s.headers=xs.from(s.headers),s},function(s){return FP(s)||(Px(n),s&&s.response&&(s.response.data=Tx.call(n,n.transformResponse,s.response),s.response.headers=xs.from(s.response.headers))),Promise.reject(s)})}const $P="1.13.2",jw={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{jw[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const vk={};jw.transitional=function(e,t,s){function r(i,a){return"[Axios v"+$P+"] Transitional option '"+i+"'"+a+(s?". "+s:"")}return(i,a,l)=>{if(e===!1)throw new ve(r(a," has been removed"+(t?" in "+t:"")),ve.ERR_DEPRECATED);return t&&!vk[a]&&(vk[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,a,l):!0}};jw.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Ij(n,e,t){if(typeof n!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const i=s[r],a=e[i];if(a){const l=n[i],c=l===void 0||a(l,i,n);if(c!==!0)throw new ve("option "+i+" must be "+c,ve.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ve("Unknown option "+i,ve.ERR_BAD_OPTION)}}const wy={assertOptions:Ij,validators:jw},ni=wy.validators;let ku=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ak,response:new ak}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Du(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:i}=t;s!==void 0&&wy.assertOptions(s,{silentJSONParsing:ni.transitional(ni.boolean),forcedJSONParsing:ni.transitional(ni.boolean),clarifyTimeoutError:ni.transitional(ni.boolean)},!1),r!=null&&(O.isFunction(r)?t.paramsSerializer={serialize:r}:wy.assertOptions(r,{encode:ni.function,serialize:ni.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),wy.assertOptions(t,{baseUrl:ni.spelling("baseURL"),withXsrfToken:ni.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&O.merge(i.common,i[t.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),t.headers=xs.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(c=c&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,h=0,f;if(!c){const y=[yk.bind(this),void 0];for(y.unshift(...l),y.push(...u),f=y.length,d=Promise.resolve(t);h<f;)d=d.then(y[h++],y[h++]);return d}f=l.length;let m=t;for(;h<f;){const y=l[h++],v=l[h++];try{m=y(m)}catch(A){v.call(this,A);break}}try{d=yk.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Du(this.defaults,e);const t=jP(e.baseURL,e.url,e.allowAbsoluteUrls);return MP(t,e.params,e.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(e){ku.prototype[e]=function(t,s){return this.request(Du(s||{},{method:e,url:t,data:(s||{}).data}))}});O.forEach(["post","put","patch"],function(e){function t(s){return function(i,a,l){return this.request(Du(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}ku.prototype[e]=t(),ku.prototype[e+"Form"]=t(!0)});let Bj=class zP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(l=>{s.subscribe(l),i=l}).then(r);return a.cancel=function(){s.unsubscribe(i)},a},e(function(i,a,l){s.reason||(s.reason=new Nf(i,a,l),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new zP(function(r){e=r}),cancel:e}}};function Uj(n){return function(t){return n.apply(null,t)}}function $j(n){return O.isObject(n)&&n.isAxiosError===!0}const lb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(lb).forEach(([n,e])=>{lb[e]=n});function HP(n){const e=new ku(n),t=xP(ku.prototype.request,e);return O.extend(t,ku.prototype,e,{allOwnKeys:!0}),O.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return HP(Du(n,r))},t}const st=HP(m0);st.Axios=ku;st.CanceledError=Nf;st.CancelToken=Bj;st.isCancel=FP;st.VERSION=$P;st.toFormData=Ow;st.AxiosError=ve;st.Cancel=st.CanceledError;st.all=function(e){return Promise.all(e)};st.spread=Uj;st.isAxiosError=$j;st.mergeConfig=Du;st.AxiosHeaders=xs;st.formToJSON=n=>LP(O.isHTMLForm(n)?new FormData(n):n);st.getAdapter=UP.getAdapter;st.HttpStatusCode=lb;st.default=st;const{Axios:l8,AxiosError:c8,CanceledError:u8,isCancel:d8,CancelToken:h8,VERSION:f8,all:p8,Cancel:m8,isAxiosError:g8,spread:y8,toFormData:v8,AxiosHeaders:w8,HttpStatusCode:x8,formToJSON:b8,getAdapter:S8,mergeConfig:A8}=st,KA=()=>{const n=localStorage.getItem("backend_url");if(n){if(!n.endsWith("/api/v1")){const e=n.replace(/\/api(\/v\d+)?$/,"").replace(/\/+$/,"")+"/api/v1";return localStorage.setItem("backend_url",e),e}return n}return"http://localhost:8000/api/v1"},zj=()=>localStorage.getItem("backend_url_configured")==="true",VP=n=>{let e=n.replace(/\/+$/,"");e.endsWith("/api/v1")||(e=e.replace(/\/api(\/v\d+)?$/,"")+"/api/v1"),localStorage.setItem("backend_url",e),localStorage.setItem("backend_url_configured","true"),Le.defaults.baseURL=e},Hj=()=>KA(),Vj=()=>{localStorage.setItem("backend_url_configured","true")},Wj=()=>{localStorage.removeItem("backend_url"),localStorage.removeItem("backend_url_configured"),Le.defaults.baseURL="http://localhost:8000/api/v1"},Le=st.create({baseURL:KA(),headers:{"Content-Type":"application/json"}});Le.interceptors.request.use(n=>{const e=localStorage.getItem("access_token");return e&&n.headers&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));Le.interceptors.response.use(n=>n,async n=>{var t;const e=n.config;if(((t=n.response)==null?void 0:t.status)===401&&!e._retry){e._retry=!0;const s=localStorage.getItem("refresh_token");if(s)try{const r=await st.post(`${KA()}/auth/refresh`,{refresh_token:s}),{access_token:i,refresh_token:a}=r.data;return localStorage.setItem("access_token",i),localStorage.setItem("refresh_token",a),e.headers&&(e.headers.Authorization=`Bearer ${i}`),Le(e)}catch(r){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(r)}}return Promise.reject(n)});const bf={register:async n=>(await Le.post("/auth/register",n)).data,login:async n=>(await Le.post("/auth/login",n)).data,googleLogin:async n=>(await Le.post("/auth/google",{token:n})).data,refresh:async n=>(await Le.post("/auth/refresh",{refresh_token:n})).data,getMe:async()=>(await Le.get("/auth/me")).data},Cl={list:async()=>(await Le.get("/patients")).data,get:async n=>(await Le.get(`/patients/${n}`)).data,create:async n=>(await Le.post("/patients",n)).data,update:async(n,e)=>(await Le.put(`/patients/${n}`,e)).data,delete:async n=>{await Le.delete(`/patients/${n}`)}},_l={list:async n=>(await Le.get("/documents",{params:n})).data,get:async n=>(await Le.get(`/documents/${n}`)).data,upload:async n=>{const e=new FormData;return e.append("file",n.file),e.append("patient_id",n.patientId.toString()),e.append("document_type",n.documentType),n.displayName&&e.append("display_name",n.displayName),e.append("generate_display_name",String(n.generateDisplayName||!1)),(await Le.post("/documents/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data},getFileUrl:n=>{const e=localStorage.getItem("access_token");return`${Le.defaults.baseURL}/documents/${n}/file?token=${e}`},delete:async n=>{await Le.delete(`/documents/${n}`)}},WP={list:async n=>(await Le.get("/prescriptions",{params:n})).data,get:async n=>(await Le.get(`/prescriptions/${n}`)).data,update:async(n,e)=>(await Le.put(`/prescriptions/${n}`,e)).data,searchMedicines:async(n,e)=>{const t={query:n};return e&&(t.patient_id=e),(await Le.get("/prescriptions/search/medicines",{params:t})).data}},Hu={get:async()=>(await Le.get("/settings")).data,updateProfile:async n=>(await Le.put("/settings/profile",n)).data,updateApiKey:async n=>(await Le.put("/settings/api-key",{api_key:n})).data,deleteApiKey:async()=>{await Le.delete("/settings/api-key")},exportData:async()=>(await Le.post("/settings/export")).data,deleteAccount:async n=>{await Le.delete("/settings/account",{data:{password:n}})}};function qj({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const qP=C.forwardRef(qj);function Gj({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const GP=C.forwardRef(Gj);function Xj({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Yj=C.forwardRef(Xj);function Kj({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Qj=C.forwardRef(Kj);function Zj({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const Jj=C.forwardRef(Zj);function eI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const tI=C.forwardRef(eI);function nI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const wk=C.forwardRef(nI);function sI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const rI=C.forwardRef(sI);function iI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const XP=C.forwardRef(iI);function aI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const xk=C.forwardRef(aI);function oI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const QA=C.forwardRef(oI);function lI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const cI=C.forwardRef(lI);function uI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const ZA=C.forwardRef(uI);function dI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const hI=C.forwardRef(dI);function fI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const pI=C.forwardRef(fI);function mI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const gI=C.forwardRef(mI);function yI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Qr=C.forwardRef(yI);function vI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const wI=C.forwardRef(vI);function xI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const bk=C.forwardRef(xI);function bI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const SI=C.forwardRef(bI);function AI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Iw=C.forwardRef(AI);function EI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const kI=C.forwardRef(EI);function CI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const _I=C.forwardRef(CI);function TI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const PI=C.forwardRef(TI);function NI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6"}))}const RI=C.forwardRef(NI);function MI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"}))}const DI=C.forwardRef(MI);function LI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Dp=C.forwardRef(LI);function FI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const OI=C.forwardRef(FI);function jI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const II=C.forwardRef(jI);function BI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const cb=C.forwardRef(BI);function UI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const YP=C.forwardRef(UI);function $I({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const zI=C.forwardRef($I);function HI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const VI=C.forwardRef(HI);function WI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const qI=C.forwardRef(WI);function GI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const KP=C.forwardRef(GI);function XI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const YI=C.forwardRef(XI);function KI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ub=C.forwardRef(KI);function QI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const db=C.forwardRef(QI);function ZI({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const JI=C.forwardRef(ZI);function e4({title:n,titleId:e,...t},s){return C.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},t),n?C.createElement("title",{id:e},n):null,C.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const JA=C.forwardRef(e4),t4=({onConfigured:n})=>{const e="http://localhost:8000/api/v1",[t,s]=C.useState(e),[r,i]=C.useState(!1),[a,l]=C.useState("idle"),[c,u]=C.useState(""),d=async m=>{try{const y=m.replace(/\/+$/,"");return(await st.get(`${y}/health`,{timeout:5e3})).status===200}catch{try{const y=m.replace(/\/api\/v1\/?$/,"").replace(/\/+$/,"");return(await st.get(`${y}/health`,{timeout:5e3})).status===200}catch{return!1}}},h=async()=>{if(!t.trim()){u("Please enter a URL"),l("error");return}i(!0),l("idle"),u("");const m=t.trim().replace(/\/+$/,"");await d(m)?(l("success"),VP(m),setTimeout(()=>{n()},1e3)):(l("error"),u("Could not connect to the server. Please check the URL and try again.")),i(!1)},f=()=>{Vj(),n()};return p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mx-auto w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mb-4",children:p.jsx(YP,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"})}),p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Configure Backend Server"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2 text-sm",children:"Enter the URL of your Medical History API server. This app can be self-hosted."})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Backend API URL"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"url",value:t,onChange:m=>{s(m.target.value),l("idle"),u("")},placeholder:"http://localhost:8000/api/v1",className:"input w-full pr-10",disabled:r}),a==="success"&&p.jsx(QA,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"}),a==="error"&&p.jsx(JI,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-red-500"})]}),c&&p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c}),a==="success"&&p.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:" Connected successfully! Redirecting..."})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:h,disabled:r||!t.trim(),className:"btn btn-primary w-full",children:r?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Testing Connection..."]}):"Connect"}),p.jsxs("button",{onClick:f,disabled:r,className:"btn btn-secondary w-full",children:["Use Default (",e.replace("http://","").split("/")[0],")"]})]}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 text-center",children:"You can change this later in Settings. The URL will be stored locally in your browser."})]})})},n4=()=>p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-md",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary-600 text-white mb-4",children:p.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Medical History"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your family's health records"})]}),p.jsx(GT,{})]})}),s4=[{name:"Dashboard",href:"/dashboard",icon:_I},{name:"Patients",href:"/patients",icon:db},{name:"Documents",href:"/documents",icon:Qr},{name:"Medical Records",href:"/records",icon:ZA},{name:"Search",href:"/search",icon:Dp},{name:"Settings",href:"/settings",icon:gI}],r4=()=>{var d,h;const{user:n,logout:e}=d0(),{isDarkMode:t,toggleDarkMode:s,isSidebarOpen:r,toggleSidebar:i}=h3(),a=_f(),[l,c]=C.useState(!1),u=()=>{e(),a("/login")};return p.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[l&&p.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>c(!1)}),p.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ${r?"w-64":"w-20"} ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[p.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center",children:p.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r&&p.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"MedHistory"})]}),p.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>c(!1),children:p.jsx(JA,{className:"w-5 h-5 text-gray-500"})})]}),p.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:s4.map(f=>p.jsxs(oF,{to:f.href,className:({isActive:m})=>`flex items-center px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${m?"bg-primary-50 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"} ${r?"":"justify-center"}`,onClick:()=>c(!1),children:[p.jsx(f.icon,{className:`w-5 h-5 ${r?"mr-3":""}`}),r&&p.jsx("span",{children:f.name})]},f.name))}),p.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:p.jsxs("button",{onClick:u,className:`flex items-center w-full px-3 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 transition-colors ${r?"":"justify-center"}`,children:[p.jsx(Yj,{className:`w-5 h-5 ${r?"mr-3":""}`}),r&&p.jsx("span",{children:"Logout"})]})})]}),p.jsxs("div",{className:`transition-all duration-300 ${r?"lg:ml-64":"lg:ml-20"}`,children:[p.jsx("header",{className:"sticky top-0 z-30 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:p.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>c(!0),children:p.jsx(wk,{className:"w-5 h-5 text-gray-500"})}),p.jsx("button",{className:"hidden lg:flex p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",onClick:i,children:p.jsx(wk,{className:"w-5 h-5 text-gray-500"})})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:t?p.jsx(qI,{className:"w-5 h-5 text-gray-500"}):p.jsx(OI,{className:"w-5 h-5 text-gray-500"})}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-sm font-medium text-primary-700 dark:text-primary-300",children:((d=n==null?void 0:n.full_name)==null?void 0:d[0])||((h=n==null?void 0:n.email)==null?void 0:h[0])||"U"})}),p.jsx("div",{className:"hidden sm:block",children:p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(n==null?void 0:n.full_name)||(n==null?void 0:n.email)})})]})]})]})}),p.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:p.jsx(GT,{})})]})]})};var g0=n=>n.type==="checkbox",Zl=n=>n instanceof Date,fs=n=>n==null;const QP=n=>typeof n=="object";var It=n=>!fs(n)&&!Array.isArray(n)&&QP(n)&&!Zl(n),i4=n=>It(n)&&n.target?g0(n.target)?n.target.checked:n.target.value:n,a4=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,o4=(n,e)=>n.has(a4(e)),l4=n=>{const e=n.constructor&&n.constructor.prototype;return It(e)&&e.hasOwnProperty("isPrototypeOf")},eE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(n){let e;const t=Array.isArray(n),s=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(eE&&(n instanceof Blob||s))&&(t||It(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!l4(n))e=n;else for(const r in n)n.hasOwnProperty(r)&&(e[r]=Kt(n[r]));else return n;return e}var Bw=n=>/^\w*$/.test(n),Rt=n=>n===void 0,tE=n=>Array.isArray(n)?n.filter(Boolean):[],nE=n=>tE(n.replace(/["|']|\]/g,"").split(/\.|\[/)),le=(n,e,t)=>{if(!e||!It(n))return t;const s=(Bw(e)?[e]:nE(e)).reduce((r,i)=>fs(r)?r:r[i],n);return Rt(s)||s===n?Rt(n[e])?t:n[e]:s},oi=n=>typeof n=="boolean",lt=(n,e,t)=>{let s=-1;const r=Bw(e)?[e]:nE(e),i=r.length,a=i-1;for(;++s<i;){const l=r[s];let c=t;if(s!==a){const u=n[l];c=It(u)||Array.isArray(u)?u:isNaN(+r[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;n[l]=c,n=n[l]}};const Sk={BLUR:"blur",FOCUS_OUT:"focusout"},qr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Hi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},c4=Mn.createContext(null);c4.displayName="HookFormContext";var u4=(n,e,t,s=!0)=>{const r={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(r,i,{get:()=>{const a=i;return e._proxyFormState[a]!==qr.all&&(e._proxyFormState[a]=!s||qr.all),n[a]}});return r};const d4=typeof window<"u"?Mn.useLayoutEffect:Mn.useEffect;var Ws=n=>typeof n=="string",h4=(n,e,t,s,r)=>Ws(n)?(s&&e.watch.add(n),le(t,n,r)):Array.isArray(n)?n.map(i=>(s&&e.watch.add(i),le(t,i))):(s&&(e.watchAll=!0),t),hb=n=>fs(n)||!QP(n);function uo(n,e,t=new WeakSet){if(hb(n)||hb(e))return Object.is(n,e);if(Zl(n)&&Zl(e))return n.getTime()===e.getTime();const s=Object.keys(n),r=Object.keys(e);if(s.length!==r.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const i of s){const a=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Zl(a)&&Zl(l)||It(a)&&It(l)||Array.isArray(a)&&Array.isArray(l)?!uo(a,l,t):!Object.is(a,l))return!1}}return!0}var f4=(n,e,t,s,r)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[s]:r||!0}}:{},Lp=n=>Array.isArray(n)?n:[n],Ak=()=>{let n=[];return{get observers(){return n},next:r=>{for(const i of n)i.next&&i.next(r)},subscribe:r=>(n.push(r),{unsubscribe:()=>{n=n.filter(i=>i!==r)}}),unsubscribe:()=>{n=[]}}};function ZP(n,e){const t={};for(const s in n)if(n.hasOwnProperty(s)){const r=n[s],i=e[s];if(r&&It(r)&&i){const a=ZP(r,i);It(a)&&(t[s]=a)}else n[s]&&(t[s]=i)}return t}var Hn=n=>It(n)&&!Object.keys(n).length,sE=n=>n.type==="file",Gr=n=>typeof n=="function",Nv=n=>{if(!eE)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},JP=n=>n.type==="select-multiple",rE=n=>n.type==="radio",p4=n=>rE(n)||g0(n),Nx=n=>Nv(n)&&n.isConnected;function m4(n,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)n=Rt(n)?s++:n[e[s++]];return n}function g4(n){for(const e in n)if(n.hasOwnProperty(e)&&!Rt(n[e]))return!1;return!0}function Lt(n,e){const t=Array.isArray(e)?e:Bw(e)?[e]:nE(e),s=t.length===1?n:m4(n,t),r=t.length-1,i=t[r];return s&&delete s[i],r!==0&&(It(s)&&Hn(s)||Array.isArray(s)&&g4(s))&&Lt(n,t.slice(0,-1)),n}var y4=n=>{for(const e in n)if(Gr(n[e]))return!0;return!1};function eN(n){return Array.isArray(n)||It(n)&&!y4(n)}function fb(n,e={}){for(const t in n){const s=n[t];eN(s)?(e[t]=Array.isArray(s)?[]:{},fb(s,e[t])):Rt(s)||(e[t]=!0)}return e}function Gu(n,e,t){t||(t=fb(e));for(const s in n){const r=n[s];if(eN(r))Rt(e)||hb(t[s])?t[s]=fb(r,Array.isArray(r)?[]:{}):Gu(r,fs(e)?{}:e[s],t[s]);else{const i=e[s];t[s]=!uo(r,i)}}return t}const Ek={value:!1,isValid:!1},kk={value:!0,isValid:!0};var tN=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Rt(n[0].attributes.value)?Rt(n[0].value)||n[0].value===""?kk:{value:n[0].value,isValid:!0}:kk:Ek}return Ek},nN=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>Rt(n)?n:e?n===""?NaN:n&&+n:t&&Ws(n)?new Date(n):s?s(n):n;const Ck={isValid:!1,value:null};var sN=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ck):Ck;function _k(n){const e=n.ref;return sE(e)?e.files:rE(e)?sN(n.refs).value:JP(e)?[...e.selectedOptions].map(({value:t})=>t):g0(e)?tN(n.refs).value:nN(Rt(e.value)?n.ref.value:e.value,n)}var v4=(n,e,t,s)=>{const r={};for(const i of n){const a=le(e,i);a&&lt(r,i,a._f)}return{criteriaMode:t,names:[...n],fields:r,shouldUseNativeValidation:s}},Rv=n=>n instanceof RegExp,Uf=n=>Rt(n)?n:Rv(n)?n.source:It(n)?Rv(n.value)?n.value.source:n.value:n,Tk=n=>({isOnSubmit:!n||n===qr.onSubmit,isOnBlur:n===qr.onBlur,isOnChange:n===qr.onChange,isOnAll:n===qr.all,isOnTouch:n===qr.onTouched});const Pk="AsyncFunction";var w4=n=>!!n&&!!n.validate&&!!(Gr(n.validate)&&n.validate.constructor.name===Pk||It(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===Pk)),x4=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),Nk=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const Fp=(n,e,t,s)=>{for(const r of t||Object.keys(n)){const i=le(n,r);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],r)&&!s)return!0;if(a.ref&&e(a.ref,a.name)&&!s)return!0;if(Fp(l,e))break}else if(It(l)&&Fp(l,e))break}}};function Rk(n,e,t){const s=le(n,t);if(s||Bw(t))return{error:s,name:t};const r=t.split(".");for(;r.length;){const i=r.join("."),a=le(e,i),l=le(n,i);if(a&&!Array.isArray(a)&&t!==i)return{name:t};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};r.pop()}return{name:t}}var b4=(n,e,t,s)=>{t(n);const{name:r,...i}=n;return Hn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!s||qr.all))},S4=(n,e,t)=>!n||!e||n===e||Lp(n).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),A4=(n,e,t,s,r)=>r.isOnAll?!1:!t&&r.isOnTouch?!(e||n):(t?s.isOnBlur:r.isOnBlur)?!n:(t?s.isOnChange:r.isOnChange)?n:!0,E4=(n,e)=>!tE(le(n,e)).length&&Lt(n,e),k4=(n,e,t)=>{const s=Lp(le(n,t));return lt(s,"root",e[t]),lt(n,t,s),n};function Mk(n,e,t="validate"){if(Ws(n)||Array.isArray(n)&&n.every(Ws)||oi(n)&&!n)return{type:t,message:Ws(n)?n:"",ref:e}}var Vu=n=>It(n)&&!Rv(n)?n:{value:n,message:""},Dk=async(n,e,t,s,r,i)=>{const{ref:a,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:y,name:v,valueAsNumber:A,mount:w}=n._f,x=le(t,v);if(!w||e.has(v))return{};const b=l?l[0]:a,k=B=>{r&&b.reportValidity&&(b.setCustomValidity(oi(B)?"":B||""),b.reportValidity())},_={},T=rE(a),N=g0(a),M=T||N,F=(A||sE(a))&&Rt(a.value)&&Rt(x)||Nv(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,D=f4.bind(null,v,s,_),j=(B,z,q,te=Hi.maxLength,V=Hi.minLength)=>{const Y=B?z:q;_[v]={type:B?te:V,message:Y,ref:a,...D(B?te:V,Y)}};if(i?!Array.isArray(x)||!x.length:c&&(!M&&(F||fs(x))||oi(x)&&!x||N&&!tN(l).isValid||T&&!sN(l).isValid)){const{value:B,message:z}=Ws(c)?{value:!!c,message:c}:Vu(c);if(B&&(_[v]={type:Hi.required,message:z,ref:b,...D(Hi.required,z)},!s))return k(z),_}if(!F&&(!fs(h)||!fs(f))){let B,z;const q=Vu(f),te=Vu(h);if(!fs(x)&&!isNaN(x)){const V=a.valueAsNumber||x&&+x;fs(q.value)||(B=V>q.value),fs(te.value)||(z=V<te.value)}else{const V=a.valueAsDate||new Date(x),Y=$=>new Date(new Date().toDateString()+" "+$),P=a.type=="time",U=a.type=="week";Ws(q.value)&&x&&(B=P?Y(x)>Y(q.value):U?x>q.value:V>new Date(q.value)),Ws(te.value)&&x&&(z=P?Y(x)<Y(te.value):U?x<te.value:V<new Date(te.value))}if((B||z)&&(j(!!B,q.message,te.message,Hi.max,Hi.min),!s))return k(_[v].message),_}if((u||d)&&!F&&(Ws(x)||i&&Array.isArray(x))){const B=Vu(u),z=Vu(d),q=!fs(B.value)&&x.length>+B.value,te=!fs(z.value)&&x.length<+z.value;if((q||te)&&(j(q,B.message,z.message),!s))return k(_[v].message),_}if(m&&!F&&Ws(x)){const{value:B,message:z}=Vu(m);if(Rv(B)&&!x.match(B)&&(_[v]={type:Hi.pattern,message:z,ref:a,...D(Hi.pattern,z)},!s))return k(z),_}if(y){if(Gr(y)){const B=await y(x,t),z=Mk(B,b);if(z&&(_[v]={...z,...D(Hi.validate,z.message)},!s))return k(z.message),_}else if(It(y)){let B={};for(const z in y){if(!Hn(B)&&!s)break;const q=Mk(await y[z](x,t),b,z);q&&(B={...q,...D(z,q.message)},k(q.message),s&&(_[v]=B))}if(!Hn(B)&&(_[v]={ref:b,...B},!s))return _}}return k(!0),_};const C4={mode:qr.onSubmit,reValidateMode:qr.onChange,shouldFocusError:!0};function _4(n={}){let e={...C4,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Gr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},r=It(e.defaultValues)||It(e.values)?Kt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Kt(r),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:Ak(),state:Ak()},m=e.criteriaMode===qr.all,y=R=>L=>{clearTimeout(u),u=setTimeout(R,L)},v=async R=>{if(!e.disabled&&(d.isValid||h.isValid||R)){const L=e.resolver?Hn((await N()).errors):await F(s,!0);L!==t.isValid&&f.state.next({isValid:L})}},A=(R,L)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((R||Array.from(l.mount)).forEach(I=>{I&&(L?lt(t.validatingFields,I,L):Lt(t.validatingFields,I))}),f.state.next({validatingFields:t.validatingFields,isValidating:!Hn(t.validatingFields)}))},w=(R,L=[],I,J,K=!0,X=!0)=>{if(J&&I&&!e.disabled){if(a.action=!0,X&&Array.isArray(le(s,R))){const ue=I(le(s,R),J.argA,J.argB);K&&lt(s,R,ue)}if(X&&Array.isArray(le(t.errors,R))){const ue=I(le(t.errors,R),J.argA,J.argB);K&&lt(t.errors,R,ue),E4(t.errors,R)}if((d.touchedFields||h.touchedFields)&&X&&Array.isArray(le(t.touchedFields,R))){const ue=I(le(t.touchedFields,R),J.argA,J.argB);K&&lt(t.touchedFields,R,ue)}(d.dirtyFields||h.dirtyFields)&&(t.dirtyFields=Gu(r,i)),f.state.next({name:R,isDirty:j(R,L),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else lt(i,R,L)},x=(R,L)=>{lt(t.errors,R,L),f.state.next({errors:t.errors})},b=R=>{t.errors=R,f.state.next({errors:t.errors,isValid:!1})},k=(R,L,I,J)=>{const K=le(s,R);if(K){const X=le(i,R,Rt(I)?le(r,R):I);Rt(X)||J&&J.defaultChecked||L?lt(i,R,L?X:_k(K._f)):q(R,X),a.mount&&!a.action&&v()}},_=(R,L,I,J,K)=>{let X=!1,ue=!1;const je={name:R};if(!e.disabled){if(!I||J){(d.isDirty||h.isDirty)&&(ue=t.isDirty,t.isDirty=je.isDirty=j(),X=ue!==je.isDirty);const Ze=uo(le(r,R),L);ue=!!le(t.dirtyFields,R),Ze?Lt(t.dirtyFields,R):lt(t.dirtyFields,R,!0),je.dirtyFields=t.dirtyFields,X=X||(d.dirtyFields||h.dirtyFields)&&ue!==!Ze}if(I){const Ze=le(t.touchedFields,R);Ze||(lt(t.touchedFields,R,I),je.touchedFields=t.touchedFields,X=X||(d.touchedFields||h.touchedFields)&&Ze!==I)}X&&K&&f.state.next(je)}return X?je:{}},T=(R,L,I,J)=>{const K=le(t.errors,R),X=(d.isValid||h.isValid)&&oi(L)&&t.isValid!==L;if(e.delayError&&I?(c=y(()=>x(R,I)),c(e.delayError)):(clearTimeout(u),c=null,I?lt(t.errors,R,I):Lt(t.errors,R)),(I?!uo(K,I):K)||!Hn(J)||X){const ue={...J,...X&&oi(L)?{isValid:L}:{},errors:t.errors,name:R};t={...t,...ue},f.state.next(ue)}},N=async R=>{A(R,!0);const L=await e.resolver(i,e.context,v4(R||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return A(R),L},M=async R=>{const{errors:L}=await N(R);if(R)for(const I of R){const J=le(L,I);J?lt(t.errors,I,J):Lt(t.errors,I)}else t.errors=L;return L},F=async(R,L,I={valid:!0})=>{for(const J in R){const K=R[J];if(K){const{_f:X,...ue}=K;if(X){const je=l.array.has(X.name),Ze=K._f&&w4(K._f);Ze&&d.validatingFields&&A([X.name],!0);const er=await Dk(K,l.disabled,i,m,e.shouldUseNativeValidation&&!L,je);if(Ze&&d.validatingFields&&A([X.name]),er[X.name]&&(I.valid=!1,L))break;!L&&(le(er,X.name)?je?k4(t.errors,er,X.name):lt(t.errors,X.name,er[X.name]):Lt(t.errors,X.name))}!Hn(ue)&&await F(ue,L,I)}}return I.valid},D=()=>{for(const R of l.unMount){const L=le(s,R);L&&(L._f.refs?L._f.refs.every(I=>!Nx(I)):!Nx(L._f.ref))&&de(R)}l.unMount=new Set},j=(R,L)=>!e.disabled&&(R&&L&&lt(i,R,L),!uo($(),r)),B=(R,L,I)=>h4(R,l,{...a.mount?i:Rt(L)?r:Ws(R)?{[R]:L}:L},I,L),z=R=>tE(le(a.mount?i:r,R,e.shouldUnregister?le(r,R,[]):[])),q=(R,L,I={})=>{const J=le(s,R);let K=L;if(J){const X=J._f;X&&(!X.disabled&&lt(i,R,nN(L,X)),K=Nv(X.ref)&&fs(L)?"":L,JP(X.ref)?[...X.ref.options].forEach(ue=>ue.selected=K.includes(ue.value)):X.refs?g0(X.ref)?X.refs.forEach(ue=>{(!ue.defaultChecked||!ue.disabled)&&(Array.isArray(K)?ue.checked=!!K.find(je=>je===ue.value):ue.checked=K===ue.value||!!K)}):X.refs.forEach(ue=>ue.checked=ue.value===K):sE(X.ref)?X.ref.value="":(X.ref.value=K,X.ref.type||f.state.next({name:R,values:Kt(i)})))}(I.shouldDirty||I.shouldTouch)&&_(R,K,I.shouldTouch,I.shouldDirty,!0),I.shouldValidate&&U(R)},te=(R,L,I)=>{for(const J in L){if(!L.hasOwnProperty(J))return;const K=L[J],X=R+"."+J,ue=le(s,X);(l.array.has(R)||It(K)||ue&&!ue._f)&&!Zl(K)?te(X,K,I):q(X,K,I)}},V=(R,L,I={})=>{const J=le(s,R),K=l.array.has(R),X=Kt(L);lt(i,R,X),K?(f.array.next({name:R,values:Kt(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&I.shouldDirty&&f.state.next({name:R,dirtyFields:Gu(r,i),isDirty:j(R,X)})):J&&!J._f&&!fs(X)?te(R,X,I):q(R,X,I),Nk(R,l)&&f.state.next({...t,name:R}),f.state.next({name:a.mount?R:void 0,values:Kt(i)})},Y=async R=>{a.mount=!0;const L=R.target;let I=L.name,J=!0;const K=le(s,I),X=Ze=>{J=Number.isNaN(Ze)||Zl(Ze)&&isNaN(Ze.getTime())||uo(Ze,le(i,I,Ze))},ue=Tk(e.mode),je=Tk(e.reValidateMode);if(K){let Ze,er;const k0=L.type?_k(K._f):i4(R),eo=R.type===Sk.BLUR||R.type===Sk.FOCUS_OUT,EM=!x4(K._f)&&!e.resolver&&!le(t.errors,I)&&!K._f.deps||A4(eo,le(t.touchedFields,I),t.isSubmitted,je,ue),Kw=Nk(I,l,eo);lt(i,I,k0),eo?(!L||!L.readOnly)&&(K._f.onBlur&&K._f.onBlur(R),c&&c(0)):K._f.onChange&&K._f.onChange(R);const Qw=_(I,k0,eo),kM=!Hn(Qw)||Kw;if(!eo&&f.state.next({name:I,type:R.type,values:Kt(i)}),EM)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?eo&&v():eo||v()),kM&&f.state.next({name:I,...Kw?{}:Qw});if(!eo&&Kw&&f.state.next({...t}),e.resolver){const{errors:SE}=await N([I]);if(X(k0),J){const CM=Rk(t.errors,s,I),AE=Rk(SE,s,CM.name||I);Ze=AE.error,I=AE.name,er=Hn(SE)}}else A([I],!0),Ze=(await Dk(K,l.disabled,i,m,e.shouldUseNativeValidation))[I],A([I]),X(k0),J&&(Ze?er=!1:(d.isValid||h.isValid)&&(er=await F(s,!0)));J&&(K._f.deps&&(!Array.isArray(K._f.deps)||K._f.deps.length>0)&&U(K._f.deps),T(I,er,Ze,Qw))}},P=(R,L)=>{if(le(t.errors,L)&&R.focus)return R.focus(),1},U=async(R,L={})=>{let I,J;const K=Lp(R);if(e.resolver){const X=await M(Rt(R)?R:K);I=Hn(X),J=R?!K.some(ue=>le(X,ue)):I}else R?(J=(await Promise.all(K.map(async X=>{const ue=le(s,X);return await F(ue&&ue._f?{[X]:ue}:ue)}))).every(Boolean),!(!J&&!t.isValid)&&v()):J=I=await F(s);return f.state.next({...!Ws(R)||(d.isValid||h.isValid)&&I!==t.isValid?{}:{name:R},...e.resolver||!R?{isValid:I}:{},errors:t.errors}),L.shouldFocus&&!J&&Fp(s,P,R?K:l.mount),J},$=(R,L)=>{let I={...a.mount?i:r};return L&&(I=ZP(L.dirtyFields?t.dirtyFields:t.touchedFields,I)),Rt(R)?I:Ws(R)?le(I,R):R.map(J=>le(I,J))},ie=(R,L)=>({invalid:!!le((L||t).errors,R),isDirty:!!le((L||t).dirtyFields,R),error:le((L||t).errors,R),isValidating:!!le(t.validatingFields,R),isTouched:!!le((L||t).touchedFields,R)}),Z=R=>{R&&Lp(R).forEach(L=>Lt(t.errors,L)),f.state.next({errors:R?t.errors:{}})},ae=(R,L,I)=>{const J=(le(s,R,{_f:{}})._f||{}).ref,K=le(t.errors,R)||{},{ref:X,message:ue,type:je,...Ze}=K;lt(t.errors,R,{...Ze,...L,ref:J}),f.state.next({name:R,errors:t.errors,isValid:!1}),I&&I.shouldFocus&&J&&J.focus&&J.focus()},_e=(R,L)=>Gr(R)?f.state.subscribe({next:I=>"values"in I&&R(B(void 0,L),I)}):B(R,L,!0),Me=R=>f.state.subscribe({next:L=>{S4(R.name,L.name,R.exact)&&b4(L,R.formState||d,Xw,R.reRenderRoot)&&R.callback({values:{...i},...t,...L,defaultValues:r})}}).unsubscribe,G=R=>(a.mount=!0,h={...h,...R.formState},Me({...R,formState:h})),de=(R,L={})=>{for(const I of R?Lp(R):l.mount)l.mount.delete(I),l.array.delete(I),L.keepValue||(Lt(s,I),Lt(i,I)),!L.keepError&&Lt(t.errors,I),!L.keepDirty&&Lt(t.dirtyFields,I),!L.keepTouched&&Lt(t.touchedFields,I),!L.keepIsValidating&&Lt(t.validatingFields,I),!e.shouldUnregister&&!L.keepDefaultValue&&Lt(r,I);f.state.next({values:Kt(i)}),f.state.next({...t,...L.keepDirty?{isDirty:j()}:{}}),!L.keepIsValid&&v()},Yt=({disabled:R,name:L})=>{(oi(R)&&a.mount||R||l.disabled.has(L))&&(R?l.disabled.add(L):l.disabled.delete(L))},ce=(R,L={})=>{let I=le(s,R);const J=oi(L.disabled)||oi(e.disabled);return lt(s,R,{...I||{},_f:{...I&&I._f?I._f:{ref:{name:R}},name:R,mount:!0,...L}}),l.mount.add(R),I?Yt({disabled:oi(L.disabled)?L.disabled:e.disabled,name:R}):k(R,!0,L.value),{...J?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:Uf(L.min),max:Uf(L.max),minLength:Uf(L.minLength),maxLength:Uf(L.maxLength),pattern:Uf(L.pattern)}:{},name:R,onChange:Y,onBlur:Y,ref:K=>{if(K){ce(R,L),I=le(s,R);const X=Rt(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,ue=p4(X),je=I._f.refs||[];if(ue?je.find(Ze=>Ze===X):X===I._f.ref)return;lt(s,R,{_f:{...I._f,...ue?{refs:[...je.filter(Nx),X,...Array.isArray(le(r,R))?[{}]:[]],ref:{type:X.type,name:R}}:{ref:X}}}),k(R,!1,void 0,X)}else I=le(s,R,{}),I._f&&(I._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(o4(l.array,R)&&a.action)&&l.unMount.add(R)}}},wt=()=>e.shouldFocusError&&Fp(s,P,l.mount),De=R=>{oi(R)&&(f.state.next({disabled:R}),Fp(s,(L,I)=>{const J=le(s,I);J&&(L.disabled=J._f.disabled||R,Array.isArray(J._f.refs)&&J._f.refs.forEach(K=>{K.disabled=J._f.disabled||R}))},0,!1))},Jn=(R,L)=>async I=>{let J;I&&(I.preventDefault&&I.preventDefault(),I.persist&&I.persist());let K=Kt(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:X,values:ue}=await N();t.errors=X,K=Kt(ue)}else await F(s);if(l.disabled.size)for(const X of l.disabled)Lt(K,X);if(Lt(t.errors,"root"),Hn(t.errors)){f.state.next({errors:{}});try{await R(K,I)}catch(X){J=X}}else L&&await L({...t.errors},I),wt(),setTimeout(wt);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Hn(t.errors)&&!J,submitCount:t.submitCount+1,errors:t.errors}),J)throw J},bs=(R,L={})=>{le(s,R)&&(Rt(L.defaultValue)?V(R,Kt(le(r,R))):(V(R,L.defaultValue),lt(r,R,Kt(L.defaultValue))),L.keepTouched||Lt(t.touchedFields,R),L.keepDirty||(Lt(t.dirtyFields,R),t.isDirty=L.defaultValue?j(R,Kt(le(r,R))):j()),L.keepError||(Lt(t.errors,R),d.isValid&&v()),f.state.next({...t}))},Js=(R,L={})=>{const I=R?Kt(R):r,J=Kt(I),K=Hn(R),X=K?r:J;if(L.keepDefaultValues||(r=I),!L.keepValues){if(L.keepDirtyValues){const ue=new Set([...l.mount,...Object.keys(Gu(r,i))]);for(const je of Array.from(ue))le(t.dirtyFields,je)?lt(X,je,le(i,je)):V(je,le(X,je))}else{if(eE&&Rt(R))for(const ue of l.mount){const je=le(s,ue);if(je&&je._f){const Ze=Array.isArray(je._f.refs)?je._f.refs[0]:je._f.ref;if(Nv(Ze)){const er=Ze.closest("form");if(er){er.reset();break}}}}if(L.keepFieldsRef)for(const ue of l.mount)V(ue,le(X,ue));else s={}}i=e.shouldUnregister?L.keepDefaultValues?Kt(r):{}:Kt(X),f.array.next({values:{...X}}),f.state.next({values:{...X}})}l={mount:L.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!e.shouldUnregister&&!Hn(X),a.watch=!!e.shouldUnregister,f.state.next({submitCount:L.keepSubmitCount?t.submitCount:0,isDirty:K?!1:L.keepDirty?t.isDirty:!!(L.keepDefaultValues&&!uo(R,r)),isSubmitted:L.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:K?{}:L.keepDirtyValues?L.keepDefaultValues&&i?Gu(r,i):t.dirtyFields:L.keepDefaultValues&&R?Gu(r,R):L.keepDirty?t.dirtyFields:{},touchedFields:L.keepTouched?t.touchedFields:{},errors:L.keepErrors?t.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},E0=(R,L)=>Js(Gr(R)?R(i):R,L),Gw=(R,L={})=>{const I=le(s,R),J=I&&I._f;if(J){const K=J.refs?J.refs[0]:J.ref;K.focus&&(K.focus(),L.shouldSelect&&Gr(K.select)&&K.select())}},Xw=R=>{t={...t,...R}},Yw={control:{register:ce,unregister:de,getFieldState:ie,handleSubmit:Jn,setError:ae,_subscribe:Me,_runSchema:N,_focusError:wt,_getWatch:B,_getDirty:j,_setValid:v,_setFieldArray:w,_setDisabledField:Yt,_setErrors:b,_getFieldArray:z,_reset:Js,_resetDefaultValues:()=>Gr(e.defaultValues)&&e.defaultValues().then(R=>{E0(R,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:De,_subjects:f,_proxyFormState:d,get _fields(){return s},get _formValues(){return i},get _state(){return a},set _state(R){a=R},get _defaultValues(){return r},get _names(){return l},set _names(R){l=R},get _formState(){return t},get _options(){return e},set _options(R){e={...e,...R}}},subscribe:G,trigger:U,register:ce,handleSubmit:Jn,watch:_e,setValue:V,getValues:$,reset:E0,resetField:bs,clearErrors:Z,unregister:de,setError:ae,setFocus:Gw,getFieldState:ie};return{...Yw,formControl:Yw}}function rN(n={}){const e=Mn.useRef(void 0),t=Mn.useRef(void 0),[s,r]=Mn.useState({isDirty:!1,isValidating:!1,isLoading:Gr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Gr(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:s},n.defaultValues&&!Gr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:a,...l}=_4(n);e.current={...l,formState:s}}const i=e.current.control;return i._options=n,d4(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>r({...i._formState}),reRenderRoot:!0});return r(l=>({...l,isReady:!0})),i._formState.isReady=!0,a},[i]),Mn.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),Mn.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),Mn.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),Mn.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),Mn.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==s.isDirty&&i._subjects.state.next({isDirty:a})}},[i,s.isDirty]),Mn.useEffect(()=>{var a;n.values&&!uo(n.values,t.current)?(i._reset(n.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((a=i._options.resetOptions)===null||a===void 0)&&a.keepIsValid||i._setValid(),t.current=n.values,r(l=>({...l}))):i._resetDefaultValues()},[i,n.values]),Mn.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=u4(s,i),e.current}const T4=()=>{const[n,e]=C.useState(!1),{login:t}=d0(),s=_f(),{register:r,handleSubmit:i,formState:{errors:a}}=rN(),l=async c=>{var u,d;e(!0);try{const h=await bf.login(c);localStorage.setItem("access_token",h.access_token),localStorage.setItem("refresh_token",h.refresh_token);const f=await bf.getMe();t(f,h.access_token,h.refresh_token),Li.success("Welcome back!"),s("/dashboard")}catch(h){const f=h;Li.error(((d=(u=f.response)==null?void 0:u.data)==null?void 0:d.detail)||"Invalid credentials")}finally{e(!1)}};return p.jsx("div",{className:"card",children:p.jsxs("div",{className:"card-body",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center mb-6",children:"Sign in to your account"}),p.jsxs("form",{onSubmit:i(l),className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"label",children:"Email address"}),p.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"input",...r("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),a.email&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),p.jsx("input",{id:"password",type:"password",autoComplete:"current-password",className:"input",...r("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}})}),a.password&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]}),p.jsx("button",{type:"submit",disabled:n,className:"btn btn-primary w-full",children:n?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"Or continue with"})})]}),p.jsxs("button",{type:"button",className:"mt-4 w-full btn btn-outline",onClick:()=>Li.error("Google login requires OAuth setup"),children:[p.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",p.jsx(mn,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})]})})},P4=()=>{const[n,e]=C.useState(!1),{login:t}=d0(),s=_f(),{register:r,handleSubmit:i,formState:{errors:a},watch:l}=rN(),c=l("password"),u=async d=>{var h,f;e(!0);try{const m=await bf.register(d);localStorage.setItem("access_token",m.access_token),localStorage.setItem("refresh_token",m.refresh_token);const y=await bf.getMe();t(y,m.access_token,m.refresh_token),Li.success("Account created successfully!"),s("/dashboard")}catch(m){const y=m;Li.error(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.detail)||"Registration failed")}finally{e(!1)}};return p.jsx("div",{className:"card",children:p.jsxs("div",{className:"card-body",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center mb-6",children:"Create your account"}),p.jsxs("form",{onSubmit:i(u),className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"full_name",className:"label",children:"Full Name"}),p.jsx("input",{id:"full_name",type:"text",className:"input",...r("full_name")})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"label",children:"Email address"}),p.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"input",...r("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),a.email&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"label",children:"Password"}),p.jsx("input",{id:"password",type:"password",autoComplete:"new-password",className:"input",...r("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}})}),a.password&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm Password"}),p.jsx("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",className:"input",...r("confirmPassword",{required:"Please confirm your password",validate:d=>d===c||"Passwords do not match"})}),a.confirmPassword&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword.message})]}),p.jsx("button",{type:"submit",disabled:n,className:"btn btn-primary w-full",children:n?"Creating account...":"Create account"})]}),p.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",p.jsx(mn,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})]})})},N4=()=>{var i;const{data:n}=Xs({queryKey:["patients"],queryFn:Cl.list}),{data:e}=Xs({queryKey:["documents"],queryFn:()=>_l.list()}),{data:t}=Xs({queryKey:["prescriptions"],queryFn:()=>WP.list()}),s=[{name:"Total Patients",value:(n==null?void 0:n.total)||0,icon:db,href:"/patients",color:"bg-blue-500"},{name:"Documents",value:(e==null?void 0:e.total)||0,icon:Qr,href:"/documents",color:"bg-green-500"},{name:"Prescriptions",value:(t==null?void 0:t.total)||0,icon:ZA,href:"/prescriptions",color:"bg-purple-500"}],r=((i=t==null?void 0:t.prescriptions)==null?void 0:i.slice(0,5))||[];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Overview of your medical history management"})]}),p.jsxs(mn,{to:"/patients",className:"btn btn-primary",children:[p.jsx(cb,{className:"w-5 h-5 mr-2"}),"Add Patient"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map(a=>p.jsx(mn,{to:a.href,className:"card p-6 hover:shadow-md transition-shadow",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`p-3 rounded-lg ${a.color}`,children:p.jsx(a.icon,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a.name}),p.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.value})]})]})},a.name))}),p.jsxs("div",{className:"card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"})}),p.jsx("div",{className:"card-body",children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsxs(mn,{to:"/patients",className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[p.jsx(db,{className:"w-8 h-8 text-primary-600"}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Add Patient"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create a new profile"})]})]}),p.jsxs(mn,{to:"/documents",className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[p.jsx(Qr,{className:"w-8 h-8 text-green-600"}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Upload Document"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add prescription/report"})]})]}),p.jsxs(mn,{to:"/search",className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[p.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Search Medicines"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Find past prescriptions"})]})]}),p.jsxs(mn,{to:"/settings",className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[p.jsxs("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Settings"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure API key"})]})]})]})})]}),p.jsxs("div",{className:"card",children:[p.jsxs("div",{className:"card-header flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Prescriptions"}),p.jsx(mn,{to:"/prescriptions",className:"text-sm text-primary-600 hover:text-primary-700",children:"View all"})]}),p.jsx("div",{className:"card-body",children:r.length>0?p.jsx("div",{className:"space-y-4",children:r.map(a=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.doctor_name||"Unknown Doctor"}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.hospital_name||"Unknown Hospital"," "," ",a.prescription_date||"Date unknown"]}),p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[a.medicines.length," medicine(s)"]})]}),p.jsx("div",{className:"flex items-center space-x-2",children:p.jsx("span",{className:`badge ${a.parsing_status==="success"?"badge-success":a.parsing_status==="partial"?"badge-warning":"badge-error"}`,children:a.parsing_status||"pending"})})]},a.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Qr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No prescriptions yet. Upload a document to get started."}),p.jsx(mn,{to:"/documents",className:"btn btn-primary mt-4",children:"Upload Document"})]})})]})]})},R4=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState({name:"",relationship:"self"}),r=c0(),{data:i,isLoading:a}=Xs({queryKey:["patients"],queryFn:Cl.list}),l=Kl({mutationFn:Cl.create,onSuccess:()=>{r.invalidateQueries({queryKey:["patients"]}),Li.success("Patient created successfully"),e(!1),s({name:"",relationship:"self"})},onError:()=>{Li.error("Failed to create patient")}}),c=Kl({mutationFn:Cl.delete,onSuccess:()=>{r.invalidateQueries({queryKey:["patients"]}),Li.success("Patient deleted")},onError:()=>{Li.error("Failed to delete patient")}}),u=y=>{if(y.preventDefault(),!t.name.trim()){Li.error("Name is required");return}l.mutate(t)},d=y=>{window.confirm(`Are you sure you want to delete ${y.name}?`)&&c.mutate(y.id)},h=["self","spouse","child","parent","sibling","other"],f=["A+","A-","B+","B-","AB+","AB-","O+","O-"],m=["Male","Female","Other"];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Patients"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage patient profiles for your family"})]}),p.jsxs("button",{onClick:()=>e(!0),className:"btn btn-primary",children:[p.jsx(cb,{className:"w-5 h-5 mr-2"}),"Add Patient"]})]}),a?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):i!=null&&i.patients&&i.patients.length>0?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.patients.map(y=>p.jsxs("div",{className:"card p-6 hover:shadow-md transition-shadow",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs(mn,{to:`/patients/${y.id}`,className:"flex items-center space-x-4 flex-1",children:[p.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:p.jsx(ub,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:y.name}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.relationship||"Not specified"})]})]}),p.jsx("button",{onClick:()=>d(y),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:p.jsx(KP,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[y.blood_group&&p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Blood:"})," ",p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:y.blood_group})]}),y.gender&&p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Gender:"})," ",p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:y.gender})]})]}),p.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[p.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[y.document_count," document(s)"]}),p.jsx(mn,{to:`/patients/${y.id}`,className:"text-sm text-primary-600 hover:text-primary-700",children:"View details "})]})]})]},y.id))}):p.jsxs("div",{className:"card p-12 text-center",children:[p.jsx(ub,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No patients yet"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add your first patient profile to get started"}),p.jsxs("button",{onClick:()=>e(!0),className:"btn btn-primary",children:[p.jsx(cb,{className:"w-5 h-5 mr-2"}),"Add Patient"]})]}),n&&p.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:p.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>e(!1)}),p.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Add New Patient"}),p.jsxs("form",{onSubmit:u,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Name *"}),p.jsx("input",{type:"text",className:"input",value:t.name,onChange:y=>s({...t,name:y.target.value}),placeholder:"Full name",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Relationship"}),p.jsx("select",{className:"input",value:t.relationship||"",onChange:y=>s({...t,relationship:y.target.value}),children:h.map(y=>p.jsx("option",{value:y,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Gender"}),p.jsxs("select",{className:"input",value:t.gender||"",onChange:y=>s({...t,gender:y.target.value}),children:[p.jsx("option",{value:"",children:"Select"}),m.map(y=>p.jsx("option",{value:y,children:y},y))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Blood Group"}),p.jsxs("select",{className:"input",value:t.blood_group||"",onChange:y=>s({...t,blood_group:y.target.value}),children:[p.jsx("option",{value:"",children:"Select"}),f.map(y=>p.jsx("option",{value:y,children:y},y))]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Date of Birth"}),p.jsx("input",{type:"date",className:"input",value:t.date_of_birth||"",onChange:y=>s({...t,date_of_birth:y.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"label",children:"Allergies"}),p.jsx("textarea",{className:"input",rows:2,value:t.allergies||"",onChange:y=>s({...t,allergies:y.target.value}),placeholder:"List any known allergies"})]}),p.jsxs("div",{className:"flex space-x-3 pt-4",children:[p.jsx("button",{type:"button",onClick:()=>e(!1),className:"btn btn-secondary flex-1",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:l.isPending,className:"btn btn-primary flex-1",children:l.isPending?"Creating...":"Create Patient"})]})]})]})]})})]})},Vn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),pb=[.001,0,0,.001,0,0],Rx=1.35,$s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ho={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sm="pdfjs_internal_editor_",ge={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},M4={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},mb={TRIANGLES:1,LATTICE:2},ln={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},xy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Uw={ERRORS:0,WARNINGS:1,INFOS:5},rm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},$f={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},D4={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $w=Uw.WARNINGS;function L4(n){Number.isInteger(n)&&($w=n)}function F4(){return $w}function zw(n){$w>=Uw.INFOS&&console.info(`Info: ${n}`)}function fe(n){$w>=Uw.WARNINGS&&console.warn(`Warning: ${n}`)}function Qe(n){throw new Error(n)}function Ce(n,e){n||Qe(e)}function O4(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function iN(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=$4(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return O4(s)?s:null}function aN(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&iN(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function pe(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Uu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class Lk extends Uu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Mx extends Uu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class gb extends Uu{constructor(e){super(e,"InvalidPDFException")}}class Mv extends Uu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class j4 extends Uu{constructor(e){super(e,"FormatError")}}class Nl extends Uu{constructor(e){super(e,"AbortException")}}function oN(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Qe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=n.subarray(r,i);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function y0(n){typeof n!="string"&&Qe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function I4(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function B4(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function U4(){try{return new Function(""),!0}catch{return!1}}class xn{static get isLittleEndian(){return pe(this,"isLittleEndian",B4())}static get isEvalSupported(){return pe(this,"isEvalSupported",U4())}static get isOffscreenCanvasSupported(){return pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return pe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return pe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return pe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Dx=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var $a,by,yb;class re{static makeHexColor(e,t,s){return`#${Dx[e]}${Dx[t]}${Dx[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[s+d],f=e[s+d+1];e[s+d]=h*r+f*a+c,e[s+d+1]=h*i+f*l+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],m=e[3];let y=r*d+c,v=y,A=r*f+c,w=A,x=l*h+u,b=x,k=l*m+u,_=k;if(i!==0||a!==0){const T=i*d,N=i*f,M=a*h,F=a*m;y+=M,w+=M,A+=F,v+=F,x+=T,_+=T,k+=N,b+=N}s[0]=Math.min(s[0],y,A,v,w),s[1]=Math.min(s[1],x,k,b,_),s[2]=Math.max(s[2],y,A,v,w),s[3]=Math.max(s[3],x,k,b,_)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],a=e[3],l=s**2+r**2,c=s*i+r*a,u=i**2+a**2,d=(l+u)/2,h=Math.sqrt(d**2-(l*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[s,i,r,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,a,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,c),E(this,$a,yb).call(this,e,s,i,l,t,r,a,c,3*(-e+3*(s-i)+l),6*(e-2*s+i),3*(s-e),u),E(this,$a,yb).call(this,e,s,i,l,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),u)}}$a=new WeakSet,by=function(e,t,s,r,i,a,l,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,m=f*u,y=h*(h*(h*e+3*u*t)+3*f*s)+m*r,v=h*(h*(h*i+3*u*a)+3*f*l)+m*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],v),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],v)},yb=function(e,t,s,r,i,a,l,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&E(this,$a,by).call(this,e,t,s,r,i,a,l,c,-h/d,f);return}const m=d**2-4*h*u;if(m<0)return;const y=Math.sqrt(m),v=2*u;E(this,$a,by).call(this,e,t,s,r,i,a,l,c,(-d+y)/v,f),E(this,$a,by).call(this,e,t,s,r,i,a,l,c,(-d-y)/v,f)},S(re,$a);function $4(n){return decodeURIComponent(escape(n))}let Lx=null,Fk=null;function z4(n){return Lx||(Lx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fk=new Map([["","t"]])),n.replaceAll(Lx,(e,t,s)=>t?t.normalize("NFKC"):Fk.get(s))}function lN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),oN(n)}const pd="pdfjs_internal_id_";function H4(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const a=i.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Wn(n,e,t){return Math.min(Math.max(n,e),t)}function cN(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(oN(n))}function V4(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):y0(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class im{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(im.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class uN{static setupStorage(e,t,s,r,i){const a=r.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of s.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&i.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var h,f;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:s});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);a.append(m),l&&im.shouldBuildText(r.name)&&u.push(m)}return{textDivs:u}}const d=[[r,-1,a]];for(;d.length>0;){const[m,y,v]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const A=m.children[++d.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const b=document.createTextNode(A.value);u.push(b),v.append(b);continue}const x=(h=A==null?void 0:A.attributes)!=null&&h.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(v.append(x),A.attributes&&this.setAttributes({html:x,element:A,storage:t,intent:i,linkService:s}),((f=A.children)==null?void 0:f.length)>0)d.push([A,-1,x]);else if(A.value){const b=document.createTextNode(A.value);l&&im.shouldBuildText(w)&&u.push(b),x.append(b)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Wi="http://www.w3.org/2000/svg",Hl=class Hl{};H(Hl,"CSS",96),H(Hl,"PDF",72),H(Hl,"PDF_TO_CSS_UNITS",Hl.CSS/Hl.PDF);let Rl=Hl;async function v0(n,e="text"){if(sp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class w0{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,m;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,f=0,m=1;break;case 90:d=0,h=1,f=1,m=0;break;case 270:d=0,h=-1,f=-1,m=0;break;case 0:d=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let y,v,A,w;d===0?(y=Math.abs(u-e[1])*s+i,v=Math.abs(c-e[0])*s+a,A=(e[3]-e[1])*s,w=(e[2]-e[0])*s):(y=Math.abs(c-e[0])*s+i,v=Math.abs(u-e[1])*s+a,A=(e[2]-e[0])*s,w=(e[3]-e[1])*s),this.transform=[d*s,h*s,f*s,m*s,y-d*s*c-f*s*u,v-h*s*c-m*s*u],this.width=A,this.height=w}get rawDims(){const e=this.viewBox;return pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new w0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return re.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];re.applyTransform(t,this.transform);const s=[e[2],e[3]];return re.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return re.applyInverseTransform(s,this.transform),s}}class iE extends Uu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Hw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function aE(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function W4(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function q4(n,e="document.pdf"){if(typeof n!="string")return e;if(Hw(n))return fe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(i.test(a))return r(a);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const u of l)if(i.test(u))return r(u);const c=Array.from(s.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return r(u)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return r(c[0])}return e}class Ok{constructor(){H(this,"started",Object.create(null));H(this,"times",[])}time(e){e in this.started&&fe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||fe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function sp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function kr(n){n.preventDefault()}function Tt(n){n.preventDefault(),n.stopPropagation()}function G4(n){console.log("Deprecated API usage: "+n)}var mm;class Dv{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;o(this,mm)||g(this,mm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=o(this,mm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=d,l+=h):u==="+"&&(a-=d,l-=h),new Date(Date.UTC(s,r,i,a,l,c))}}mm=new WeakMap,S(Dv,mm);function X4(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new w0({viewBox:i,userUnit:1,scale:e,rotation:t})}function x0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(fe(`Not a valid color format: "${n}"`),[0,0,0])}function Y4(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,x0(s))}e.remove()}function ft(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform();return[e,t,s,r,i,a]}function si(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform().invertSelf();return[e,t,s,r,i,a]}function Lu(n,e,t=!1,s=!0){if(e instanceof w0){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=n,l=xn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,d=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Bi{constructor(){const{pixelRatio:e}=Bi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let a=1/0,l=1/0,c=1/0;s=Bi.capPixels(s,i),s>0&&(a=Math.sqrt(s/(e*t))),r!==-1&&(l=r/e,c=r/t);const u=Math.min(a,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const vb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class K4{static get isDarkMode(){var e;return pe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Q4{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),pe(this,"commentForegroundColor",x0(s))}}function Z4(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function jk(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),a=Math.min(t,s,r),l=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const c=i-a;switch(e[1]=l<.5?c/(i+a):c/(2-i-a),i){case t:e[0]=((s-r)/c+(s<r?6:0))*60;break;case s:e[0]=((r-t)/c+2)*60;break;case r:e[0]=((t-s)/c+4)*60;break}}e[2]=l}function wb(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,a=i*(1-Math.abs(t/60%2-1)),l=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+l,e[1]=a+l,e[2]=l;break;case 1:e[0]=a+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=a+l;break;case 3:e[0]=l,e[1]=a+l,e[2]=i+l;break;case 4:e[0]=a+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=a+l;break}}function Ik(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function Bk(n,e,t){wb(n,t),t.map(Ik);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];wb(e,t),t.map(Ik);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const Uk=new Map;function J4(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=Uk.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),a=r.subarray(3,6);jk(n,a);const l=r.subarray(6,9);jk(e,l);const c=l[2]<.5,u=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),Bk(a,l,i)<u){let d,h;c?(d=a[2],h=1):(d=0,h=a[2]);const f=.005;for(;h-d>f;){const m=a[2]=(d+h)/2;c===Bk(a,l,i)<u?d=m:h=m}a[2]=c?h:d}return wb(a,i),s=re.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),Uk.set(t,s),s}function dN({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=n.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const u=a[l];i.append(document.createTextNode(u)),l<c-1&&i.append(document.createElement("br"))}r.append(i)}else uN.render({xfaHtml:n,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",t),s.append(r)}function hN(n){const e=new Path2D;if(!n)return e;for(let t=0,s=n.length;t<s;)switch(n[t++]){case $f.moveTo:e.moveTo(n[t++],n[t++]);break;case $f.lineTo:e.lineTo(n[t++],n[t++]);break;case $f.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case $f.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case $f.closePath:e.closePath();break;default:fe(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var So,Ao,rr,ir,gm,Eo,Bd,Ud,ym,qv,fN,vn,pN,mN,Yu,rp;const Yi=class Yi{constructor(e){S(this,vn);S(this,So,null);S(this,Ao,null);S(this,rr);S(this,ir,null);S(this,gm,null);S(this,Eo,null);S(this,Bd,null);S(this,Ud,null);g(this,rr,e),o(Yi,ym)||g(Yi,ym,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=g(this,So,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=o(this,rr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",kr,{signal:t}),e.addEventListener("pointerdown",E(Yi,qv,fN),{signal:t}));const s=g(this,ir,document.createElement("div"));s.className="buttons",e.append(s);const r=o(this,rr).toolbarPosition;if(r){const{style:i}=e,a=o(this,rr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return o(this,So)}hide(){var e;o(this,So).classList.add("hidden"),(e=o(this,Ao))==null||e.hideDropdown()}show(){var e,t;o(this,So).classList.remove("hidden"),(e=o(this,gm))==null||e.shown(),(t=o(this,Eo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=o(this,rr),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",o(Yi,ym)[e]),E(this,vn,Yu).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),o(this,ir).append(s)}async addAltText(e){const t=await e.render();E(this,vn,Yu).call(this,t),o(this,ir).append(t,o(this,vn,rp)),g(this,gm,e)}addComment(e,t=null){if(o(this,Eo))return;const s=e.renderForToolbar();if(!s)return;E(this,vn,Yu).call(this,s);const r=g(this,Bd,o(this,vn,rp));t?(o(this,ir).insertBefore(s,t),o(this,ir).insertBefore(r,t)):o(this,ir).append(s,r),g(this,Eo,e),e.toolbar=this}addColorPicker(e){if(o(this,Ao))return;g(this,Ao,e);const t=e.renderButton();E(this,vn,Yu).call(this,t),o(this,ir).append(t,o(this,vn,rp))}async addEditSignatureButton(e){const t=g(this,Ud,await e.renderEditButton(o(this,rr)));E(this,vn,Yu).call(this,t),o(this,ir).append(t,o(this,vn,rp))}removeButton(e){var t,s;switch(e){case"comment":(t=o(this,Eo))==null||t.removeToolbarCommentButton(),g(this,Eo,null),(s=o(this,Bd))==null||s.remove(),g(this,Bd,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,s){if(!t&&e==="comment")return;const r=o(this,ir).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){o(this,Ud)&&(o(this,Ud).title=e)}remove(){var e;o(this,So).remove(),(e=o(this,Ao))==null||e.destroy(),g(this,Ao,null)}};So=new WeakMap,Ao=new WeakMap,rr=new WeakMap,ir=new WeakMap,gm=new WeakMap,Eo=new WeakMap,Bd=new WeakMap,Ud=new WeakMap,ym=new WeakMap,qv=new WeakSet,fN=function(e){e.stopPropagation()},vn=new WeakSet,pN=function(e){o(this,rr)._focusEventsAllowed=!1,Tt(e)},mN=function(e){o(this,rr)._focusEventsAllowed=!0,Tt(e)},Yu=function(e){const t=o(this,rr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",E(this,vn,pN).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,vn,mN).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",kr,{signal:t}),!0)},rp=function(){const e=document.createElement("div");return e.className="divider",e},S(Yi,qv),S(Yi,ym,null);let xb=Yi;var vm,lc,na,Ka,gN,yN,bb;class eB{constructor(e){S(this,Ka);S(this,vm,null);S(this,lc,null);S(this,na);g(this,na,e)}show(e,t,s){const[r,i]=E(this,Ka,yN).call(this,t,s),{style:a}=o(this,lc)||g(this,lc,E(this,Ka,gN).call(this));e.append(o(this,lc)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,lc).remove()}}vm=new WeakMap,lc=new WeakMap,na=new WeakMap,Ka=new WeakSet,gN=function(){const e=g(this,lc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=o(this,na)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",kr,{signal:t});const s=g(this,vm,document.createElement("div"));return s.className="buttons",e.append(s),o(this,na).hasCommentManager()&&E(this,Ka,bb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{o(this,na).commentSelection("floating_button")}),E(this,Ka,bb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{o(this,na).highlightSelection("floating_button")}),e},yN=function(e,t){let s=0,r=0;for(const i of e){const a=i.y+i.height;if(a<s)continue;const l=i.x+(t?i.width:0);if(a>s){r=l,s=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,s]},bb=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",s);const l=o(this,na)._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",kr,{signal:l}),i.addEventListener("click",r,{signal:l})),o(this,vm).append(i)};function vN(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var cc,uc,$d,dc;const ze=class ze{static initializeAndAddPointerId(e){(o(ze,uc)||g(ze,uc,new Set)).add(e)}static setPointer(e,t){o(ze,cc)||g(ze,cc,t),o(ze,dc)??g(ze,dc,e)}static setTimeStamp(e){g(ze,$d,e)}static isSamePointerId(e){return o(ze,cc)===e}static isSamePointerIdOrRemove(e){var t;return o(ze,cc)===e?!0:((t=o(ze,uc))==null||t.delete(e),!1)}static isSamePointerType(e){return o(ze,dc)===e}static isInitializedAndDifferentPointerType(e){return o(ze,dc)!==null&&!ze.isSamePointerType(e)}static isSameTimeStamp(e){return o(ze,$d)===e}static isUsingMultiplePointers(){var e;return((e=o(ze,uc))==null?void 0:e.size)>=1}static clearPointerType(){g(ze,dc,null)}static clearPointerIds(){g(ze,cc,NaN),g(ze,uc,null)}static clearTimeStamp(){g(ze,$d,NaN)}};cc=new WeakMap,uc=new WeakMap,$d=new WeakMap,dc=new WeakMap,S(ze,cc,NaN),S(ze,uc,null),S(ze,$d,NaN),S(ze,dc,null);let Cn=ze;var Gv;class tB{constructor(){S(this,Gv,0)}get id(){return`${sm}${xt(this,Gv)._++}`}}Gv=new WeakMap;var zd,wm,_n,Hd,Sy;const mE=class mE{constructor(){S(this,Hd);S(this,zd,lN());S(this,wm,0);S(this,_n,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return pe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return E(this,Hd,Sy).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return E(this,Hd,Sy).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,Hd,Sy).call(this,e,s)}async getFromId(e){o(this,_n)||g(this,_n,new Map);const t=o(this,_n).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){o(this,_n)||g(this,_n,new Map);let s=o(this,_n).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${o(this,zd)}_${xt(this,wm)._++}`,refCounter:1,isSvg:!1},o(this,_n).set(e,s),o(this,_n).set(s.id,s),s}getSvgUrl(e){const t=o(this,_n).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;o(this,_n)||g(this,_n,new Map);const t=o(this,_n).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${o(this,zd)}_`)}};zd=new WeakMap,wm=new WeakMap,_n=new WeakMap,Hd=new WeakSet,Sy=async function(e,t){o(this,_n)||g(this,_n,new Map);let s=o(this,_n).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${o(this,zd)}_${xt(this,wm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await v0(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=mE._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},a.onload=async()=>{const h=s.svgUrl=a.result;l.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=a.onerror=d});a.readAsDataURL(r),await c}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){fe(r),s=null}return o(this,_n).set(e,s),s&&o(this,_n).set(s.id,s),s};let Sb=mE;var Pt,ko,xm,ht;class nB{constructor(e=128){S(this,Pt,[]);S(this,ko,!1);S(this,xm);S(this,ht,-1);g(this,xm,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),o(this,ko))return;const c={cmd:e,undo:t,post:s,type:i};if(o(this,ht)===-1){o(this,Pt).length>0&&(o(this,Pt).length=0),g(this,ht,0),o(this,Pt).push(c);return}if(a&&o(this,Pt)[o(this,ht)].type===i){l&&(c.undo=o(this,Pt)[o(this,ht)].undo),o(this,Pt)[o(this,ht)]=c;return}const u=o(this,ht)+1;u===o(this,xm)?o(this,Pt).splice(0,1):(g(this,ht,u),u<o(this,Pt).length&&o(this,Pt).splice(u)),o(this,Pt).push(c)}undo(){if(o(this,ht)===-1)return;g(this,ko,!0);const{undo:e,post:t}=o(this,Pt)[o(this,ht)];e(),t==null||t(),g(this,ko,!1),g(this,ht,o(this,ht)-1)}redo(){if(o(this,ht)<o(this,Pt).length-1){g(this,ht,o(this,ht)+1),g(this,ko,!0);const{cmd:e,post:t}=o(this,Pt)[o(this,ht)];e(),t==null||t(),g(this,ko,!1)}}hasSomethingToUndo(){return o(this,ht)!==-1}hasSomethingToRedo(){return o(this,ht)<o(this,Pt).length-1}cleanType(e){if(o(this,ht)!==-1){for(let t=o(this,ht);t>=0;t--)if(o(this,Pt)[t].type!==e){o(this,Pt).splice(t+1,o(this,ht)-t),g(this,ht,t);return}o(this,Pt).length=0,g(this,ht,-1)}}destroy(){g(this,Pt,null)}}Pt=new WeakMap,ko=new WeakMap,xm=new WeakMap,ht=new WeakMap;var Xv,wN;class b0{constructor(e){S(this,Xv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=xn.platform;for(const[s,r,i={}]of e)for(const a of s){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,Xv,wN).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:l=null}}=s;l&&!l(e,t)||(r.bind(e,...a,t)(),i||Tt(t))}}Xv=new WeakSet,wN=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Yv=class Yv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Y4(e),pe(this,"_colors",e)}convert(e){const t=x0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,a)=>i===t[a]))return Yv._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?re.makeHexColor(...t):e}};H(Yv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ab=Yv;var Vd,As,Wd,St,zt,qd,ar,Gd,or,Tn,Co,_o,Xd,To,di,lr,hc,bm,Sm,Yd,Am,hi,Po,Kd,No,fi,Kv,Ro,Qd,Em,Mo,fc,Zd,Do,km,Ot,Ie,sa,Lo,Fo,Cm,Jd,_m,Oo,pi,ra,Tm,Pm,cr,Q,Ay,Eb,xN,bN,ip,SN,AN,EN,kb,kN,CN,_N,TN,On,qi,PN,NN,Cb,RN,ap,_b;const gd=class gd{constructor(e,t,s,r,i,a,l,c,u,d,h,f,m,y,v,A){S(this,Q);S(this,Vd,new AbortController);S(this,As,null);S(this,Wd,null);S(this,St,new Map);S(this,zt,new Map);S(this,qd,null);S(this,ar,null);S(this,Gd,null);S(this,or,new nB);S(this,Tn,null);S(this,Co,null);S(this,_o,null);S(this,Xd,0);S(this,To,new Set);S(this,di,null);S(this,lr,null);S(this,hc,new Set);H(this,"_editorUndoBar",null);S(this,bm,!1);S(this,Sm,!1);S(this,Yd,!1);S(this,Am,null);S(this,hi,null);S(this,Po,null);S(this,Kd,null);S(this,No,!1);S(this,fi,null);S(this,Kv,new tB);S(this,Ro,!1);S(this,Qd,!1);S(this,Em,!1);S(this,Mo,null);S(this,fc,null);S(this,Zd,null);S(this,Do,null);S(this,km,null);S(this,Ot,ge.NONE);S(this,Ie,new Set);S(this,sa,null);S(this,Lo,null);S(this,Fo,null);S(this,Cm,null);S(this,Jd,null);S(this,_m,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Oo,[0,0]);S(this,pi,null);S(this,ra,null);S(this,Tm,null);S(this,Pm,null);S(this,cr,null);const w=this._signal=o(this,Vd).signal;g(this,ra,e),g(this,Tm,t),g(this,Pm,s),g(this,qd,r),g(this,Tn,i),g(this,Lo,a),g(this,Jd,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:w}),window.addEventListener("pointerdown",()=>{g(this,Qd,!0)},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{g(this,Qd,!1)},{capture:!0,signal:w}),E(this,Q,SN).call(this),E(this,Q,TN).call(this),E(this,Q,kb).call(this),g(this,ar,c.annotationStorage),g(this,Am,c.filterFactory),g(this,Fo,u),g(this,Kd,d||null),g(this,bm,h),g(this,Sm,f),g(this,Yd,m),g(this,km,y||null),this.viewParameters={realScale:Rl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=A!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=gd.prototype,t=a=>o(a,ra).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return pe(this,"_keyboardManager",new b0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,ra).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,ra).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,a,l,c,u;(e=o(this,cr))==null||e.resolve(),g(this,cr,null),(t=o(this,Vd))==null||t.abort(),g(this,Vd,null),this._signal=null;for(const d of o(this,zt).values())d.destroy();o(this,zt).clear(),o(this,St).clear(),o(this,hc).clear(),(s=o(this,Do))==null||s.clear(),g(this,As,null),o(this,Ie).clear(),o(this,or).destroy(),(r=o(this,qd))==null||r.destroy(),(i=o(this,Tn))==null||i.destroy(),(a=o(this,Lo))==null||a.destroy(),(l=o(this,fi))==null||l.hide(),g(this,fi,null),(c=o(this,Zd))==null||c.destroy(),g(this,Zd,null),g(this,Wd,null),o(this,hi)&&(clearTimeout(o(this,hi)),g(this,hi,null)),o(this,pi)&&(clearTimeout(o(this,pi)),g(this,pi,null)),(u=this._editorUndoBar)==null||u.destroy(),g(this,Jd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return o(this,km)}get useNewAltTextFlow(){return o(this,Sm)}get useNewAltTextWhenAddingImage(){return o(this,Yd)}get hcmFilter(){return pe(this,"hcmFilter",o(this,Fo)?o(this,Am).addHCMFilter(o(this,Fo).foreground,o(this,Fo).background):"none")}get direction(){return pe(this,"direction",getComputedStyle(o(this,ra)).direction)}get _highlightColors(){return pe(this,"_highlightColors",o(this,Kd)?new Map(o(this,Kd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return pe(this,"highlightColors",null);const t=new Map,s=!!o(this,Fo);for(const[r,i]of e){const a=r.endsWith("_HCM");if(s&&a){t.set(r.replace("_HCM",""),i);continue}!s&&!a&&t.set(r,i)}return pe(this,"highlightColors",t)}get highlightColorNames(){return pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,_o,e)}setMainHighlightColorPicker(e){g(this,Zd,e)}editAltText(e,t=!1){var s;(s=o(this,qd))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!o(this,Tn)}editComment(e,t,s,r){var i;(i=o(this,Tn))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=o(this,zt).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=o(this,Tn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=o(this,Tn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=o(this,Tn))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=o(this,Tn))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=o(this,Tn))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=o(this,Tn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(o(this,zt).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=o(this,Lo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return o(this,Lo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":g(this,Yd,t);break}}onPageChanging({pageNumber:e}){g(this,Xd,e-1)}focusMainContainer(){o(this,ra).focus()}findParent(e,t){for(const s of o(this,zt).values()){const{x:r,y:i,width:a,height:l}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+l)return s}return null}disableUserSelect(e=!1){o(this,Tm).classList.toggle("noUserSelect",e)}addShouldRescale(e){o(this,hc).add(e)}removeShouldRescale(e){o(this,hc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Rl.PDF_TO_CSS_UNITS;for(const s of o(this,hc))s.onScaleChanging();(t=o(this,_o))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:l}=s,c=s.toString(),d=E(this,Q,Ay).call(this,s).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;s.empty();const f=E(this,Q,Eb).call(this,d),m=o(this,Ot)===ge.NONE,y=()=>{const v=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(m){this.switchToMode(ge.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!o(this,ar))return null;const t=`${sm}${e}`,s=o(this,ar).getRawValue(t);return s&&o(this,ar).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&o(this,ar)&&!o(this,ar).has(e.id)&&o(this,ar).setValue(e.id,e)}a11yAlert(e,t=null){const s=o(this,Pm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,o(this,No)&&(g(this,No,!1),E(this,Q,ip).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of o(this,Ie))if(t.div.contains(e)){g(this,fc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!o(this,fc))return;const[e,t]=o(this,fc);g(this,fc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,Q,kb).call(this),this.setEditingState(!0)}removeEditListeners(){E(this,Q,kN).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of o(this,lr))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of o(this,lr))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=o(this,As))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of o(this,Ie)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of o(this,lr))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){fe(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of s){const u=await r.deserialize(c);if(!u)return;i.push(u)}const a=()=>{for(const c of i)E(this,Q,Cb).call(this,c);E(this,Q,_b).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){fe(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Ot)!==ge.NONE&&!this.isEditorHandlingKeyboard&&gd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,No)&&(g(this,No,!1),E(this,Q,ip).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(E(this,Q,AN).call(this),E(this,Q,CN).call(this),E(this,Q,On).call(this,{isEditing:o(this,Ot)!==ge.NONE,isEmpty:E(this,Q,ap).call(this),hasSomethingToUndo:o(this,or).hasSomethingToUndo(),hasSomethingToRedo:o(this,or).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,Q,EN).call(this),E(this,Q,_N).call(this),E(this,Q,On).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!o(this,lr)){g(this,lr,e);for(const t of o(this,lr))E(this,Q,qi).call(this,t.defaultPropertiesToUpdate)}}getId(){return o(this,Kv).id}get currentLayer(){return o(this,zt).get(o(this,Xd))}getLayer(e){return o(this,zt).get(e)}get currentPageIndex(){return o(this,Xd)}addLayer(e){o(this,zt).set(e.pageIndex,e),o(this,Ro)?e.enable():e.disable()}removeLayer(e){o(this,zt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var a,l,c,u,d,h;if(o(this,Ot)!==e&&!(o(this,cr)&&(await o(this,cr).promise,!o(this,cr)))){if(g(this,cr,Promise.withResolvers()),(a=o(this,_o))==null||a.commitOrRemove(),o(this,Ot)===ge.POPUP&&((l=o(this,Tn))==null||l.hideSidebar()),(c=o(this,Tn))==null||c.destroyPopup(),g(this,Ot,e),e===ge.NONE){this.setEditingState(!1),E(this,Q,NN).call(this);for(const f of o(this,St).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),o(this,cr).resolve();return}for(const f of o(this,St).values())f.addStandaloneCommentButton();e===ge.SIGNATURE&&await((d=o(this,Lo))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await E(this,Q,PN).call(this),this.unselectAll();for(const f of o(this,zt).values())f.updateMode(e);if(e===ge.POPUP){o(this,Wd)||g(this,Wd,await o(this,Jd).getAnnotationsByType(new Set(o(this,lr).map(y=>y._editorType))));const f=new Set,m=[];for(const y of o(this,St).values()){const{annotationElementId:v,hasComment:A,deleted:w}=y;v&&f.add(v),A&&!w&&m.push(y.getData())}for(const y of o(this,Wd)){const{id:v,popupRef:A,contentsObj:w}=y;A&&(w!=null&&w.str)&&!f.has(v)&&!o(this,To).has(v)&&m.push(y)}(h=o(this,Tn))==null||h.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),o(this,cr).resolve();return}for(const f of o(this,St).values())f.uid===t?(this.setSelected(f),i?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();o(this,cr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==o(this,Ot)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(o(this,lr)){switch(e){case ke.CREATE:this.currentLayer.addNewEditor(t);return;case ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Cm)||g(this,Cm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of o(this,Ie))s.updateParams(e,t);else for(const s of o(this,lr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const a of o(this,St).values())a.editorType===e&&a.show(t);(((i=o(this,Cm))==null?void 0:i.get(ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,Q,qi).call(this,[[ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(o(this,Em)!==e){g(this,Em,e);for(const t of o(this,zt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of o(this,St).values())t.pageIndex===e&&(yield t)}getEditor(e){return o(this,St).get(e)}addEditor(e){o(this,St).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(o(this,hi)&&clearTimeout(o(this,hi)),g(this,hi,setTimeout(()=>{this.focusMainContainer(),g(this,hi,null)},0))),o(this,St).delete(e.id),e.annotationElementId&&((t=o(this,Do))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!o(this,To).has(e.annotationElementId))&&((s=o(this,ar))==null||s.remove(e.id))}addDeletedAnnotationElement(e){o(this,To).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return o(this,To).has(e)}removeDeletedAnnotationElement(e){o(this,To).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){o(this,As)!==e&&(g(this,As,e),e&&E(this,Q,qi).call(this,e.propertiesToUpdate))}updateUI(e){o(this,Q,RN)===e&&E(this,Q,qi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,Q,qi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(o(this,Ie).has(e)){o(this,Ie).delete(e),e.unselect(),E(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Ie).add(e),e.select(),E(this,Q,qi).call(this,e.propertiesToUpdate),E(this,Q,On).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=o(this,_o))==null||t.commitOrRemove();for(const s of o(this,Ie))s!==e&&s.unselect();o(this,Ie).clear(),o(this,Ie).add(e),e.select(),E(this,Q,qi).call(this,e.propertiesToUpdate),E(this,Q,On).call(this,{hasSelectedEditor:!0})}isSelected(e){return o(this,Ie).has(e)}get firstSelectedEditor(){return o(this,Ie).values().next().value}unselect(e){e.unselect(),o(this,Ie).delete(e),E(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Ie).size!==0}get isEnterHandled(){return o(this,Ie).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;o(this,or).undo(),E(this,Q,On).call(this,{hasSomethingToUndo:o(this,or).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,Q,ap).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){o(this,or).redo(),E(this,Q,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,or).hasSomethingToRedo(),isEmpty:E(this,Q,ap).call(this)})}addCommands(e){o(this,or).add(e),E(this,Q,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,Q,ap).call(this)})}cleanUndoStack(e){o(this,or).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...o(this,Ie)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)E(this,Q,Cb).call(this,a)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=o(this,As))==null||e.commitOrRemove()}hasSomethingToControl(){return o(this,As)||this.hasSelection}selectAll(){for(const e of o(this,Ie))e.commit();E(this,Q,_b).call(this,o(this,St).values())}unselectAll(){var e;if(!(o(this,As)&&(o(this,As).commitOrRemove(),o(this,Ot)!==ge.NONE))&&!((e=o(this,_o))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of o(this,Ie))t.unselect();o(this,Ie).clear(),E(this,Q,On).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;o(this,Oo)[0]+=e,o(this,Oo)[1]+=t;const[r,i]=o(this,Oo),a=[...o(this,Ie)],l=1e3;o(this,pi)&&clearTimeout(o(this,pi)),g(this,pi,setTimeout(()=>{g(this,pi,null),o(this,Oo)[0]=o(this,Oo)[1]=0,this.addCommands({cmd:()=>{for(const c of a)o(this,St).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of a)o(this,St).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,di,new Map);for(const e of o(this,Ie))o(this,di).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,di))return!1;this.disableUserSelect(!1);const e=o(this,di);g(this,di,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},l]of e)l.newX=r,l.newY=i,l.newPageIndex=a,t||(t=r!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const s=(r,i,a,l)=>{if(o(this,St).has(r.id)){const c=o(this,zt).get(l);c?r._setParentAndPosition(c,i,a):(r.pageIndex=l,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:l}]of e)s(r,i,a,l)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:l}]of e)s(r,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(o(this,di))for(const s of o(this,di).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||o(this,Ie).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return o(this,As)===e}getActive(){return o(this,As)}getMode(){return o(this,Ot)}isEditingMode(){return o(this,Ot)!==ge.NONE}get imageManager(){return pe(this,"imageManager",new Sb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-r)/a,y:1-(u+h-s)/i,width:f/a,height:h/i});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-s)/i,y:1-(d+f-r)/a,width:h/i,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-r)/a,y:(u-s)/i,width:f/a,height:h/i});break;default:l=(u,d,h,f)=>({x:(u-s)/i,y:(d-r)/a,width:h/i,height:f/a});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:m,width:y,height:v}of h.getClientRects())y===0||v===0||c.push(l(f,m,y,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(o(this,Gd)||g(this,Gd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=o(this,Gd))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=o(this,Gd))==null?void 0:r.get(e.data.id);if(!t)return;const s=o(this,ar).getRawValue(t);s&&(o(this,Ot)===ge.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=o(this,Do))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),o(this,Do).delete(e))}addMissingCanvas(e,t){(o(this,Do)||g(this,Do,new Map)).set(e,t)}};Vd=new WeakMap,As=new WeakMap,Wd=new WeakMap,St=new WeakMap,zt=new WeakMap,qd=new WeakMap,ar=new WeakMap,Gd=new WeakMap,or=new WeakMap,Tn=new WeakMap,Co=new WeakMap,_o=new WeakMap,Xd=new WeakMap,To=new WeakMap,di=new WeakMap,lr=new WeakMap,hc=new WeakMap,bm=new WeakMap,Sm=new WeakMap,Yd=new WeakMap,Am=new WeakMap,hi=new WeakMap,Po=new WeakMap,Kd=new WeakMap,No=new WeakMap,fi=new WeakMap,Kv=new WeakMap,Ro=new WeakMap,Qd=new WeakMap,Em=new WeakMap,Mo=new WeakMap,fc=new WeakMap,Zd=new WeakMap,Do=new WeakMap,km=new WeakMap,Ot=new WeakMap,Ie=new WeakMap,sa=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,Cm=new WeakMap,Jd=new WeakMap,_m=new WeakMap,Oo=new WeakMap,pi=new WeakMap,ra=new WeakMap,Tm=new WeakMap,Pm=new WeakMap,cr=new WeakMap,Q=new WeakSet,Ay=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Eb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of o(this,zt).values())if(s.hasTextLayer(e))return s;return null},xN=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,Q,Ay).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(o(this,fi)||g(this,fi,new eB(this)),o(this,fi).show(s,r,this.direction==="ltr"))},bN=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){o(this,sa)&&((i=o(this,fi))==null||i.hide(),g(this,sa,null),E(this,Q,On).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===o(this,sa))return;const r=E(this,Q,Ay).call(this,e).closest(".textLayer");if(!r){o(this,sa)&&((a=o(this,fi))==null||a.hide(),g(this,sa,null),E(this,Q,On).call(this,{hasSelectedText:!1}));return}if((l=o(this,fi))==null||l.hide(),g(this,sa,t),E(this,Q,On).call(this,{hasSelectedText:!0}),!(o(this,Ot)!==ge.HIGHLIGHT&&o(this,Ot)!==ge.NONE)&&(o(this,Ot)===ge.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,No,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=o(this,Ot)===ge.HIGHLIGHT?E(this,Q,Eb).call(this,r):null;if(c==null||c.toggleDrawing(),o(this,Qd)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&E(this,Q,ip).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),E(this,Q,ip).call(this,"main_toolbar")}},ip=function(e=""){o(this,Ot)===ge.HIGHLIGHT?this.highlightSelection(e):o(this,bm)&&E(this,Q,xN).call(this)},SN=function(){document.addEventListener("selectionchange",E(this,Q,bN).bind(this),{signal:this._signal})},AN=function(){if(o(this,Po))return;g(this,Po,new AbortController);const e=this.combinedSignal(o(this,Po));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},EN=function(){var e;(e=o(this,Po))==null||e.abort(),g(this,Po,null)},kb=function(){if(o(this,Mo))return;g(this,Mo,new AbortController);const e=this.combinedSignal(o(this,Mo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},kN=function(){var e;(e=o(this,Mo))==null||e.abort(),g(this,Mo,null)},CN=function(){if(o(this,Co))return;g(this,Co,new AbortController);const e=this.combinedSignal(o(this,Co));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_N=function(){var e;(e=o(this,Co))==null||e.abort(),g(this,Co,null)},TN=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},On=function(e){Object.entries(e).some(([s,r])=>o(this,_m)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,_m),e)}),o(this,Ot)===ge.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,Q,qi).call(this,[[ke.HIGHLIGHT_FREE,!0]]))},qi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},PN=async function(){if(!o(this,Ro)){g(this,Ro,!0);const e=[];for(const t of o(this,zt).values())e.push(t.enable());await Promise.all(e);for(const t of o(this,St).values())t.enable()}},NN=function(){if(this.unselectAll(),o(this,Ro)){g(this,Ro,!1);for(const e of o(this,zt).values())e.disable();for(const e of o(this,St).values())e.disable()}},Cb=function(e){const t=o(this,zt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},RN=function(){let e=null;for(e of o(this,Ie));return e},ap=function(){if(o(this,St).size===0)return!0;if(o(this,St).size===1)for(const e of o(this,St).values())return e.isEmpty();return!1},_b=function(e){for(const t of o(this,Ie))t.unselect();o(this,Ie).clear();for(const t of e)t.isEmpty()||(o(this,Ie).add(t),t.select());E(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection})},H(gd,"TRANSLATE_SMALL",1),H(gd,"TRANSLATE_BIG",10);let Fu=gd;var Zt,mi,Mr,eh,gi,Es,th,yi,is,ia,pc,vi,jo,Xr,op,Ey;const jn=class jn{constructor(e){S(this,Xr);S(this,Zt,null);S(this,mi,!1);S(this,Mr,null);S(this,eh,null);S(this,gi,null);S(this,Es,null);S(this,th,!1);S(this,yi,null);S(this,is,null);S(this,ia,null);S(this,pc,null);S(this,vi,!1);g(this,is,e),g(this,vi,e._uiManager.useNewAltTextFlow),o(jn,jo)||g(jn,jo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){jn._l10n??(jn._l10n=e)}async render(){const e=g(this,Mr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=g(this,eh,document.createElement("span"));e.append(t),o(this,vi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",o(jn,jo).missing),t.setAttribute("data-l10n-id",o(jn,jo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=o(this,is)._uiManager._signal;e.addEventListener("contextmenu",kr,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),o(this,is)._uiManager.editAltText(o(this,is)),o(this,vi)&&o(this,is)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,Xr,op)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(g(this,th,!0),r(i))},{signal:s}),await E(this,Xr,Ey).call(this),e}finish(){o(this,Mr)&&(o(this,Mr).focus({focusVisible:o(this,th)}),g(this,th,!1))}isEmpty(){return o(this,vi)?o(this,Zt)===null:!o(this,Zt)&&!o(this,mi)}hasData(){return o(this,vi)?o(this,Zt)!==null||!!o(this,ia):this.isEmpty()}get guessedText(){return o(this,ia)}async setGuessedText(e){o(this,Zt)===null&&(g(this,ia,e),g(this,pc,await jn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Xr,Ey).call(this))}toggleAltTextBadge(e=!1){var t;if(!o(this,vi)||o(this,Zt)){(t=o(this,yi))==null||t.remove(),g(this,yi,null);return}if(!o(this,yi)){const s=g(this,yi,document.createElement("div"));s.className="noAltTextBadge",o(this,is).div.append(s)}o(this,yi).classList.toggle("hidden",!e)}serialize(e){let t=o(this,Zt);return!e&&o(this,ia)===t&&(t=o(this,pc)),{altText:t,decorative:o(this,mi),guessedText:o(this,ia),textWithDisclaimer:o(this,pc)}}get data(){return{altText:o(this,Zt),decorative:o(this,mi)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(g(this,ia,s),g(this,pc,r)),!(o(this,Zt)===e&&o(this,mi)===t)&&(i||(g(this,Zt,e),g(this,mi,t)),E(this,Xr,Ey).call(this))}toggle(e=!1){o(this,Mr)&&(!e&&o(this,Es)&&(clearTimeout(o(this,Es)),g(this,Es,null)),o(this,Mr).disabled=!e)}shown(){o(this,is)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,Xr,op)}})}destroy(){var e,t;(e=o(this,Mr))==null||e.remove(),g(this,Mr,null),g(this,eh,null),g(this,gi,null),(t=o(this,yi))==null||t.remove(),g(this,yi,null)}};Zt=new WeakMap,mi=new WeakMap,Mr=new WeakMap,eh=new WeakMap,gi=new WeakMap,Es=new WeakMap,th=new WeakMap,yi=new WeakMap,is=new WeakMap,ia=new WeakMap,pc=new WeakMap,vi=new WeakMap,jo=new WeakMap,Xr=new WeakSet,op=function(){return o(this,Zt)&&"added"||o(this,Zt)===null&&this.guessedText&&"review"||"missing"},Ey=async function(){var r,i,a;const e=o(this,Mr);if(!e)return;if(o(this,vi)){if(e.classList.toggle("done",!!o(this,Zt)),e.setAttribute("data-l10n-id",o(jn,jo)[o(this,Xr,op)]),(r=o(this,eh))==null||r.setAttribute("data-l10n-id",o(jn,jo)[`${o(this,Xr,op)}-label`]),!o(this,Zt)){(i=o(this,gi))==null||i.remove();return}}else{if(!o(this,Zt)&&!o(this,mi)){e.classList.remove("done"),(a=o(this,gi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=o(this,gi);if(!t){g(this,gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${o(this,is).id}`;const l=100,c=o(this,is)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(o(this,Es)),g(this,Es,null)},{once:!0}),e.addEventListener("mouseenter",()=>{g(this,Es,setTimeout(()=>{g(this,Es,null),o(this,gi).classList.add("show"),o(this,is)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;o(this,Es)&&(clearTimeout(o(this,Es)),g(this,Es,null)),(u=o(this,gi))==null||u.classList.remove("show")},{signal:c})}o(this,mi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=o(this,Zt)),t.parentNode||e.append(t);const s=o(this,is).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},S(jn,jo,null),H(jn,"_l10n",null);let Lv=jn;var cn,ur,mc,et,Nm,gc,Dr,yc,vc,wc,Rm,Tb;class G0{constructor(e){S(this,Rm);S(this,cn,null);S(this,ur,null);S(this,mc,!1);S(this,et,null);S(this,Nm,null);S(this,gc,null);S(this,Dr,null);S(this,yc,null);S(this,vc,!1);S(this,wc,null);g(this,et,e)}renderForToolbar(){const e=g(this,ur,document.createElement("button"));return e.className="comment",E(this,Rm,Tb).call(this,e,!1)}renderForStandalone(){const e=g(this,cn,document.createElement("button"));e.className="annotationCommentButton";const t=o(this,et).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(o(this,et)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=o(this,et).commentButtonColor;r&&(s.backgroundColor=r)}return E(this,Rm,Tb).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=o(this,cn)??o(this,ur))==null||e.focus()},0)}onUpdatedColor(){if(!o(this,cn))return;const e=o(this,et).commentButtonColor;e&&(o(this,cn).style.backgroundColor=e),o(this,et)._uiManager.updatePopupColor(o(this,et))}get commentButtonWidth(){var e;return(((e=o(this,cn))==null?void 0:e.getBoundingClientRect().width)??0)/o(this,et).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(o(this,wc))return o(this,wc);if(!o(this,cn))return null;const{x:e,y:t,height:s}=o(this,cn).getBoundingClientRect(),{x:r,y:i,width:a,height:l}=o(this,et).parent.boundingClientRect;return[(e-r)/a,(t+s-i)/l]}set commentPopupPositionInLayer(e){g(this,wc,e)}hasDefaultPopupPosition(){return o(this,wc)===null}removeStandaloneCommentButton(){var e;(e=o(this,cn))==null||e.remove(),g(this,cn,null)}removeToolbarCommentButton(){var e;(e=o(this,ur))==null||e.remove(),g(this,ur,null)}setCommentButtonStates({selected:e,hasPopup:t}){o(this,cn)&&(o(this,cn).classList.toggle("selected",e),o(this,cn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=o(this,et).commentButtonPosition;const{width:d,height:h,x:f,y:m}=o(this,et);s=f+s*d,r=m+r*h}const i=o(this,et).parent.boundingClientRect,{x:a,y:l,width:c,height:u}=i;o(this,et)._uiManager.editComment(o(this,et),a+s*c,l+r*u,{...e,parentDimensions:i})}finish(){o(this,ur)&&(o(this,ur).focus({focusVisible:o(this,mc)}),g(this,mc,!1))}isDeleted(){return o(this,vc)||o(this,Dr)===""}isEmpty(){return o(this,Dr)===null}hasBeenEdited(){return this.isDeleted()||o(this,Dr)!==o(this,Nm)}serialize(){return this.data}get data(){return{text:o(this,Dr),richText:o(this,gc),date:o(this,yc),deleted:this.isDeleted()}}set data(e){if(e!==o(this,Dr)&&g(this,gc,null),e===null){g(this,Dr,""),g(this,vc,!0);return}g(this,Dr,e),g(this,yc,new Date),g(this,vc,!1)}setInitialText(e,t=null){g(this,Nm,e),this.data=e,g(this,yc,null),g(this,gc,t)}shown(){}destroy(){var e,t;(e=o(this,ur))==null||e.remove(),g(this,ur,null),(t=o(this,cn))==null||t.remove(),g(this,cn,null),g(this,Dr,""),g(this,gc,null),g(this,yc,null),g(this,et,null),g(this,mc,!1),g(this,vc,!1)}}cn=new WeakMap,ur=new WeakMap,mc=new WeakMap,et=new WeakMap,Nm=new WeakMap,gc=new WeakMap,Dr=new WeakMap,yc=new WeakMap,vc=new WeakMap,wc=new WeakMap,Rm=new WeakSet,Tb=function(e,t){if(!o(this,et)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[o(this,et)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=o(this,et)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",kr,{signal:s}),t&&(e.addEventListener("focusin",i=>{o(this,et)._focusEventsAllowed=!1,Tt(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{o(this,et)._focusEventsAllowed=!0,Tt(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===o(this,ur)?this.edit():o(this,et).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(g(this,mc,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{o(this,et).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{o(this,et).toggleComment(!1,!1)},{signal:s}),e};var nh,xc,Mm,Dm,Lm,Fm,Om,aa,bc,oa,Sc,la,Ml,MN,DN,LN;const gE=class gE{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:l}){S(this,Ml);S(this,nh);S(this,xc,!1);S(this,Mm,null);S(this,Dm);S(this,Lm);S(this,Fm);S(this,Om);S(this,aa,null);S(this,bc);S(this,oa,null);S(this,Sc);S(this,la,null);g(this,nh,e),g(this,Mm,s),g(this,Dm,t),g(this,Lm,r),g(this,Fm,i),g(this,Om,a),g(this,Sc,new AbortController),g(this,bc,AbortSignal.any([l,o(this,Sc).signal])),e.addEventListener("touchstart",E(this,Ml,MN).bind(this),{passive:!1,signal:o(this,bc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Bi.pixelRatio}destroy(){var e,t;(e=o(this,Sc))==null||e.abort(),g(this,Sc,null),(t=o(this,aa))==null||t.abort(),g(this,aa,null)}};nh=new WeakMap,xc=new WeakMap,Mm=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Fm=new WeakMap,Om=new WeakMap,aa=new WeakMap,bc=new WeakMap,oa=new WeakMap,Sc=new WeakMap,la=new WeakMap,Ml=new WeakSet,MN=function(e){var r,i,a;if((r=o(this,Dm))!=null&&r.call(this))return;if(e.touches.length===1){if(o(this,aa))return;const l=g(this,aa,new AbortController),c=AbortSignal.any([o(this,bc),l.signal]),u=o(this,nh),d={capture:!0,signal:c,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=o(this,aa))==null||m.abort(),g(this,aa,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Tt(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!o(this,la)){g(this,la,new AbortController);const l=AbortSignal.any([o(this,bc),o(this,la).signal]),c=o(this,nh),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",E(this,Ml,DN).bind(this),u);const d=E(this,Ml,LN).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",Tt,u),c.addEventListener("pointermove",Tt,u),c.addEventListener("pointercancel",Tt,u),c.addEventListener("pointerup",Tt,u),(i=o(this,Lm))==null||i.call(this)}if(Tt(e),e.touches.length!==2||(a=o(this,Mm))!=null&&a.call(this)){g(this,oa,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),g(this,oa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},DN=function(e){var k;if(!o(this,oa)||e.touches.length!==2)return;Tt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:l}=s,c=o(this,oa),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,m=h-u,y=f-d,v=a-r,A=l-i,w=Math.hypot(v,A)||1,x=Math.hypot(m,y)||1;if(!o(this,xc)&&Math.abs(x-w)<=gE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=a,c.touch1Y=l,!o(this,xc)){g(this,xc,!0);return}const b=[(r+a)/2,(i+l)/2];(k=o(this,Fm))==null||k.call(this,b,x,w)},LN=function(e){var t;e.touches.length>=2||(o(this,la)&&(o(this,la).abort(),g(this,la,null),(t=o(this,Om))==null||t.call(this)),o(this,oa)&&(Tt(e),g(this,oa,null),g(this,xc,!1)))};let Fv=gE;var Ac,Lr,ct,Xe,ca,sh,Io,jm,un,Ec,ua,dr,Bo,Im,kc,ks,Bm,Cc,da,wi,rh,ih,hr,_c,Um,Qv,he,Pb,$m,Nb,ky,FN,ON,Rb,Cy,Mb,jN,IN,BN,Db,UN,Lb,$N,zN,HN,Fb,lp;const me=class me{constructor(e){S(this,he);S(this,Ac,null);S(this,Lr,null);S(this,ct,null);S(this,Xe,null);S(this,ca,null);S(this,sh,!1);S(this,Io,null);S(this,jm,"");S(this,un,null);S(this,Ec,null);S(this,ua,null);S(this,dr,null);S(this,Bo,null);S(this,Im,"");S(this,kc,!1);S(this,ks,null);S(this,Bm,!1);S(this,Cc,!1);S(this,da,!1);S(this,wi,null);S(this,rh,0);S(this,ih,0);S(this,hr,null);S(this,_c,null);H(this,"isSelected",!1);H(this,"_isCopy",!1);H(this,"_editToolbar",null);H(this,"_initialOptions",Object.create(null));H(this,"_initialData",null);H(this,"_isVisible",!0);H(this,"_uiManager",null);H(this,"_focusEventsAllowed",!0);S(this,Um,!1);S(this,Qv,me._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=me.prototype._resizeWithKeyboard,t=Fu.TRANSLATE_SMALL,s=Fu.TRANSLATE_BIG;return pe(this,"_resizerKeyboardManager",new b0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],me.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new sB({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(me._l10n??(me._l10n=e),me._l10nResizer||(me._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),me._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);me._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Um)}set _isDraggable(e){var t;g(this,Um,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,Qv)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(E(this,he,lp).call(this),(t=o(this,dr))==null||t.remove(),g(this,dr,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(o(this,kc)?g(this,kc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,a]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){E(this,he,Pb).call(this,this.parentDimensions,e,t)}translateInPage(e,t){o(this,ks)||g(this,ks,[this.x,this.y,this.width,this.height]),E(this,he,Pb).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){o(this,ks)||g(this,ks,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,u]=this.getBaseTranslation();a+=c,l+=u;const{style:d}=s;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!o(this,ks)&&(o(this,ks)[0]!==this.x||o(this,ks)[1]!==this.y)}get _hasBeenResized(){return!!o(this,ks)&&(o(this,ks)[2]!==this.width||o(this,ks)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=me,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:a,width:l,height:c}=this;if(l*=s,c*=r,i*=s,a*=r,this._mustFixPosition)switch(e){case 0:i=Wn(i,0,s-l),a=Wn(a,0,r-c);break;case 90:i=Wn(i,0,s-c),a=Wn(a,l,r);break;case 180:i=Wn(i,l,s),a=Wn(a,c,r);break;case 270:i=Wn(i,c,s),a=Wn(a,0,r-l);break}this.x=i/=s,this.y=a/=r;const[u,d]=this.getBaseTranslation();i+=u,a+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=me,$m,Nb).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=me,$m,Nb).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=o(this,ct))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||o(this,Cc))return this._editToolbar;this._editToolbar=new xb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=o(this,ct))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return o(this,ct)||(Lv.initialize(me._l10n),g(this,ct,new Lv(this)),o(this,Ac)&&(o(this,ct).data=o(this,Ac),g(this,Ac,null))),o(this,ct)}get altTextData(){var e;return(e=o(this,ct))==null?void 0:e.data}set altTextData(e){o(this,ct)&&(o(this,ct).data=e)}get guessedAltText(){var e;return(e=o(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=o(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=o(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!o(this,ct)&&!o(this,ct).isEmpty()}hasAltTextData(){var e;return((e=o(this,ct))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=o(this,Xe))==null||e.focusButton()}addCommentButton(){return this.canAddComment?o(this,Xe)||g(this,Xe,new G0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(o(this,ca)){this._uiManager.isEditingMode()&&o(this,ca).classList.remove("hidden");return}this.hasComment&&(g(this,ca,o(this,Xe).renderForStandalone()),this.div.append(o(this,ca)))}}removeStandaloneCommentButton(){o(this,Xe).removeStandaloneCommentButton(),g(this,ca,null)}hideStandaloneCommentButton(){var e;(e=o(this,ca))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=o(this,Xe);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){o(this,Xe)||g(this,Xe,new G0(this)),o(this,Xe).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(o(this,Xe)||g(this,Xe,new G0(this)),o(this,Xe).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=o(this,Xe))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=o(this,Xe))==null?void 0:e.isDeleted()}get hasComment(){return!!o(this,Xe)&&!o(this,Xe).isEmpty()&&!o(this,Xe).isDeleted()}async editComment(e){o(this,Xe)||g(this,Xe,new G0(this)),o(this,Xe).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){o(this,Xe).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,l=a+i+1,c=r-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){o(this,Xe).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=o(this,sh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,he,Lb).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),vN(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,_c)||g(this,_c,new Fv({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,he,jN).bind(this),onPinching:E(this,he,IN).bind(this),onPinchEnd:E(this,he,BN).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(g(this,kc,!0),this._isDraggable){E(this,he,UN).call(this,e);return}E(this,he,Db).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,wi)&&clearTimeout(o(this,wi)),g(this,wi,setTimeout(()=>{var e;g(this,wi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/r,d=t/r,h=this.x*i,f=this.y*a,m=this.width*i,y=this.height*a;switch(s){case 0:return[h+u+l,a-f-d-y+c,h+u+m+l,a-f-d+c];case 90:return[h+d+l,a-f+u+c,h+d+y+l,a-f+u+m+c];case 180:return[h-u-m+l,a-f+d+c,h-u+l,a-f+d+y+c];case 270:return[h-d-y+l,a-f-u-m+c,h-d+l,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,a]=e,l=i-s,c=a-r;switch(this.rotation){case 0:return[s,t-a,l,c];case 90:return[s,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&me._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=o(this,Xe))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:a},uid:l,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:u,modificationDate:s||d,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),g(this,Cc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),g(this,Cc,!1),!0):!1}isInEditMode(){return o(this,Cc)}shouldGetKeyboardEvents(){return o(this,da)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&s>0}rebuild(){E(this,he,Lb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,g(r,Ac,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,a]=r.pageDimensions,[l,c,u,d]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/i,r.y=c/a,r.width=u/i,r.height=d/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,s;if((e=o(this,Bo))==null||e.abort(),g(this,Bo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),o(this,wi)&&(clearTimeout(o(this,wi)),g(this,wi,null)),E(this,he,lp).call(this),this.removeEditToolbar(),o(this,hr)){for(const r of o(this,hr).values())clearTimeout(r);g(this,hr,null)}this.parent=null,(t=o(this,_c))==null||t.destroy(),g(this,_c,null),(s=o(this,dr))==null||s.remove(),g(this,dr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,he,FN).call(this),o(this,un).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,a]=this.getPDFRect();return[me._round(s+(i-s)*e),me._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return o(this,Xe).commentPopupPositionInLayer}set commentPopupPosition(e){o(this,Xe).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return o(this,Xe).hasDefaultPopupPosition()}get commentButtonWidth(){return o(this,Xe).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=o(this,Xe))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),g(this,ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=o(this,un).children;if(!o(this,Lr)){g(this,Lr,Array.from(t));const a=E(this,he,$N).bind(this),l=E(this,he,zN).bind(this),c=this._uiManager._signal;for(const u of o(this,Lr)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",E(this,he,HN).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",me._l10nResizer[d])}}const s=o(this,Lr)[0];let r=0;for(const a of t){if(a===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(o(this,Lr).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)o(this,un).append(o(this,un).firstElementChild);else if(i>r)for(let l=0;l<i-r;l++)o(this,un).firstElementChild.before(o(this,un).lastElementChild);let a=0;for(const l of t){const u=o(this,Lr)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",me._l10nResizer[u])}}E(this,he,Fb).call(this,0),g(this,da,!0),o(this,un).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){o(this,da)&&E(this,he,Mb).call(this,o(this,Im),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,he,lp).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=o(this,ct))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=o(this,un))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=o(this,ct))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return o(this,Bm)}set isEditing(e){g(this,Bm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){o(this,hr)||g(this,hr,new Map);const{action:s}=e;let r=o(this,hr).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),o(this,hr).delete(s),o(this,hr).size===0&&g(this,hr,null)},me._telemetryTimeout),o(this,hr).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),g(this,sh,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,sh,!0)}updateFakeAnnotationElement(e){if(!o(this,dr)&&!this.deleted){g(this,dr,e.addFakeAnnotation(this));return}if(this.deleted){o(this,dr).remove(),g(this,dr,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&o(this,dr).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ac=new WeakMap,Lr=new WeakMap,ct=new WeakMap,Xe=new WeakMap,ca=new WeakMap,sh=new WeakMap,Io=new WeakMap,jm=new WeakMap,un=new WeakMap,Ec=new WeakMap,ua=new WeakMap,dr=new WeakMap,Bo=new WeakMap,Im=new WeakMap,kc=new WeakMap,ks=new WeakMap,Bm=new WeakMap,Cc=new WeakMap,da=new WeakMap,wi=new WeakMap,rh=new WeakMap,ih=new WeakMap,hr=new WeakMap,_c=new WeakMap,Um=new WeakMap,Qv=new WeakMap,he=new WeakSet,Pb=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},$m=new WeakSet,Nb=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},ky=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},FN=function(){if(o(this,un))return;g(this,un,document.createElement("div")),o(this,un).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");o(this,un).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",E(this,he,ON).bind(this,s),{signal:t}),r.addEventListener("contextmenu",kr,{signal:t}),r.tabIndex=-1}this.div.prepend(o(this,un))},ON=function(e,t){var d;t.preventDefault();const{isMac:s}=xn.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=o(this,ct))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,g(this,Ec,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,he,Mb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Tt,{passive:!1,signal:a}),window.addEventListener("contextmenu",kr,{signal:a}),g(this,ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=o(this,ct))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,E(this,he,Cy).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Rb=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Cy=function(){if(!o(this,ua))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=o(this,ua);g(this,ua,null);const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===s&&c===r||this.addCommands({cmd:E(this,he,Rb).bind(this,i,a,l,c),undo:E(this,he,Rb).bind(this,e,t,s,r),mustExec:!0})},Mb=function(e,t){const[s,r]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,u=me.MIN_SIZE/s,d=me.MIN_SIZE/r,h=E(this,he,ky).call(this,this.rotation),f=(V,Y)=>[h[0]*V+h[2]*Y,h[1]*V+h[3]*Y],m=E(this,he,ky).call(this,360-this.rotation),y=(V,Y)=>[m[0]*V+m[2]*Y,m[1]*V+m[3]*Y];let v,A,w=!1,x=!1;switch(e){case"topLeft":w=!0,v=(V,Y)=>[0,0],A=(V,Y)=>[V,Y];break;case"topMiddle":v=(V,Y)=>[V/2,0],A=(V,Y)=>[V/2,Y];break;case"topRight":w=!0,v=(V,Y)=>[V,0],A=(V,Y)=>[0,Y];break;case"middleRight":x=!0,v=(V,Y)=>[V,Y/2],A=(V,Y)=>[0,Y/2];break;case"bottomRight":w=!0,v=(V,Y)=>[V,Y],A=(V,Y)=>[0,0];break;case"bottomMiddle":v=(V,Y)=>[V/2,Y],A=(V,Y)=>[V/2,0];break;case"bottomLeft":w=!0,v=(V,Y)=>[0,Y],A=(V,Y)=>[V,0];break;case"middleLeft":x=!0,v=(V,Y)=>[0,Y/2],A=(V,Y)=>[V,Y/2];break}const b=v(l,c),k=A(l,c);let _=f(...k);const T=me._round(i+_[0]),N=me._round(a+_[1]);let M=1,F=1,D,j;if(t.fromKeyboard)({deltaX:D,deltaY:j}=t);else{const{screenX:V,screenY:Y}=t,[P,U]=o(this,Ec);[D,j]=this.screenToPageTranslation(V-P,Y-U),o(this,Ec)[0]=V,o(this,Ec)[1]=Y}if([D,j]=y(D/s,j/r),w){const V=Math.hypot(l,c);M=F=Math.max(Math.min(Math.hypot(k[0]-b[0]-D,k[1]-b[1]-j)/V,1/l,1/c),u/l,d/c)}else x?M=Wn(Math.abs(k[0]-b[0]-D),u,1)/l:F=Wn(Math.abs(k[1]-b[1]-j),d,1)/c;const B=me._round(l*M),z=me._round(c*F);_=f(...A(B,z));const q=T-_[0],te=N-_[1];o(this,ks)||g(this,ks,[this.x,this.y,this.width,this.height]),this.width=B,this.height=z,this.x=q,this.y=te,this.setDims(),this.fixAndSetPosition(),this._onResizing()},jN=function(){var e;g(this,ua,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=o(this,ct))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},IN=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const a=E(this,he,ky).call(this,this.rotation),l=(T,N)=>[a[0]*T+a[2]*N,a[1]*T+a[3]*N],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,m=this.height,y=me.MIN_SIZE/c,v=me.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/m),y/f,v/m);const A=me._round(f*i),w=me._round(m*i);if(A===f&&w===m)return;o(this,ks)||g(this,ks,[d,h,f,m]);const x=l(f/2,m/2),b=me._round(d+x[0]),k=me._round(h+x[1]),_=l(A/2,w/2);this.x=b-_[0],this.y=k-_[1],this.width=A,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()},BN=function(){var e;(e=o(this,ct))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,he,Cy).call(this)},Db=function(e){const{isMac:t}=xn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},UN=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},l=u=>{r.abort(),g(this,Io,null),g(this,kc,!1),this._uiManager.endDragSession()||E(this,he,Db).call(this,u),s&&this._onStopDragging()};t&&(g(this,rh,e.clientX),g(this,ih,e.clientY),g(this,Io,e.pointerId),g(this,jm,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==o(this,Io)){Tt(u);return}const[m,y]=this.screenToPageTranslation(d-o(this,rh),h-o(this,ih));g(this,rh,d),g(this,ih,h),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",Tt,a),window.addEventListener("pointerdown",u=>{u.pointerType===o(this,jm)&&(o(this,_c)||u.isPrimary)&&l(u),Tt(u)},a));const c=u=>{if(!o(this,Io)||o(this,Io)===u.pointerId){l(u);return}Tt(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Lb=function(){if(o(this,Bo)||!this.div)return;g(this,Bo,new AbortController);const e=this._uiManager.combinedSignal(o(this,Bo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},$N=function(e){me._resizerKeyboardManager.exec(this,e)},zN=function(e){var t;o(this,da)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==o(this,un)&&E(this,he,lp).call(this)},HN=function(e){g(this,Im,o(this,da)?e:"")},Fb=function(e){if(o(this,Lr))for(const t of o(this,Lr))t.tabIndex=e},lp=function(){g(this,da,!1),E(this,he,Fb).call(this,-1),E(this,he,Cy).call(this)},S(me,$m),H(me,"_l10n",null),H(me,"_l10nResizer",null),H(me,"_borderLineWidth",-1),H(me,"_colorManager",new Ab),H(me,"_zIndex",1),H(me,"_telemetryTimeout",1e3);let nt=me;class sB extends nt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const $k=3285377520,tr=4294901760,ri=65535;class VN{constructor(e){this.h1=e?e&4294967295:$k,this.h2=e?e&4294967295:$k}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,A=e.length;v<A;v++){const w=e.charCodeAt(v);w<=255?t[s++]=w:(t[s++]=w>>>8,t[s++]=w&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,m=h&ri,y=f&ri;for(let v=0;v<r;v++)v&1?(l=a[v],l=l*h&tr|l*m&ri,l=l<<15|l>>>17,l=l*f&tr|l*y&ri,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[v],c=c*h&tr|c*m&ri,c=c<<15|c>>>17,c=c*f&tr|c*y&ri,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*h&tr|l*m&ri,l=l<<15|l>>>17,l=l*f&tr|l*y&ri,r&1?u^=l:d^=l}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&tr|e*36045&ri,t=t*4283543511&tr|((t<<16|e>>>16)*2950163797&tr)>>>16,e^=t>>>1,e=e*444984403&tr|e*60499&ri,t=t*3301882366&tr|((t<<16|e>>>16)*3120437893&tr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ob=Object.freeze({map:null,hash:"",transfer:void 0});var Tc,Pc,ha,dn,Zv,WN;class oE{constructor(){S(this,Zv);S(this,Tc,!1);S(this,Pc,null);S(this,ha,null);S(this,dn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=o(this,dn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return o(this,dn).get(e)}remove(e){const t=o(this,dn).get(e);if(t!==void 0&&(t instanceof nt&&o(this,ha).delete(t.annotationElementId),o(this,dn).delete(e),o(this,dn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of o(this,dn).values())if(s instanceof nt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=o(this,dn).get(e);let r=!1;if(s!==void 0)for(const[i,a]of Object.entries(t))s[i]!==a&&(r=!0,s[i]=a);else r=!0,o(this,dn).set(e,t);r&&E(this,Zv,WN).call(this),t instanceof nt&&((o(this,ha)||g(this,ha,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return o(this,dn).has(e)}get size(){return o(this,dn).size}resetModified(){o(this,Tc)&&(g(this,Tc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new qN(this)}get serializable(){if(o(this,dn).size===0)return Ob;const e=new Map,t=new VN,s=[],r=Object.create(null);let i=!1;for(const[a,l]of o(this,dn)){const c=l instanceof nt?l.serialize(!1,r):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Ob}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of o(this,dn).values()){if(!(i instanceof nt)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:l}=a;t.has(l)||t.set(l,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[u,d]of Object.entries(a)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){g(this,Pc,null)}updateEditor(e,t){var r;const s=(r=o(this,ha))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=o(this,ha))==null?void 0:t.get(e))||null}get modifiedIds(){if(o(this,Pc))return o(this,Pc);const e=[];if(o(this,ha))for(const t of o(this,ha).values())t.serialize()&&e.push(t.annotationElementId);return g(this,Pc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return o(this,dn).entries()}}Tc=new WeakMap,Pc=new WeakMap,ha=new WeakMap,dn=new WeakMap,Zv=new WeakSet,WN=function(){o(this,Tc)||(g(this,Tc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var zm;class qN extends oE{constructor(t){super();S(this,zm);const{map:s,hash:r,transfer:i}=t.serializable,a=structuredClone(s,i?{transfer:i}:null);g(this,zm,{map:a,hash:r,transfer:i})}get print(){Qe("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,zm)}get modifiedIds(){return pe(this,"modifiedIds",{ids:new Set,hash:""})}}zm=new WeakMap;var ah;class rB{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,ah,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),o(this,ah).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||o(this,ah).has(e.loadedName))){if(Ce(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:a}=e,l=new FontFace(r,i,a);this.addNativeFontFace(l);try{await l.load(),o(this,ah).add(r),s==null||s(e)}catch{fe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Qe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw fe(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return pe(this,"isSyncFontLoadingSupported",Vn||xn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ce(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(k,_){return k.charCodeAt(_)<<24|k.charCodeAt(_+1)<<16|k.charCodeAt(_+2)<<8|k.charCodeAt(_+3)&255}function r(k,_,T,N){const M=k.substring(0,_),F=k.substring(_+T);return M+N+F}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function d(k,_){if(++u>30){fe("Load test font never loaded."),_();return}if(c.font="30px "+k,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,k,_))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const y=16,v=1482184792;let A=s(f,y);for(i=0,a=h.length-3;i<a;i+=4)A=A-v+s(h,i)|0;i<h.length&&(A=A-v+s(h+"XXX",i)|0),f=r(f,y,4,I4(A));const w=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${h}";src:${w}}`;this.insertRule(x);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const k of[e.loadedName,h]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=k,b.append(_)}this._document.body.append(b),d(h,()=>{b.remove(),t.complete()})}}ah=new WeakMap;var He;class iB{constructor(e,t=null,s,r){S(this,He);this.compiledGlyphs=Object.create(null),g(this,He,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${cN(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(a){fe(`getPathGenerator - ignoring character: "${a}".`)}const i=hN(r);return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return o(this,He).black}get bold(){return o(this,He).bold}get disableFontFace(){return o(this,He).disableFontFace??!1}set disableFontFace(e){pe(this,"disableFontFace",!!e)}get fontExtraProperties(){return o(this,He).fontExtraProperties??!1}get isInvalidPDFjsFont(){return o(this,He).isInvalidPDFjsFont}get isType3Font(){return o(this,He).isType3Font}get italic(){return o(this,He).italic}get missingFile(){return o(this,He).missingFile}get remeasure(){return o(this,He).remeasure}get vertical(){return o(this,He).vertical}get ascent(){return o(this,He).ascent}get defaultWidth(){return o(this,He).defaultWidth}get descent(){return o(this,He).descent}get bbox(){return o(this,He).bbox}set bbox(e){pe(this,"bbox",e)}get fontMatrix(){return o(this,He).fontMatrix}get fallbackName(){return o(this,He).fallbackName}get loadedName(){return o(this,He).loadedName}get mimetype(){return o(this,He).mimetype}get name(){return o(this,He).name}get data(){return o(this,He).data}clearData(){o(this,He).clearData()}get cssFontInfo(){return o(this,He).cssFontInfo}get systemFontInfo(){return o(this,He).systemFontInfo}get defaultVMetrics(){return o(this,He).defaultVMetrics}}He=new WeakMap;var oh,lh,Hm,ch,_y;const yd=class yd{constructor(e){S(this,ch);S(this,oh);S(this,lh);S(this,Hm);g(this,oh,e),g(this,lh,new DataView(o(this,oh))),g(this,Hm,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of yd.strings){const d=t.encode(e[u]);s[u]=d,r+=4+d.length}const i=new ArrayBuffer(r),a=new Uint8Array(i),l=new DataView(i);let c=0;for(const u of yd.strings){const d=s[u],h=d.length;l.setUint32(c,h),a.set(d,c+4),c+=4+h}return Ce(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return E(this,ch,_y).call(this,0)}get fontWeight(){return E(this,ch,_y).call(this,1)}get italicAngle(){return E(this,ch,_y).call(this,2)}};oh=new WeakMap,lh=new WeakMap,Hm=new WeakMap,ch=new WeakSet,_y=function(e){Ce(e<yd.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=o(this,lh).getUint32(t)+4;const s=o(this,lh).getUint32(t);return o(this,Hm).decode(new Uint8Array(o(this,oh),t+4,s))},H(yd,"strings",["fontFamily","fontWeight","italicAngle"]);let Ov=yd;var Uo,xi,Nc,Rc,cp;const vd=class vd{constructor(e){S(this,Rc);S(this,Uo);S(this,xi);S(this,Nc);g(this,Uo,e),g(this,xi,new DataView(o(this,Uo))),g(this,Nc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const f of vd.strings){const m=t.encode(e[f]);s[f]=m,r+=4+m.length}r+=4;let i,a,l=1+r;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),l+=4+i.length+4+a.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,r=0;for(const f of vd.strings){const m=s[f],y=m.length;r+=4+y,d.setUint32(h,y),u.set(m,h+4),h+=4+y}return d.setUint32(h-r-4,r),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length),Ce(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return o(this,xi).getUint8(0)!==0}get css(){return E(this,Rc,cp).call(this,0)}get loadedName(){return E(this,Rc,cp).call(this,1)}get baseFontName(){return E(this,Rc,cp).call(this,2)}get src(){return E(this,Rc,cp).call(this,3)}get style(){let e=1;e+=4+o(this,xi).getUint32(e);const t=o(this,xi).getUint32(e),s=o(this,Nc).decode(new Uint8Array(o(this,Uo),e+4,t));e+=4+t;const r=o(this,xi).getUint32(e),i=o(this,Nc).decode(new Uint8Array(o(this,Uo),e+4,r));return{style:s,weight:i}}};Uo=new WeakMap,xi=new WeakMap,Nc=new WeakMap,Rc=new WeakSet,cp=function(e){Ce(e<vd.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=o(this,xi).getUint32(t)+4;const s=o(this,xi).getUint32(t);return o(this,Nc).decode(new Uint8Array(o(this,Uo),t+4,s))},H(vd,"strings",["css","loadedName","baseFontName","src"]);let jv=vd;var uh,dh,hh,fh,Cs,bi,Vm,Ve,Ct,_r,Ty,up;const ye=class ye{constructor({data:e,extra:t}){S(this,Ct);S(this,bi);S(this,Vm);S(this,Ve);g(this,bi,e),g(this,Vm,new TextDecoder),g(this,Ve,new DataView(o(this,bi))),t&&Object.assign(this,t)}get black(){return E(this,Ct,_r).call(this,0)}get bold(){return E(this,Ct,_r).call(this,1)}get disableFontFace(){return E(this,Ct,_r).call(this,2)}get fontExtraProperties(){return E(this,Ct,_r).call(this,3)}get isInvalidPDFjsFont(){return E(this,Ct,_r).call(this,4)}get isType3Font(){return E(this,Ct,_r).call(this,5)}get italic(){return E(this,Ct,_r).call(this,6)}get missingFile(){return E(this,Ct,_r).call(this,7)}get remeasure(){return E(this,Ct,_r).call(this,8)}get vertical(){return E(this,Ct,_r).call(this,9)}get ascent(){return E(this,Ct,Ty).call(this,0)}get defaultWidth(){return E(this,Ct,Ty).call(this,1)}get descent(){return E(this,Ct,Ty).call(this,2)}get bbox(){let e=o(ye,dh);if(o(this,Ve).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(o(this,Ve).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=o(ye,hh);if(o(this,Ve).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(o(this,Ve).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=o(ye,fh);if(o(this,Ve).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(o(this,Ve).getInt16(e,!0)),e+=2;return s}get fallbackName(){return E(this,Ct,up).call(this,0)}get loadedName(){return E(this,Ct,up).call(this,1)}get mimetype(){return E(this,Ct,up).call(this,2)}get name(){return E(this,Ct,up).call(this,3)}get data(){let e=o(ye,Cs);const t=o(this,Ve).getUint32(e);e+=4+t;const s=o(this,Ve).getUint32(e);e+=4+s;const r=o(this,Ve).getUint32(e);e+=4+r;const i=o(this,Ve).getUint32(e);if(i!==0)return new Uint8Array(o(this,bi),e+4,i)}clearData(){let e=o(ye,Cs);const t=o(this,Ve).getUint32(e);e+=4+t;const s=o(this,Ve).getUint32(e);e+=4+s;const r=o(this,Ve).getUint32(e);e+=4+r;const i=o(this,Ve).getUint32(e);new Uint8Array(o(this,bi),e+4,i).fill(0),o(this,Ve).setUint32(e,0)}get cssFontInfo(){let e=o(ye,Cs);const t=o(this,Ve).getUint32(e);e+=4+t;const s=o(this,Ve).getUint32(e);e+=4+s;const r=o(this,Ve).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(o(this,bi),e+4,r)),new Ov(i.buffer)}get systemFontInfo(){let e=o(ye,Cs);const t=o(this,Ve).getUint32(e);e+=4+t;const s=o(this,Ve).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(o(this,bi),e+4,s)),new jv(r.buffer)}static write(e){const t=e.systemFontInfo?jv.write(e.systemFontInfo):null,s=e.cssFontInfo?Ov.write(e.cssFontInfo):null,r=new TextEncoder,i={};let a=0;for(const v of ye.strings)i[v]=r.encode(e[v]),a+=4+i[v].length;const l=o(ye,Cs)+4+a+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=ye.bools.length;let m=0,y=0;for(let v=0;v<f;v++){const A=e[ye.bools[v]];m|=(A===void 0?0:A?2:1)<<y,y+=2,(y===8||v===f-1)&&(d.setUint8(h++,m),m=0,y=0)}Ce(h===o(ye,uh),"FontInfo.write: Boolean properties offset mismatch");for(const v of ye.numbers)d.setFloat64(h,e[v]),h+=8;if(Ce(h===o(ye,dh),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const v of e.bbox)d.setInt16(h,v,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(Ce(h===o(ye,hh),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const v of e.fontMatrix)d.setFloat64(h,v,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(Ce(h===o(ye,fh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const v of e.defaultVMetrics)d.setInt16(h,v,!0),h+=2}else d.setUint8(h++,0),h+=3*2;Ce(h===o(ye,Cs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(o(ye,Cs),0),h+=4;for(const v of ye.strings){const A=i[v],w=A.length;d.setUint32(h,w),u.set(A,h+4),h+=4+w}if(d.setUint32(o(ye,Cs),h-o(ye,Cs)-4),!t)d.setUint32(h,0),h+=4;else{const v=t.byteLength;d.setUint32(h,v),Ce(h+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+v}if(!s)d.setUint32(h,0),h+=4;else{const v=s.byteLength;d.setUint32(h,v),Ce(h+4+v<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),h+4),h+=4+v}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Ce(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};uh=new WeakMap,dh=new WeakMap,hh=new WeakMap,fh=new WeakMap,Cs=new WeakMap,bi=new WeakMap,Vm=new WeakMap,Ve=new WeakMap,Ct=new WeakSet,_r=function(e){Ce(e<ye.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=o(this,Ve).getUint8(t)>>s&3;return r===0?void 0:r===2},Ty=function(e){return Ce(e<ye.numbers.length,"Invalid number index"),o(this,Ve).getFloat64(o(ye,uh)+e*8)},up=function(e){Ce(e<ye.strings.length,"Invalid string index");let t=o(ye,Cs)+4;for(let i=0;i<e;i++)t+=o(this,Ve).getUint32(t)+4;const s=o(this,Ve).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(o(this,bi),t+4,s)),o(this,Vm).decode(r)},H(ye,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),H(ye,"numbers",["ascent","defaultWidth","descent"]),H(ye,"strings",["fallbackName","loadedName","mimetype","name"]),S(ye,uh,Math.ceil(ye.bools.length*2/8)),S(ye,dh,o(ye,uh)+ye.numbers.length*8),S(ye,hh,o(ye,dh)+1+2*4),S(ye,fh,o(ye,hh)+1+8*6),S(ye,Cs,o(ye,fh)+1+2*3);let jb=ye;var Wm,qm,Gm,Xm,Ym,Km,Qm,Zm;const Je=class Je{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,s=null,r=[],i=[],a=[],l=[],c=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,s=e[2],a=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],r=e[2],i=e[3],l=e[4]||[],s=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const d=Math.floor(r.length/2),h=Math.floor(i.length/3),f=a.length,m=l.length;let y=0;for(const _ of l)y+=1,y=Math.ceil(y/4)*4,y+=4+_.coords.length*4,y+=4+_.colors.length*4,_.verticesPerRow!==void 0&&(y+=4);const v=20+d*8+h*3+f*8+(s?16:0)+(u?3:0)+y,A=new ArrayBuffer(v),w=new DataView(A),x=new Uint8Array(A);w.setUint8(o(Je,Wm),t),w.setUint8(o(Je,qm),s?1:0),w.setUint8(o(Je,Gm),u?1:0),w.setUint8(o(Je,Xm),c),w.setUint32(o(Je,Ym),d,!0),w.setUint32(o(Je,Km),h,!0),w.setUint32(o(Je,Qm),f,!0),w.setUint32(o(Je,Zm),m,!0);let b=20;new Float32Array(A,b,d*2).set(r),b+=d*8,x.set(i,b),b+=h*3;for(const[_,T]of a)w.setFloat32(b,_,!0),b+=4,w.setUint32(b,parseInt(T.slice(1),16),!0),b+=4;if(s)for(const _ of s)w.setFloat32(b,_,!0),b+=4;u&&(x.set(u,b),b+=3);for(let _=0;_<l.length;_++){const T=l[_];w.setUint8(b,T.type),b+=1,b=Math.ceil(b/4)*4,w.setUint32(b,T.coords.length,!0),b+=4,new Int32Array(A,b,T.coords.length).set(T.coords),b+=T.coords.length*4,w.setUint32(b,T.colors.length,!0),b+=4,new Int32Array(A,b,T.colors.length).set(T.colors),b+=T.colors.length*4,T.verticesPerRow!==void 0&&(w.setUint32(b,T.verticesPerRow,!0),b+=4)}return A}getIR(){const e=this.view,t=this.data[o(Je,Wm)],s=!!this.data[o(Je,qm)],r=!!this.data[o(Je,Gm)],i=e.getUint32(o(Je,Ym),!0),a=e.getUint32(o(Je,Km),!0),l=e.getUint32(o(Je,Qm),!0),c=e.getUint32(o(Je,Zm),!0);let u=20;const d=new Float32Array(this.buffer,u,i*2);u+=i*8;const h=new Uint8Array(this.buffer,u,a*3);u+=a*3;const f=[];for(let A=0;A<l;++A){const w=e.getFloat32(u,!0);u+=4;const x=e.getUint32(u,!0);u+=4,f.push([w,`#${x.toString(16).padStart(6,"0")}`])}let m=null;if(s){m=[];for(let A=0;A<4;++A)m.push(e.getFloat32(u,!0)),u+=4}let y=null;r&&(y=new Uint8Array(this.buffer,u,3),u+=3);const v=[];for(let A=0;A<c;++A){const w=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const x=e.getUint32(u,!0);u+=4;const b=new Int32Array(this.buffer,u,x);u+=x*4;const k=e.getUint32(u,!0);u+=4;const _=new Int32Array(this.buffer,u,k);u+=k*4;const T={type:w,coords:b,colors:_};w===mb.LATTICE&&(T.verticesPerRow=e.getUint32(u,!0),u+=4),v.push(T)}if(t===1)return["RadialAxial","axial",m,f,Array.from(d.slice(0,2)),Array.from(d.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,f,[d[0],d[1]],[d[3],d[4]],d[2],d[5]];if(t===3){const A=this.data[o(Je,Xm)];let w=null;if(d.length>0){let x=d[0],b=d[0],k=d[1],_=d[1];for(let T=0;T<d.length;T+=2){const N=d[T],M=d[T+1];x=x>N?N:x,k=k>M?M:k,b=b<N?N:b,_=_<M?M:_}w=[x,k,b,_]}return["Mesh",A,d,h,v,w,m,y]}throw new Error(`Unsupported pattern kind: ${t}`)}};Wm=new WeakMap,qm=new WeakMap,Gm=new WeakMap,Xm=new WeakMap,Ym=new WeakMap,Km=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,S(Je,Wm,0),S(Je,qm,1),S(Je,Gm,2),S(Je,Xm,3),S(Je,Ym,4),S(Je,Km,8),S(Je,Qm,12),S(Je,Zm,16);let Ib=Je;function aB(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Vn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oB(n){if(Vn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return y0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function X0(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Bb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,lB=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",cB=H4.bind(null,Bb,lB);var fa,Jv;class uB{constructor(){S(this,fa,new Map);S(this,Jv,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};o(this,Jv).then(()=>{for(const[r]of o(this,fa))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){fe("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}o(this,fa).set(t,r)}removeEventListener(e,t){const s=o(this,fa).get(t);s==null||s(),o(this,fa).delete(t)}terminate(){for(const[,e]of o(this,fa))e==null||e();o(this,fa).clear()}}fa=new WeakMap,Jv=new WeakMap;const Y0={DATA:1,ERROR:2},Dt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function zk(){}function ts(n){if(n instanceof Nl||n instanceof gb||n instanceof Lk||n instanceof Mv||n instanceof Mx)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Nl(n.message);case"InvalidPDFException":return new gb(n.message);case"PasswordException":return new Lk(n.message,n.code);case"ResponseException":return new Mv(n.message,n.status,n.missing);case"UnknownErrorException":return new Mx(n.message,n.details)}return new Mx(n.message,n.toString())}var ph,Sr,GN,XN,YN,Py;class dp{constructor(e,t,s){S(this,Sr);S(this,ph,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,Sr,GN).bind(this),{signal:o(this,ph).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:a,targetName:l,stream:Dt.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Ce(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Dt.CANCEL,streamId:i,reason:ts(u)}),d.promise}},s)}destroy(){var e;(e=o(this,ph))==null||e.abort(),g(this,ph,null)}}ph=new WeakMap,Sr=new WeakSet,GN=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,Sr,YN).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Y0.DATA)r.resolve(e.data);else if(e.callback===Y0.ERROR)r.reject(ts(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:s,targetName:r,callback:Y0.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:s,targetName:r,callback:Y0.ERROR,callbackId:e.callbackId,reason:ts(a)})});return}if(e.streamId){E(this,Sr,XN).call(this,e);return}t(e.data)},XN=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Dt.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Dt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Ce(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Dt.ERROR,streamId:t,reason:ts(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Dt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Dt.START_COMPLETE,streamId:t,reason:ts(u)})})},YN=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Dt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ts(e.reason));break;case Dt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ts(e.reason));break;case Dt.PULL:if(!l){i.postMessage({sourceName:s,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||zk).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,reason:ts(u)})});break;case Dt.ENQUEUE:if(Ce(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Dt.CLOSE:if(Ce(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),E(this,Sr,Py).call(this,a,t);break;case Dt.ERROR:Ce(a,"error should have stream controller"),a.controller.error(ts(e.reason)),E(this,Sr,Py).call(this,a,t);break;case Dt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ts(e.reason)),E(this,Sr,Py).call(this,a,t);break;case Dt.CANCEL:if(!l)break;const c=ts(e.reason);Promise.try(l.onCancel||zk,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Dt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Dt.CANCEL_COMPLETE,streamId:t,reason:ts(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Py=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Jm;class KN{constructor({enableHWA:e=!1}){S(this,Jm,!1);g(this,Jm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!o(this,Jm)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Qe("Abstract method `_createCanvas` called.")}}Jm=new WeakMap;class dB extends KN{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class QN{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Hk extends QN{async _fetch(e){const t=await v0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):y0(t)}}class ZN{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Mc,mh,pa,ma,Pn,Dc,Lc,ee,kn,hp,Ku,Ny,Qu,JN,Ub,Zu,fp,pp,$b,mp;class hB extends ZN{constructor({docId:t,ownerDocument:s=globalThis.document}){super();S(this,ee);S(this,Mc);S(this,mh);S(this,pa);S(this,ma);S(this,Pn);S(this,Dc);S(this,Lc,0);g(this,ma,t),g(this,Pn,s)}addFilter(t){if(!t)return"none";let s=o(this,ee,kn).get(t);if(s)return s;const[r,i,a]=E(this,ee,Ny).call(this,t),l=t.length===1?r:`${r}${i}${a}`;if(s=o(this,ee,kn).get(l),s)return o(this,ee,kn).set(t,s),s;const c=`g_${o(this,ma)}_transfer_map_${xt(this,Lc)._++}`,u=E(this,ee,Qu).call(this,c);o(this,ee,kn).set(t,u),o(this,ee,kn).set(l,u);const d=E(this,ee,Zu).call(this,c);return E(this,ee,pp).call(this,r,i,a,d),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let a=o(this,ee,hp).get(i);if((a==null?void 0:a.key)===r||(a?((y=a.filter)==null||y.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},o(this,ee,hp).set(i,a)),!t||!s))return a.url;const l=E(this,ee,mp).call(this,t);t=re.makeHexColor(...l);const c=E(this,ee,mp).call(this,s);if(s=re.makeHexColor(...c),o(this,ee,Ku).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const u=new Array(256);for(let v=0;v<=255;v++){const A=v/255;u[v]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=u.join(","),h=`g_${o(this,ma)}_hcm_filter`,f=a.filter=E(this,ee,Zu).call(this,h);E(this,ee,pp).call(this,d,d,d,f),E(this,ee,Ub).call(this,f);const m=(v,A)=>{const w=l[v]/255,x=c[v]/255,b=new Array(A+1);for(let k=0;k<=A;k++)b[k]=w+k/A*(x-w);return b.join(",")};return E(this,ee,pp).call(this,m(0,5),m(1,5),m(2,5),f),a.url=E(this,ee,Qu).call(this,h),a.url}addAlphaFilter(t){let s=o(this,ee,kn).get(t);if(s)return s;const[r]=E(this,ee,Ny).call(this,[t]),i=`alpha_${r}`;if(s=o(this,ee,kn).get(i),s)return o(this,ee,kn).set(t,s),s;const a=`g_${o(this,ma)}_alpha_map_${xt(this,Lc)._++}`,l=E(this,ee,Qu).call(this,a);o(this,ee,kn).set(t,l),o(this,ee,kn).set(i,l);const c=E(this,ee,Zu).call(this,a);return E(this,ee,$b).call(this,r,c),l}addLuminosityFilter(t){let s=o(this,ee,kn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=E(this,ee,Ny).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=o(this,ee,kn).get(i),s)return o(this,ee,kn).set(t,s),s;const a=`g_${o(this,ma)}_luminosity_map_${xt(this,Lc)._++}`,l=E(this,ee,Qu).call(this,a);o(this,ee,kn).set(t,l),o(this,ee,kn).set(i,l);const c=E(this,ee,Zu).call(this,a);return E(this,ee,JN).call(this,c),t&&E(this,ee,$b).call(this,r,c),l}addHighlightHCMFilter(t,s,r,i,a){var x;const l=`${s}-${r}-${i}-${a}`;let c=o(this,ee,hp).get(t);if((c==null?void 0:c.key)===l||(c?((x=c.filter)==null||x.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},o(this,ee,hp).set(t,c)),!s||!r))return c.url;const[u,d]=[s,r].map(E(this,ee,mp).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,a].map(E(this,ee,mp).bind(this));f<h&&([h,f,m,y]=[f,h,y,m]),o(this,ee,Ku).style.color="";const v=(b,k,_)=>{const T=new Array(256),N=(f-h)/_,M=b/255,F=(k-b)/(255*_);let D=0;for(let j=0;j<=_;j++){const B=Math.round(h+j*N),z=M+j*F;for(let q=D;q<=B;q++)T[q]=z;D=B+1}for(let j=D;j<256;j++)T[j]=T[D-1];return T.join(",")},A=`g_${o(this,ma)}_hcm_${t}_filter`,w=c.filter=E(this,ee,Zu).call(this,A);return E(this,ee,Ub).call(this,w),E(this,ee,pp).call(this,v(m[0],y[0],5),v(m[1],y[1],5),v(m[2],y[2],5),w),c.url=E(this,ee,Qu).call(this,A),c.url}destroy(t=!1){var s,r,i,a;t&&((s=o(this,Dc))!=null&&s.size)||((r=o(this,pa))==null||r.parentNode.parentNode.remove(),g(this,pa,null),(i=o(this,mh))==null||i.clear(),g(this,mh,null),(a=o(this,Dc))==null||a.clear(),g(this,Dc,null),g(this,Lc,0))}}Mc=new WeakMap,mh=new WeakMap,pa=new WeakMap,ma=new WeakMap,Pn=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,ee=new WeakSet,kn=function(){return o(this,mh)||g(this,mh,new Map)},hp=function(){return o(this,Dc)||g(this,Dc,new Map)},Ku=function(){if(!o(this,pa)){const t=o(this,Pn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=o(this,Pn).createElementNS(Wi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),g(this,pa,o(this,Pn).createElementNS(Wi,"defs")),t.append(r),r.append(o(this,pa)),o(this,Pn).body.append(t)}return o(this,pa)},Ny=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[s,r,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,l[u]=r[u]/255,c[u]=i[u]/255;return[a.join(","),l.join(","),c.join(",")]},Qu=function(t){if(o(this,Mc)===void 0){g(this,Mc,"");const s=o(this,Pn).URL;s!==o(this,Pn).baseURI&&(Hw(s)?fe('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,Mc,aN(s,"")))}return`url(${o(this,Mc)}#${t})`},JN=function(t){const s=o(this,Pn).createElementNS(Wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Ub=function(t){const s=o(this,Pn).createElementNS(Wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Zu=function(t){const s=o(this,Pn).createElementNS(Wi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),o(this,ee,Ku).append(s),s},fp=function(t,s,r){const i=o(this,Pn).createElementNS(Wi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},pp=function(t,s,r,i){const a=o(this,Pn).createElementNS(Wi,"feComponentTransfer");i.append(a),E(this,ee,fp).call(this,a,"feFuncR",t),E(this,ee,fp).call(this,a,"feFuncG",s),E(this,ee,fp).call(this,a,"feFuncB",r)},$b=function(t,s){const r=o(this,Pn).createElementNS(Wi,"feComponentTransfer");s.append(r),E(this,ee,fp).call(this,r,"feFuncA",t)},mp=function(t){return o(this,ee,Ku).style.color=t,x0(getComputedStyle(o(this,ee,Ku)).getPropertyValue("color"))};class eR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Vk extends eR{async _fetch(e){const t=await v0(e,"arraybuffer");return new Uint8Array(t)}}class tR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Wk extends tR{async _fetch(e){const t=await v0(e,"arraybuffer");return new Uint8Array(t)}}Vn&&fe("Please use the `legacy` build in Node.js environments.");async function lE(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class fB extends ZN{}class pB extends KN{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class mB extends QN{async _fetch(e){return lE(e)}}class gB extends eR{async _fetch(e){return lE(e)}}class yB extends tR{async _fetch(e){return lE(e)}}const Wu="__forcedDependency",{floor:qk,ceil:Gk}=Math;function K0(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const zb=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var gh,$o;class vB{constructor(e,t){S(this,gh);S(this,$o);g(this,gh,e),g(this,$o,t)}get length(){return o(this,gh).length}isEmpty(e){return o(this,gh)[e]===zb}minX(e){return o(this,$o)[e*4+0]/256}minY(e){return o(this,$o)[e*4+1]/256}maxX(e){return(o(this,$o)[e*4+2]+1)/256}maxY(e){return(o(this,$o)[e*4+3]+1)/256}}gh=new WeakMap,$o=new WeakMap;const Q0=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var as,os,Fc,Fr,Oc,ga,Be,We,ya,ls,eg,yh,jc,Ic,va,Nn,Si,tg,Hb;class wB{constructor(e,t,s=!1){S(this,tg);S(this,as,{__proto__:null});S(this,os,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Wu]:[]});S(this,Fc,new Map);S(this,Fr,[]);S(this,Oc,[]);S(this,ga,[[1,0,0,1,0,0]]);S(this,Be,[-1/0,-1/0,1/0,1/0]);S(this,We,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,ya,-1);S(this,ls,new Set);S(this,eg,new Map);S(this,yh,new Map);S(this,jc);S(this,Ic);S(this,va);S(this,Nn);S(this,Si);g(this,jc,e.width),g(this,Ic,e.height),E(this,tg,Hb).call(this,t),s&&g(this,Si,new Map)}growOperationsCount(e){e>=o(this,Nn).length&&E(this,tg,Hb).call(this,e,o(this,Nn))}save(e){return g(this,as,{__proto__:o(this,as)}),g(this,os,{__proto__:o(this,os),transform:{__proto__:o(this,os).transform},moveText:{__proto__:o(this,os).moveText},sameLineText:{__proto__:o(this,os).sameLineText},[Wu]:{__proto__:o(this,os)[Wu]}}),g(this,Be,{__proto__:o(this,Be)}),o(this,Fr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(o(this,as));if(t===null)return this;g(this,as,t),g(this,os,Object.getPrototypeOf(o(this,os))),g(this,Be,Object.getPrototypeOf(o(this,Be)));const s=o(this,Fr).pop();return s!==void 0&&((r=Q0(o(this,Si),e))==null||r.dependencies.add(s),o(this,Nn)[e]=o(this,Nn)[s]),this}recordOpenMarker(e){return o(this,Fr).push(e),this}getOpenMarker(){return o(this,Fr).length===0?null:o(this,Fr).at(-1)}recordCloseMarker(e){var s;const t=o(this,Fr).pop();return t!==void 0&&((s=Q0(o(this,Si),e))==null||s.dependencies.add(t),o(this,Nn)[e]=o(this,Nn)[t]),this}beginMarkedContent(e){return o(this,Oc).push(e),this}endMarkedContent(e){var s;const t=o(this,Oc).pop();return t!==void 0&&((s=Q0(o(this,Si),e))==null||s.dependencies.add(t),o(this,Nn)[e]=o(this,Nn)[t]),this}pushBaseTransform(e){return o(this,ga).push(re.multiplyByDOMMatrix(o(this,ga).at(-1),e.getTransform())),this}popBaseTransform(){return o(this,ga).length>1&&o(this,ga).pop(),this}recordSimpleData(e,t){return o(this,as)[e]=t,this}recordIncrementalData(e,t){return o(this,os)[e].push(t),this}resetIncrementalData(e,t){return o(this,os)[e].length=0,this}recordNamedData(e,t){return o(this,Fc).set(e,t),this}recordSimpleDataFromNamed(e,t,s){o(this,as)[e]=o(this,Fc).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Wu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in o(this,as)&&this.recordFutureForcedDependency(t,o(this,as)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of o(this,ls))this.recordFutureForcedDependency(Wu,e);return this}resetBBox(e){return o(this,ya)!==e&&(g(this,ya,e),o(this,We)[0]=1/0,o(this,We)[1]=1/0,o(this,We)[2]=-1/0,o(this,We)[3]=-1/0),this}recordClipBox(e,t,s,r,i,a){const l=re.multiplyByDOMMatrix(o(this,ga).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];re.axialAlignedBoundingBox([s,i,r,a],l,c);const u=re.intersect(o(this,Be),c);return u?(o(this,Be)[0]=u[0],o(this,Be)[1]=u[1],o(this,Be)[2]=u[2],o(this,Be)[3]=u[3]):(o(this,Be)[0]=o(this,Be)[1]=1/0,o(this,Be)[2]=o(this,Be)[3]=-1/0),this}recordBBox(e,t,s,r,i,a){const l=o(this,Be);if(l[0]===1/0)return this;const c=re.multiplyByDOMMatrix(o(this,ga).at(-1),t.getTransform());if(l[0]===-1/0)return re.axialAlignedBoundingBox([s,i,r,a],c,o(this,We)),this;const u=[1/0,1/0,-1/0,-1/0];return re.axialAlignedBoundingBox([s,i,r,a],c,u),o(this,We)[0]=Math.min(o(this,We)[0],Math.max(u[0],l[0])),o(this,We)[1]=Math.min(o(this,We)[1],Math.max(u[1],l[1])),o(this,We)[2]=Math.max(o(this,We)[2],Math.min(u[2],l[2])),o(this,We)[3]=Math.max(o(this,We)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,a=0,l){const c=s.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&o(this,yh).get(s),u!==!1&&(d=[0,0,0,0],re.axialAlignedBoundingBox(c,s.fontMatrix,d),(r!==1||i!==0||a!==0)&&re.scaleMinMax([r,0,0,-r,i,a],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!l)return this.recordFullPageBBox(e);const h=l();return c&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=a-h.actualBoundingBoxAscent&&d[3]>=a+h.actualBoundingBoxDescent,o(this,yh).set(s,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return o(this,We)[0]=Math.max(0,o(this,Be)[0]),o(this,We)[1]=Math.max(0,o(this,Be)[1]),o(this,We)[2]=Math.min(o(this,jc),o(this,Be)[2]),o(this,We)[3]=Math.min(o(this,Ic),o(this,Be)[3]),this}getSimpleIndex(e){return o(this,as)[e]}recordDependencies(e,t){const s=o(this,ls),r=o(this,as),i=o(this,os);for(const a of t)a in o(this,as)?s.add(r[a]):a in i&&i[a].forEach(s.add,s);return this}recordNamedDependency(e,t){return o(this,Fc).has(t)&&o(this,ls).add(o(this,Fc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Wu]),o(this,Si)){const s=Q0(o(this,Si),e),{dependencies:r}=s;o(this,ls).forEach(r.add,r),o(this,Fr).forEach(r.add,r),o(this,Oc).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(o(this,ya)===e){const s=qk(o(this,We)[0]*256/o(this,jc)),r=qk(o(this,We)[1]*256/o(this,Ic)),i=Gk(o(this,We)[2]*256/o(this,jc)),a=Gk(o(this,We)[3]*256/o(this,Ic));K0(o(this,va),e,s,r,i,a);for(const l of o(this,ls))l!==e&&K0(o(this,va),l,s,r,i,a);for(const l of o(this,Fr))l!==e&&K0(o(this,va),l,s,r,i,a);for(const l of o(this,Oc))l!==e&&K0(o(this,va),l,s,r,i,a);t||(o(this,ls).clear(),g(this,ya,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(o(this,ls));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return o(this,ya)===e&&(g(this,ya,-1),o(this,Be)[0]=Math.max(o(this,Be)[0],o(this,We)[0]),o(this,Be)[1]=Math.max(o(this,Be)[1],o(this,We)[1]),o(this,Be)[2]=Math.min(o(this,Be)[2],o(this,We)[2]),o(this,Be)[3]=Math.min(o(this,Be)[3],o(this,We)[3]),t||o(this,ls).clear()),this}_takePendingDependencies(){const e=o(this,ls);return g(this,ls,new Set),e}_extractOperation(e){const t=o(this,eg).get(e);return o(this,eg).delete(e),t}_pushPendingDependencies(e){for(const t of e)o(this,ls).add(t)}take(){return o(this,yh).clear(),new vB(o(this,Nn),o(this,va))}takeDebugMetadata(){return o(this,Si)}}as=new WeakMap,os=new WeakMap,Fc=new WeakMap,Fr=new WeakMap,Oc=new WeakMap,ga=new WeakMap,Be=new WeakMap,We=new WeakMap,ya=new WeakMap,ls=new WeakMap,eg=new WeakMap,yh=new WeakMap,jc=new WeakMap,Ic=new WeakMap,va=new WeakMap,Nn=new WeakMap,Si=new WeakMap,tg=new WeakSet,Hb=function(e,t){const s=new ArrayBuffer(e*4);g(this,va,new Uint8ClampedArray(s)),g(this,Nn,new Uint32Array(s)),t&&t.length>0?(o(this,Nn).set(t),o(this,Nn).fill(zb,t.length)):o(this,Nn).fill(zb)};var Ye,At,Or,vh,wh;const yE=class yE{constructor(e,t,s){S(this,Ye);S(this,At);S(this,Or);S(this,vh,0);S(this,wh,0);if(e instanceof yE&&o(e,Or)===!!s)return e;g(this,Ye,e),g(this,At,t),g(this,Or,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return xt(this,wh)._++,o(this,Ye).save(o(this,At)),this}restore(e){return o(this,wh)>0&&(o(this,Ye).restore(o(this,At)),xt(this,wh)._--),this}recordOpenMarker(e){return xt(this,vh)._++,this}getOpenMarker(){return o(this,vh)>0?o(this,At):o(this,Ye).getOpenMarker()}recordCloseMarker(e){return xt(this,vh)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return o(this,Ye).pushBaseTransform(e),this}popBaseTransform(){return o(this,Ye).popBaseTransform(),this}recordSimpleData(e,t){return o(this,Ye).recordSimpleData(e,o(this,At)),this}recordIncrementalData(e,t){return o(this,Ye).recordIncrementalData(e,o(this,At)),this}resetIncrementalData(e,t){return o(this,Ye).resetIncrementalData(e,o(this,At)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return o(this,Ye).recordSimpleDataFromNamed(e,t,o(this,At)),this}recordFutureForcedDependency(e,t){return o(this,Ye).recordFutureForcedDependency(e,o(this,At)),this}inheritSimpleDataAsFutureForcedDependencies(e){return o(this,Ye).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return o(this,Ye).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return o(this,Or)||o(this,Ye).resetBBox(o(this,At)),this}recordClipBox(e,t,s,r,i,a){return o(this,Or)||o(this,Ye).recordClipBox(o(this,At),t,s,r,i,a),this}recordBBox(e,t,s,r,i,a){return o(this,Or)||o(this,Ye).recordBBox(o(this,At),t,s,r,i,a),this}recordCharacterBBox(e,t,s,r,i,a,l){return o(this,Or)||o(this,Ye).recordCharacterBBox(o(this,At),t,s,r,i,a,l),this}recordFullPageBBox(e){return o(this,Or)||o(this,Ye).recordFullPageBBox(o(this,At)),this}getSimpleIndex(e){return o(this,Ye).getSimpleIndex(e)}recordDependencies(e,t){return o(this,Ye).recordDependencies(o(this,At),t),this}recordNamedDependency(e,t){return o(this,Ye).recordNamedDependency(o(this,At),t),this}recordOperation(e){return o(this,Ye).recordOperation(o(this,At),!0),this}recordShowTextOperation(e){return o(this,Ye).recordShowTextOperation(o(this,At),!0),this}bboxToClipBoxDropOperation(e){return o(this,Or)||o(this,Ye).bboxToClipBoxDropOperation(o(this,At),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ye=new WeakMap,At=new WeakMap,Or=new WeakMap,vh=new WeakMap,wh=new WeakMap;let Iv=yE;const nr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},gn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vb(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class cE{isModifyingCurrentTransform(){return!1}getPattern(){Qe("Abstract method `getPattern` called.")}}class xB extends cE{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===gn.STROKE||r===gn.FILL){const a=t.current.getClippedPathBoundingBox(r,ft(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),s=re.transform(s,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Vb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(s);i.setTransform(h)}else Vb(e,this._bbox),i=this._createGradient(e);return i}}function Fx(n,e,t,s,r,i,a,l){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=a,a=f),c[s+1]>c[r+1]&&(f=s,s=r,r=f,f=a,a=l,l=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=a,a=f);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,A=(c[s+1]+e.offsetY)*e.scaleY,w=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY;if(y>=x)return;const b=u[i],k=u[i+1],_=u[i+2],T=u[a],N=u[a+1],M=u[a+2],F=u[l],D=u[l+1],j=u[l+2],B=Math.round(y),z=Math.round(x);let q,te,V,Y,P,U,$,ie;for(let Z=B;Z<=z;Z++){if(Z<A){const de=Z<y?0:(y-Z)/(y-A);q=m-(m-v)*de,te=b-(b-T)*de,V=k-(k-N)*de,Y=_-(_-M)*de}else{let de;Z>x?de=1:A===x?de=0:de=(A-Z)/(A-x),q=v-(v-w)*de,te=T-(T-F)*de,V=N-(N-D)*de,Y=M-(M-j)*de}let ae;Z<y?ae=0:Z>x?ae=1:ae=(y-Z)/(y-x),P=m-(m-w)*ae,U=b-(b-F)*ae,$=k-(k-D)*ae,ie=_-(_-j)*ae;const _e=Math.round(Math.min(q,P)),Me=Math.round(Math.max(q,P));let G=h*Z+_e*4;for(let de=_e;de<=Me;de++)ae=(q-de)/(q-P),ae<0?ae=0:ae>1&&(ae=1),d[G++]=te-(te-U)*ae|0,d[G++]=V-(V-$)*ae|0,d[G++]=Y-(Y-ie)*ae|0,d[G++]=255}}function bB(n,e,t){const s=e.coords,r=e.colors;let i,a;switch(e.type){case mb.LATTICE:const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(i=0;i<c;i++){let d=i*l;for(let h=0;h<u;h++,d++)Fx(n,t,s[d],s[d+1],s[d+l],r[d],r[d+1],r[d+l]),Fx(n,t,s[d+l+1],s[d+1],s[d+l],r[d+l+1],r[d+1],r[d+l])}break;case mb.TRIANGLES:for(i=0,a=s.length;i<a;i+=3)Fx(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class SB extends cE{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=u/h,y=d/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/y},A=h+2*2,w=f+2*2,x=s.getCanvas("mesh",A,w),b=x.context,k=b.createImageData(h,f);if(t){const T=k.data;for(let N=0,M=T.length;N<M;N+=4)T[N]=t[0],T[N+1]=t[1],T[N+2]=t[2],T[N+3]=255}for(const T of this._figures)bB(k,T,v);return b.putImageData(k,2,2),{canvas:x.canvas,offsetX:l-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){Vb(e,this._bbox);const i=new Float32Array(2);if(r===gn.SHADING)re.singularValueDecompose2dScale(ft(e),i);else if(this.matrix){re.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;re.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else re.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,r===gn.SHADING?null:this._background,t.cachedCanvases);return r!==gn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class AB extends cE{getPattern(){return"hotpink"}}function EB(n){switch(n[0]){case"RadialAxial":return new xB(n);case"Mesh":return new SB(n);case"Dummy":return new AB}throw new Error(`Unknown IR type: ${n[0]}`)}const Xk={COLORED:1,UNCOLORED:2},ew=class ew{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var U,$;const{bbox:s,operatorList:r,paintType:i,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),zw("TilingType: "+a);const h=s[0],f=s[1],m=s[2],y=s[3],v=m-h,A=y-f,w=new Float32Array(2);re.singularValueDecompose2dScale(this.matrix,w);const[x,b]=w;re.singularValueDecompose2dScale(this.baseTransform,w);const k=x*w[0],_=b*w[1];let T=v,N=A,M=!1,F=!1;const D=Math.ceil(u*k),j=Math.ceil(d*_),B=Math.ceil(v*k),z=Math.ceil(A*_);D>=B?T=u:M=!0,j>=z?N=d:F=!0;const q=this.getSizeAndScale(T,this.ctx.canvas.width,k),te=this.getSizeAndScale(N,this.ctx.canvas.height,_),V=e.cachedCanvases.getCanvas("pattern",q.size,te.size),Y=V.context,P=c.createCanvasGraphics(Y,t);if(P.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(P,i,l),Y.translate(-q.scale*h,-te.scale*f),P.transform(0,q.scale,0,0,te.scale,0,0),Y.save(),(U=P.dependencyTracker)==null||U.save(),this.clipBbox(P,h,f,m,y),P.baseTransform=ft(P.ctx),P.executeOperatorList(r),P.endDrawing(),($=P.dependencyTracker)==null||$.restore(),Y.restore(),M||F){const ie=V.canvas;M&&(T=u),F&&(N=d);const Z=this.getSizeAndScale(T,this.ctx.canvas.width,k),ae=this.getSizeAndScale(N,this.ctx.canvas.height,_),_e=Z.size,Me=ae.size,G=e.cachedCanvases.getCanvas("pattern-workaround",_e,Me),de=G.context,Yt=M?Math.floor(v/u):0,ce=F?Math.floor(A/d):0;for(let wt=0;wt<=Yt;wt++)for(let De=0;De<=ce;De++)de.drawImage(ie,_e*wt,Me*De,_e,Me,0,0,_e,Me);return{canvas:G.canvas,scaleX:Z.scale,scaleY:ae.scale,offsetX:h,offsetY:f}}return{canvas:V.canvas,scaleX:q.scale,scaleY:te.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(ew.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const a=r-t,l=i-s;e.ctx.rect(t,s,a,l),re.axialAlignedBoundingBox([t,s,r,i],ft(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case Xk.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=a,r.strokeStyle=i.strokeColor=l;break;case Xk.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new j4(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let a=s;r!==gn.SHADING&&(a=re.transform(a,t.baseTransform),this.matrix&&(a=re.transform(a,this.matrix)));const l=this.createPatternCanvas(t,i);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};H(ew,"MAX_PATTERN_SIZE",3e3);let Wb=ew;function kB({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=xn.isLittleEndian?4278190080:255,[c,u]=a?[i,l]:[l,i],d=s>>3,h=s&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const A=e+d;e<A;e++){const w=e<f?n[e]:255;t[m++]=w&128?u:c,t[m++]=w&64?u:c,t[m++]=w&32?u:c,t[m++]=w&16?u:c,t[m++]=w&8?u:c,t[m++]=w&4?u:c,t[m++]=w&2?u:c,t[m++]=w&1?u:c}if(h===0)continue;const v=e<f?n[e++]:255;for(let A=0;A<h;A++)t[m++]=v&1<<7-A?u:c}return{srcPos:e,destPos:m}}const Yk=16,Kk=100,CB=15,Qk=10,hs=16,Ox=new DOMMatrix,Hs=new Float32Array(2),md=new Float32Array([1/0,1/0,-1/0,-1/0]);function _B(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,a,l){e.transform(t,s,r,i,a,l),this.__originalTransform(t,s,r,i,a,l)},n.setTransform=function(t,s,r,i,a,l){e.setTransform(t,s,r,i,a,l),this.__originalSetTransform(t,s,r,i,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,a,l){e.bezierCurveTo(t,s,r,i,a,l),this.__originalBezierCurveTo(t,s,r,i,a,l)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class TB{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Z0(n,e,t,s,r,i,a,l,c,u){const[d,h,f,m,y,v]=ft(n);if(h===0&&f===0){const x=a*d+y,b=Math.round(x),k=l*m+v,_=Math.round(k),T=(a+c)*d+y,N=Math.abs(Math.round(T)-b)||1,M=(l+u)*m+v,F=Math.abs(Math.round(M)-_)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),b,_),n.drawImage(e,t,s,r,i,0,0,N,F),n.setTransform(d,h,f,m,y,v),[N,F]}if(d===0&&m===0){const x=l*f+y,b=Math.round(x),k=a*h+v,_=Math.round(k),T=(l+u)*f+y,N=Math.abs(Math.round(T)-b)||1,M=(a+c)*h+v,F=Math.abs(Math.round(M)-_)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,b,_),n.drawImage(e,t,s,r,i,0,0,F,N),n.setTransform(d,h,f,m,y,v),[F,N]}n.drawImage(e,t,s,r,i,a,l,c,u);const A=Math.hypot(d,h),w=Math.hypot(f,m);return[A*c,w*u]}class Zk{constructor(e,t,s){H(this,"alphaIsShape",!1);H(this,"fontSize",0);H(this,"fontSizeScale",1);H(this,"textMatrix",null);H(this,"textMatrixScale",1);H(this,"fontMatrix",pb);H(this,"leading",0);H(this,"x",0);H(this,"y",0);H(this,"lineX",0);H(this,"lineY",0);H(this,"charSpacing",0);H(this,"wordSpacing",0);H(this,"textHScale",1);H(this,"textRenderingMode",ln.FILL);H(this,"textRise",0);H(this,"fillColor","#000000");H(this,"strokeColor","#000000");H(this,"patternFill",!1);H(this,"patternStroke",!1);H(this,"fillAlpha",1);H(this,"strokeAlpha",1);H(this,"lineWidth",1);H(this,"activeSMask",null);H(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=md.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=gn.FILL,t=null){const s=this.minMax.slice();if(e===gn.STROKE){t||Qe("Stroke bounding box must include transform."),re.singularValueDecompose2dScale(t,Hs);const r=Hs[0]*this.lineWidth/2,i=Hs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=re.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(md,0)}getClippedPathBoundingBox(e=gn.FILL,t=null){return re.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Jk(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%hs,i=(t-r)/hs,a=r===0?i:i+1,l=n.createImageData(s,hs);let c=0,u;const d=e.data,h=l.data;let f,m,y,v;if(e.kind===xy.GRAYSCALE_1BPP){const A=d.byteLength,w=new Uint32Array(h.buffer,0,h.byteLength>>2),x=w.length,b=s+7>>3,k=4294967295,_=xn.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(y=f<i?hs:r,u=0,m=0;m<y;m++){const T=A-c;let N=0;const M=T>b?s:T*8-7,F=M&-8;let D=0,j=0;for(;N<F;N+=8)j=d[c++],w[u++]=j&128?k:_,w[u++]=j&64?k:_,w[u++]=j&32?k:_,w[u++]=j&16?k:_,w[u++]=j&8?k:_,w[u++]=j&4?k:_,w[u++]=j&2?k:_,w[u++]=j&1?k:_;for(;N<M;N++)D===0&&(j=d[c++],D=128),w[u++]=j&D?k:_,D>>=1}for(;u<x;)w[u++]=0;n.putImageData(l,0,f*hs)}}else if(e.kind===xy.RGBA_32BPP){for(m=0,v=s*hs*4,f=0;f<i;f++)h.set(d.subarray(c,c+v)),c+=v,n.putImageData(l,0,m),m+=hs;f<a&&(v=s*r*4,h.set(d.subarray(c,c+v)),n.putImageData(l,0,m))}else if(e.kind===xy.RGB_24BPP)for(y=hs,v=s*y,f=0;f<a;f++){for(f>=i&&(y=r,v=s*y),u=0,m=v;m--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(l,0,f*hs)}else throw new Error(`bad image kind: ${e.kind}`)}function eC(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%hs,i=(t-r)/hs,a=r===0?i:i+1,l=n.createImageData(s,hs);let c=0;const u=e.data,d=l.data;for(let h=0;h<a;h++){const f=h<i?hs:r;({srcPos:c}=kB({src:u,srcPos:c,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,h*hs)}}function zf(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function J0(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function tC(n,e){if(e)return!0;re.singularValueDecompose2dScale(n,Hs);const t=Math.fround(Bi.pixelRatio*Rl.PDF_TO_CSS_UNITS);return Hs[0]<=t&&Hs[1]<=t}const PB=["butt","round","square"],NB=["miter","round","bevel"],RB={},nC={};var Jr,qb,Gb,Xb;const vE=class vE{constructor(e,t,s,r,i,{optionalContentConfig:a,markedContentStack:l=null},c,u,d){S(this,Jr);this.ctx=e,this.current=new Zk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new TB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ft(this.compositeCtx))}this.ctx.save(),J0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ft(this.ctx)}executeOperatorList(e,t,s,r,i){var w;const a=e.argsArray,l=e.fnArray;let c=t||0;const u=a.length;if(u===c)return c;const d=u-c>Qk&&typeof s=="function",h=d?Date.now()+CB:0;let f=0;const m=this.commonObjs,y=this.objs;let v,A;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(!i||i(c))if(v=l[c],A=a[c]??null,v!==rm.dependency)A===null?this[v](c):this[v](c,...A);else for(const x of A){(w=this.dependencyTracker)==null||w.recordNamedData(x,c);const b=x.startsWith("g_")?m:y;if(!b.has(x))return b.get(x,s),c}if(c++,c===u)return c;if(d&&++f>Qk){if(Date.now()>h)return s(),c;f=0}}}endDrawing(){E(this,Jr,qb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,Jr,Gb).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=r,u="prescale1",d,h;for(;i>2&&l>1||a>2&&c>1;){let f=l,m=c;i>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/f),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),d=this.cachedCanvases.getCanvas(u,f,m),h=d.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,l,c,0,0,f,m),e=d.canvas,l=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var D,j;const s=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,l=this.current.patternFill,c=ft(s);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const B=t.bitmap||t.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),a]),u=this._cachedBitmapsMap.get(B),u||(u=new Map,this._cachedBitmapsMap.set(B,u));const z=u.get(d);if(z&&!l){const q=Math.round(Math.min(c[0],c[2])+c[4]),te=Math.round(Math.min(c[1],c[3])+c[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,nr.transformAndFill),{canvas:z,offsetX:q,offsetY:te}}h=z}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),eC(f.context,t));let m=re.transform(c,[1/r,0,0,-1/i,0,0]);m=re.transform(m,[1,0,0,1,0,-i]);const y=md.slice();re.axialAlignedBoundingBox([0,0,r,i],m,y);const[v,A,w,x]=y,b=Math.round(w-v)||1,k=Math.round(x-A)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,k),T=_.context,N=v,M=A;T.translate(-N,-M),T.transform(...m),h||(h=this._scaleImage(f.canvas,si(T)),h=h.img,u&&l&&u.set(d,h)),T.imageSmoothingEnabled=tC(ft(T),t.interpolate),Z0(T,h,0,0,h.width,h.height,0,0,r,i),T.globalCompositeOperation="source-in";const F=re.transform(si(T),[1,0,0,1,-N,-M]);return T.fillStyle=l?a.getPattern(s,this,F,gn.FILL,e):a,T.fillRect(0,0,r,i),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,_.canvas)),(j=this.dependencyTracker)==null||j.recordDependencies(e,nr.transformAndFill),{canvas:_.canvas,offsetX:Math.round(N),offsetY:Math.round(M)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=PB[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=NB[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,a,l;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),zf(this.suspendedCtx,a),_B(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],a=r[1],l=r[2]-i,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,a,l,c,u,d,h){let f=e.canvas,m=c-d,y=u-h;if(a)if(m<0||y<0||m+s>f.width||y+r>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,r),w=A.context;w.drawImage(f,-m,-y),w.globalCompositeOperation="destination-atop",w.fillStyle=a,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",f=A.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(m,y,s,r),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,s,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,s,r,c,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&zf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,a,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===rm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}i instanceof Path2D||(i=s[0]=hN(i)),re.axialAlignedBoundingBox(r,ft(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var a;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const l=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,si(r),gn.STROKE,e),l){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,nr.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(gn.STROKE,ft(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,d,h;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const f=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,si(r),gn.FILL,e),f){const m=new Path2D;m.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,nr.fill),l&&(r.restore(),(h=this.dependencyTracker)==null||h.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,nr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=RB}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=nC}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:u,path:d}of t)d&&r.addPath(d,new DOMMatrix(a).preMultiplySelf(i).translate(l,c).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||pb,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&fe("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const a=r.loadedName||"sans-serif",l=((f=r.systemFontInfo)==null?void 0:f.css)||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const u=r.italic?"italic":"normal";let d=s;s<Yk?d=Yk:s>Kk&&(d=Kk),this.current.fontSizeScale=s/d,this.ctx.font=`${u} ${c} ${d}px ${l}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,a){var w,x,b,k;const l=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&ln.FILL_STROKE_MASK,m=!!(d&ln.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,v=c.patternStroke&&!u.missingFile;let A;if((u.disableFontFace||m||y||v)&&!u.missingFile&&(A=u.getPathGenerator(this.commonObjs,t)),A&&(u.disableFontFace||y||v)){l.save(),l.translate(s,r),l.scale(h,-h),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,l,u);let _;if(f===ln.FILL||f===ln.FILL_STROKE)if(i){_=l.getTransform(),l.setTransform(...i);const T=E(this,Jr,Xb).call(this,A,_,i);l.fill(T)}else l.fill(A);if(f===ln.STROKE||f===ln.FILL_STROKE)if(a){_||(_=l.getTransform()),l.setTransform(...a);const{a:T,b:N,c:M,d:F}=_,D=re.inverseTransform(a),j=re.transform([T,N,M,F,0,0],D);re.singularValueDecompose2dScale(j,Hs),l.lineWidth*=Math.max(Hs[0],Hs[1])/h,l.stroke(E(this,Jr,Xb).call(this,A,_,a))}else l.lineWidth/=h,l.stroke(A);l.restore()}else(f===ln.FILL||f===ln.FILL_STROKE)&&(l.fillText(t,s,r),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,l,u,h,s,r,()=>l.measureText(t))),(f===ln.STROKE||f===ln.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,l,u,h,s,r,()=>l.measureText(t)).recordDependencies(e,nr.stroke)),l.strokeText(t,s,r));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ft(l),x:s,y:r,fontSize:h,path:A}),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,l,u,h,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return pe(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var M,F,D,j;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,nr.showText).resetBBox(e),this.current.textRenderingMode&ln.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(F=this.dependencyTracker)==null||F.recordOperation(e);return}const a=this.ctx,l=s.fontSizeScale,c=s.charSpacing,u=s.wordSpacing,d=s.fontDirection,h=s.textHScale*d,f=t.length,m=r.vertical,y=m?1:-1,v=r.defaultVMetrics,A=i*s.fontMatrix[0],w=s.textRenderingMode===ln.FILL&&!r.disableFontFace&&!s.patternFill;a.save(),s.textMatrix&&a.transform(...s.textMatrix),a.translate(s.x,s.y+s.textRise),d>0?a.scale(h,-1):a.scale(h,1);let x,b;if(s.patternFill){a.save();const B=s.fillColor.getPattern(a,this,si(a),gn.FILL,e);x=ft(a),a.restore(),a.fillStyle=B}if(s.patternStroke){a.save();const B=s.strokeColor.getPattern(a,this,si(a),gn.STROKE,e);b=ft(a),a.restore(),a.strokeStyle=B}let k=s.lineWidth;const _=s.textMatrixScale;if(_===0||k===0){const B=s.textRenderingMode&ln.FILL_STROKE_MASK;(B===ln.STROKE||B===ln.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=_;if(l!==1&&(a.scale(l,l),k/=l),a.lineWidth=k,r.isInvalidPDFjsFont){const B=[];let z=0;for(const te of t)B.push(te.unicode),z+=te.width;const q=B.join("");if(a.fillText(q,0,0),this.dependencyTracker!==null){const te=a.measureText(q);this.dependencyTracker.recordBBox(e,this.ctx,-te.actualBoundingBoxLeft,te.actualBoundingBoxRight,-te.actualBoundingBoxAscent,te.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=z*A*h,a.restore(),this.compose();return}let T=0,N;for(N=0;N<f;++N){const B=t[N];if(typeof B=="number"){T+=y*B*i/1e3;continue}let z=!1;const q=(B.isSpace?u:0)+c,te=B.fontChar,V=B.accent;let Y,P,U=B.width;if(m){const Z=B.vmetric||v,ae=-(B.vmetric?Z[1]:U*.5)*A,_e=Z[2]*A;U=Z?-Z[0]:U,Y=ae/l,P=(T+_e)/l}else Y=T/l,P=0;let $;if(r.remeasure&&U>0){$=a.measureText(te);const Z=$.width*1e3/i*l;if(U<Z&&this.isFontSubpixelAAEnabled){const ae=U/Z;z=!0,a.save(),a.scale(ae,1),Y/=ae}else U!==Z&&(Y+=(U-Z)/2e3*i/l)}if(this.contentVisible&&(B.isInFont||r.missingFile)){if(w&&!V)a.fillText(te,Y,P),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,a,$?{bbox:null}:r,i/l,Y,P,()=>$??a.measureText(te));else if(this.paintChar(e,te,Y,P,x,b),V){const Z=Y+i*V.offset.x/l,ae=P-i*V.offset.y/l;this.paintChar(e,V.fontChar,Z,ae,x,b)}}const ie=m?U*A-q*d:U*A+q*d;T+=ie,z&&a.restore()}m?s.y-=T:s.x+=T*h,a.restore(),this.compose(),(j=this.dependencyTracker)==null||j.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,a=r.fontSize,l=r.fontDirection,c=i.vertical?1:-1,u=r.charSpacing,d=r.wordSpacing,h=r.textHScale*l,f=r.fontMatrix||pb,m=t.length,y=r.textRenderingMode===ln.INVISIBLE;let v,A,w,x;if(y||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(h,l);const b=this.dependencyTracker;for(this.dependencyTracker=b?new Iv(b,e):null,v=0;v<m;++v){if(A=t[v],typeof A=="number"){x=c*A*a/1e3,this.ctx.translate(x,0),r.x+=x*h;continue}const k=(A.isSpace?d:0)+u,_=i.charProcOperatorList[A.operatorListId];_?this.contentVisible&&(this.save(),s.scale(a,a),s.transform(...f),this.executeOperatorList(_),this.restore()):fe(`Type3 character "${A.operatorListId}" is not available.`);const T=[A.width,0];re.applyTransform(T,f),w=T[0]*a+k,s.translate(w,0),r.x+=w*h}s.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,a,l){var u;const c=new Path2D;c.rect(r,i,a-r,l-i),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,a,i,l).recordClipBox(e,this.ctx,r,a,i,l),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||ft(this.ctx),i={createCanvasGraphics:(a,l)=>new vE(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Iv(this.dependencyTracker,l,!0):null)};s=new Wb(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=EB(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,si(s),gn.SHADING,e);const i=si(s);if(i){const{width:l,height:c}=s.canvas,u=md.slice();re.axialAlignedBoundingBox([0,0,l,c],i,u);const[d,h,f,m]=u;this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,nr.transform).recordDependencies(e,nr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Qe("Should not call beginInlineImage")}beginImageData(){Qe("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ft(this.ctx),s)){re.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,a,l,c]=s,u=new Path2D;u.rect(i,a,l-i,c-a),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||zw("TODO: Support non-isolated groups."),t.knockout&&fe("Knockout groups not supported.");const r=ft(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=md.slice();re.axialAlignedBoundingBox(t.bbox,ft(s),i);const a=[0,0,s.canvas.width,s.canvas.height];i=re.intersect(i,a)||[0,0,0,0];const l=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-l,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),m=f.context;m.translate(-l,-c),m.transform(...r);let y=new Path2D;const[v,A,w,x]=t.bbox;if(y.rect(v,A,w-v,x-A),t.matrix){const k=new Path2D;k.addPath(y,new DOMMatrix(t.matrix)),y=k}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(l,c),s.save()),zf(s,m),this.ctx=m,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=ft(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const l=md.slice();re.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],a,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,r,i,a){if(E(this,Jr,qb).call(this),J0(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],c=s[3]-s[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=c,re.singularValueDecompose2dScale(ft(this.ctx),Hs);const{viewportScale:u}=this,d=Math.ceil(l*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Hs[0],0,0,-Hs[1],0,c*Hs[1]),J0(this.ctx)}else{J0(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],l,c),this.ctx.clip(u)}}this.current=new Zk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),E(this,Jr,Gb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,a,l){var h,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=ft(c);c.transform(s,r,i,a,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let y=0,v=l.length;y<v;y+=2){const A=re.transform(u,[s,r,i,a,l[y],l[y+1]]);c.drawImage(d.canvas,A[4],A[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,A[4],A[4]+d.canvas.width,A[5],A[5]+d.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,l,c;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,nr.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:m}=u,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),v=y.context;v.save();const A=this.getObject(e,d,u);eC(v,A),v.globalCompositeOperation="source-in",v.fillStyle=i?r.getPattern(v,this,si(s),gn.FILL,e):r,v.fillRect(0,0,h,f),v.restore(),s.save(),s.transform(...m),s.scale(1,-1),Z0(s,y.canvas,0,0,h,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,h,0,f),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){fe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){fe("Dependent image isn't ready yet");return}const l=a.width,c=a.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[s,0,0,r,i[d],i[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/s,-1/r);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Jk(h,t),l=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(l,si(i));i.imageSmoothingEnabled=tC(ft(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,nr.imageXObject).recordOperation(e),Z0(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var a,l,c;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;Jk(f,t),i=this.applyTransferMapsToCanvas(f)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),Z0(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,nr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var a,l;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===nC?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ft(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let a,l;if(s===0&&r===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)a=l=1/c;else{const d=c*e;a=l=d<1?1/d:1}else if(e===0)a=1/c,l=1/u;else{const d=c*e,h=u*e;a=d<1?1/d:1,l=h<1?1/h:1}}else{const c=Math.abs(t*i-s*r),u=Math.hypot(t,s),d=Math.hypot(r,i);if(e===0)a=d/c,l=u/c;else{const h=e*c;a=d>h?d/h:1,l=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){s.lineWidth=(r||1)*i,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(i,a),Ox.a=1/i,Ox.d=1/a;const c=new Path2D;if(c.addPath(e,Ox),l.length>0){const u=Math.max(i,a);s.setLineDash(l.map(d=>d/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Jr=new WeakSet,qb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gb=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Xb=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let Cd=vE;for(const n in rm)Cd.prototype[n]!==void 0&&(Cd.prototype[rm[n]]=Cd.prototype[n]);var ng,sg;class Fi{static get workerPort(){return o(this,ng)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");g(this,ng,e)}static get workerSrc(){return o(this,sg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");g(this,sg,e)}}ng=new WeakMap,sg=new WeakMap,S(Fi,ng,null),S(Fi,sg,"");var xh,rg;class MB{constructor({parsedData:e,rawData:t}){S(this,xh);S(this,rg);g(this,xh,e),g(this,rg,t)}getRaw(){return o(this,rg)}get(e){return o(this,xh).get(e)??null}[Symbol.iterator](){return o(this,xh).entries()}}xh=new WeakMap,rg=new WeakMap;const Ju=Symbol("INTERNAL");var ig,ag,og,bh;class DB{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){S(this,ig,!1);S(this,ag,!1);S(this,og,!1);S(this,bh,!0);g(this,ig,!!(e&$s.DISPLAY)),g(this,ag,!!(e&$s.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(o(this,og))return o(this,bh);if(!o(this,bh))return!1;const{print:e,view:t}=this.usage;return o(this,ig)?(t==null?void 0:t.viewState)!=="OFF":o(this,ag)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Ju&&Qe("Internal method `_setVisible` called."),g(this,og,s),g(this,bh,t)}}ig=new WeakMap,ag=new WeakMap,og=new WeakMap,bh=new WeakMap;var zo,qe,Sh,Ah,lg,Yb;class LB{constructor(e,t=$s.DISPLAY){S(this,lg);S(this,zo,null);S(this,qe,new Map);S(this,Sh,null);S(this,Ah,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,g(this,Ah,e.order);for(const s of e.groups)o(this,qe).set(s.id,new DB(t,s));if(e.baseState==="OFF")for(const s of o(this,qe).values())s._setVisible(Ju,!1);for(const s of e.on)o(this,qe).get(s)._setVisible(Ju,!0);for(const s of e.off)o(this,qe).get(s)._setVisible(Ju,!1);g(this,Sh,this.getHash())}}isVisible(e){if(o(this,qe).size===0)return!0;if(!e)return zw("Optional content group not defined."),!0;if(e.type==="OCG")return o(this,qe).has(e.id)?o(this,qe).get(e.id).visible:(fe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,lg,Yb).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!o(this,qe).has(t))return fe(`Optional content group not found: ${t}`),!0;if(o(this,qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!o(this,qe).has(t))return fe(`Optional content group not found: ${t}`),!0;if(!o(this,qe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!o(this,qe).has(t))return fe(`Optional content group not found: ${t}`),!0;if(!o(this,qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!o(this,qe).has(t))return fe(`Optional content group not found: ${t}`),!0;if(o(this,qe).get(t).visible)return!1}return!0}return fe(`Unknown optional content policy ${e.policy}.`),!0}return fe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=o(this,qe).get(e);if(!r){fe(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((i=o(this,qe).get(l))==null||i._setVisible(Ju,!1,!0));r._setVisible(Ju,!!t,!0),g(this,zo,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=o(this,qe).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}g(this,zo,null)}get hasInitialVisibility(){return o(this,Sh)===null||this.getHash()===o(this,Sh)}getOrder(){return o(this,qe).size?o(this,Ah)?o(this,Ah).slice():[...o(this,qe).keys()]:null}getGroup(e){return o(this,qe).get(e)||null}getHash(){if(o(this,zo)!==null)return o(this,zo);const e=new VN;for(const[t,s]of o(this,qe))e.update(`${t}:${s.visible}`);return g(this,zo,e.hexdigest())}[Symbol.iterator](){return o(this,qe).entries()}}zo=new WeakMap,qe=new WeakMap,Sh=new WeakMap,Ah=new WeakMap,lg=new WeakSet,Yb=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=E(this,lg,Yb).call(this,i);else if(o(this,qe).has(i))a=o(this,qe).get(i).visible;else return fe(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class FB{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ce(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Ce(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ce(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new OB(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new jB(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class OB{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=aE(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class jB{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function IB(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=l(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=a(n),t){const d=u(t);return i(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=l(t);return d=u(d),i(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),m=y0(h);h=f.decode(m),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function a(d){const h=[];let f;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(d))!==null;){let[,v,A,w]=f;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[A,w]}const y=[];for(let v=0;v<h.length&&v in h;++v){let[A,w]=h[v];w=l(w),A&&(w=unescape(w),v===0&&(w=c(w))),y.push(w)}return y.join("")}function l(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return r(f,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,A){return String.fromCharCode(parseInt(A,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function nR(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function Vw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function sR({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function rR(n){const e=n.get("Content-Disposition");if(e){let t=IB(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(aE(t))return t}return null}function S0(n,e){return new Mv(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function iR(n){return n===200||n===206}function aR(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function oR(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(fe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class BB{constructor(e){H(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=nR(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ce(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UB(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new $B(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class UB{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,aR(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Vw(i.url),!iR(i.status))throw S0(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:c}=sR({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=rR(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:oR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class $B{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const a=r.url;fetch(a,aR(i,this._withCredentials,this._abortController)).then(l=>{const c=Vw(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!iR(l.status))throw S0(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:oR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const jx=200,Ix=206;function zB(n){const e=n.response;return typeof e!="string"?e:y0(e).buffer}class HB{constructor({url:e,httpHeaders:t,withCredentials:s}){H(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=nR(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Ix):r.expectedStatus=jx,t.responseType="arraybuffer",Ce(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||jx;if(!(i===jx&&s.expectedStatus===Ix)&&i!==s.expectedStatus){s.onError(r.status);return}const l=zB(r);if(i===Ix){const c=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(fe('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class VB{constructor(e){this._source=e,this._manager=new HB(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ce(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new WB(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new qB(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class WB{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Vw(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=sR({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=rR(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=S0(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class qB{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Vw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=S0(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const GB=/^[a-z][a-z0-9\-+.]+:/i;function XB(n){if(GB.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class YB{constructor(e){this.source=e,this.url=XB(e.url),Ce(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ce(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new KB(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new QB(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class KB{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=S0(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class QB{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Hf=Symbol("INITIAL_DATA");var _s,cg,Kb;class lR{constructor(){S(this,cg);S(this,_s,Object.create(null))}get(e,t=null){if(t){const r=E(this,cg,Kb).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=o(this,_s)[e];if(!s||s.data===Hf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=o(this,_s)[e];return!!t&&t.data!==Hf}delete(e){const t=o(this,_s)[e];return!t||t.data===Hf?!1:(delete o(this,_s)[e],!0)}resolve(e,t=null){const s=E(this,cg,Kb).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in o(this,_s)){const{data:s}=o(this,_s)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}g(this,_s,Object.create(null))}*[Symbol.iterator](){for(const e in o(this,_s)){const{data:t}=o(this,_s)[e];t!==Hf&&(yield[e,t])}}}_s=new WeakMap,cg=new WeakSet,Kb=function(e){var t;return(t=o(this,_s))[e]||(t[e]={...Promise.withResolvers(),data:Hf})};const ZB=1e5,sC=30;var EC,Ho,cs,ug,dg,Bc,wa,hg,fg,Uc,Eh,kh,Vo,Ch,pg,_h,$c,mg,gg,Th,zc,yg,Wo,Ph,Qa,cR,uR,Qb,Ys,Ry,Zb,dR,hR;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:s}){S(this,Qa);S(this,Ho,Promise.withResolvers());S(this,cs,null);S(this,ug,!1);S(this,dg,!!((EC=globalThis.FontInspector)!=null&&EC.enabled));S(this,Bc,null);S(this,wa,null);S(this,hg,0);S(this,fg,0);S(this,Uc,null);S(this,Eh,null);S(this,kh,0);S(this,Vo,0);S(this,Ch,Object.create(null));S(this,pg,[]);S(this,_h,null);S(this,$c,[]);S(this,mg,new WeakMap);S(this,gg,null);var c;if(e instanceof ReadableStream)g(this,_h,e);else if(typeof e=="object")g(this,_h,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,cs,g(this,Eh,t)),g(this,Vo,s.scale*Bi.pixelRatio),g(this,kh,s.rotation),g(this,wa,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:l}=s.rawDims;g(this,gg,[1,0,0,-1,-a,l+i]),g(this,fg,r),g(this,hg,i),E(c=Ut,Ys,dR).call(c),Lu(t,s),o(this,Ho).promise.finally(()=>{o(Ut,Ph).delete(this),g(this,wa,null),g(this,Ch,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=xn.platform;return pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{o(this,Uc).read().then(({value:t,done:s})=>{if(s){o(this,Ho).resolve();return}o(this,Bc)??g(this,Bc,t.lang),Object.assign(o(this,Ch),t.styles),E(this,Qa,cR).call(this,t.items),e()},o(this,Ho).reject)};return g(this,Uc,o(this,_h).getReader()),o(Ut,Ph).add(this),e(),o(this,Ho).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Bi.pixelRatio,r=e.rotation;if(r!==o(this,kh)&&(t==null||t(),g(this,kh,r),Lu(o(this,Eh),{rotation:r})),s!==o(this,Vo)){t==null||t(),g(this,Vo,s);const a={div:null,properties:null,ctx:E(i=Ut,Ys,Ry).call(i,o(this,Bc))};for(const l of o(this,$c))a.properties=o(this,mg).get(l),a.div=l,E(this,Qa,Qb).call(this,a)}}cancel(){var t;const e=new Nl("TextLayer task cancelled.");(t=o(this,Uc))==null||t.cancel(e).catch(()=>{}),g(this,Uc,null),o(this,Ho).reject(e)}get textDivs(){return o(this,$c)}get textContentItemsStr(){return o(this,pg)}static cleanup(){if(!(o(this,Ph).size>0)){o(this,Th).clear();for(const{canvas:e}of o(this,zc).values())e.remove();o(this,zc).clear()}}};Ho=new WeakMap,cs=new WeakMap,ug=new WeakMap,dg=new WeakMap,Bc=new WeakMap,wa=new WeakMap,hg=new WeakMap,fg=new WeakMap,Uc=new WeakMap,Eh=new WeakMap,kh=new WeakMap,Vo=new WeakMap,Ch=new WeakMap,pg=new WeakMap,_h=new WeakMap,$c=new WeakMap,mg=new WeakMap,gg=new WeakMap,Th=new WeakMap,zc=new WeakMap,yg=new WeakMap,Wo=new WeakMap,Ph=new WeakMap,Qa=new WeakSet,cR=function(e){var r,i;if(o(this,ug))return;(i=o(this,wa)).ctx??(i.ctx=E(r=Ut,Ys,Ry).call(r,o(this,Bc)));const t=o(this,$c),s=o(this,pg);for(const a of e){if(t.length>ZB){fe("Ignoring additional textDivs for performance reasons."),g(this,ug,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=o(this,cs);g(this,cs,document.createElement("span")),o(this,cs).classList.add("markedContent"),a.id&&o(this,cs).setAttribute("id",`${a.id}`),l.append(o(this,cs))}else a.type==="endMarkedContent"&&g(this,cs,o(this,cs).parentNode);continue}s.push(a.str),E(this,Qa,uR).call(this,a)}},uR=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};o(this,$c).push(t);const r=re.transform(o(this,gg),e.transform);let i=Math.atan2(r[1],r[0]);const a=o(this,Ch)[e.fontName];a.vertical&&(i+=Math.PI/2);let l=o(this,dg)&&a.fontSubstitution||a.fontFamily;l=Ut.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),u=c*E(v=Ut,Ys,hR).call(v,l,a,o(this,Bc));let d,h;i===0?(d=r[4],h=r[5]-u):(d=r[4]+u*Math.sin(i),h=r[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",m=t.style;o(this,cs)===o(this,Eh)?(m.left=`${(100*d/o(this,fg)).toFixed(2)}%`,m.top=`${(100*h/o(this,hg)).toFixed(2)}%`):(m.left=`${f}${d.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(o(Ut,Wo)*c).toFixed(2)}px)`,m.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,o(this,dg)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);A!==w&&Math.max(A,w)/Math.min(A,w)>1.5&&(y=!0)}if(y&&(s.canvasWidth=a.vertical?e.height:e.width),o(this,mg).set(t,s),o(this,wa).div=t,o(this,wa).properties=s,E(this,Qa,Qb).call(this,o(this,wa)),s.hasText&&o(this,cs).append(t),s.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),o(this,cs).append(A)}},Qb=function(e){var l;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let a="";if(o(Ut,Wo)>1&&(a=`scale(${1/o(Ut,Wo)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=s;E(l=Ut,Ys,Zb).call(l,r,d*o(this,Vo),c);const{width:h}=r.measureText(t.textContent);h>0&&(a=`scaleX(${u*o(this,Vo)/h}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Ys=new WeakSet,Ry=function(e=null){let t=o(this,zc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,zc).set(e,t),o(this,yg).set(t,{size:0,family:""})}return t},Zb=function(e,t,s){const r=o(this,yg).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},dR=function(){if(o(this,Wo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),g(this,Wo,e.getBoundingClientRect().height),e.remove()},hR=function(e,t,s){const r=o(this,Th).get(e);if(r)return r;const i=E(this,Ys,Ry).call(this,s);i.canvas.width=i.canvas.height=sC,E(this,Ys,Zb).call(this,i,sC,e);const a=i.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return l?u=l/(l+c):(xn.platform.isFirefox&&fe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),o(this,Th).set(e,u),u},S(Ut,Ys),S(Ut,Th,new Map),S(Ut,zc,new Map),S(Ut,yg,new WeakMap),S(Ut,Wo,null),S(Ut,Ph,new Set);let am=Ut;const JB=100;function fR(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Jb,{docId:t}=e,s=n.url?aB(n.url):null,r=n.data?oB(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,c=n.range instanceof pR?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof om?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Hw(n.docBaseUrl)?n.docBaseUrl:null,m=X0(n.cMapUrl),y=n.cMapPacked!==!1,v=n.CMapReaderFactory||(Vn?mB:Hk),A=X0(n.iccUrl),w=X0(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Vn?gB:Vk),b=X0(n.wasmUrl),k=n.WasmFactory||(Vn?yB:Wk),_=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,M=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Vn,F=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Vn&&(xn.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:Vn,B=n.fontExtraProperties===!0,z=n.enableXfa===!0,q=n.ownerDocument||globalThis.document,te=n.disableRange===!0,V=n.disableStream===!0,Y=n.disableAutoFetch===!0,P=n.pdfBug===!0,U=n.CanvasFactory||(Vn?pB:dB),$=n.FilterFactory||(Vn?fB:hB),ie=n.enableHWA===!0,Z=n.useWasm!==!1,ae=c?c.length:n.length??NaN,_e=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Vn&&!j,Me=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(v===Hk&&x===Vk&&k===Wk&&m&&w&&b&&sp(m,document.baseURI)&&sp(w,document.baseURI)&&sp(b,document.baseURI)),G=null;L4(h);const de={canvasFactory:new U({ownerDocument:q,enableHWA:ie}),filterFactory:new $({docId:t,ownerDocument:q}),cMapReaderFactory:Me?null:new v({baseUrl:m,isCompressed:y}),standardFontDataFactory:Me?null:new x({baseUrl:w}),wasmFactory:Me?null:new k({baseUrl:b})};d||(d=om.create({verbosity:h,port:Fi.workerPort}),e._worker=d);const Yt={docId:t,apiVersion:"5.4.449",data:r,password:l,disableAutoFetch:Y,rangeChunkSize:u,length:ae,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:T,disableFontFace:j,ignoreErrors:_,isEvalSupported:N,isOffscreenCanvasSupported:M,isImageDecoderSupported:F,canvasMaxAreaInBytes:D,fontExtraProperties:B,useSystemFonts:_e,useWasm:Z,useWorkerFetch:Me,cMapUrl:m,iccUrl:A,standardFontDataUrl:w,wasmUrl:b}},ce={ownerDocument:q,pdfBug:P,styleElement:G,loadingParams:{disableAutoFetch:Y,enableXfa:z}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const wt=d.messageHandler.sendWithPromise("GetDocRequest",Yt,r?[r.buffer]:null);let De;if(c)De=new FB(c,{disableRange:te,disableStream:V});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Jn=sp(s)?BB:Vn?YB:VB;De=new Jn({url:s,length:ae,httpHeaders:i,withCredentials:a,rangeChunkSize:u,disableRange:te,disableStream:V})}return wt.then(Jn=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const bs=new dp(t,Jn,d.port),Js=new n6(bs,e,De,ce,de,ie);e._transport=Js,bs.send("Ready",null)})}).catch(e._capability.reject),e}var tw;const nw=class nw{constructor(){H(this,"_capability",Promise.withResolvers());H(this,"_transport",null);H(this,"_worker",null);H(this,"docId",`d${xt(nw,tw)._++}`);H(this,"destroyed",!1);H(this,"onPassword",null);H(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};tw=new WeakMap,S(nw,tw,0);let Jb=nw;var Hc,vg,wg,xg,bg;class pR{constructor(e,t,s=!1,r=null){S(this,Hc,Promise.withResolvers());S(this,vg,[]);S(this,wg,[]);S(this,xg,[]);S(this,bg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){o(this,bg).push(e)}addProgressListener(e){o(this,xg).push(e)}addProgressiveReadListener(e){o(this,wg).push(e)}addProgressiveDoneListener(e){o(this,vg).push(e)}onDataRange(e,t){for(const s of o(this,bg))s(e,t)}onDataProgress(e,t){o(this,Hc).promise.then(()=>{for(const s of o(this,xg))s(e,t)})}onDataProgressiveRead(e){o(this,Hc).promise.then(()=>{for(const t of o(this,wg))t(e)})}onDataProgressiveDone(){o(this,Hc).promise.then(()=>{for(const e of o(this,vg))e()})}transportReady(){o(this,Hc).resolve()}requestDataRange(e,t){Qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Hc=new WeakMap,vg=new WeakMap,wg=new WeakMap,xg=new WeakMap,bg=new WeakMap;class e6{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var xa,Vc,gp;class t6{constructor(e,t,s,r=!1){S(this,Vc);S(this,xa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new Ok:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new lR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new w0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=ho.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var F,D,j;(F=this._stats)==null||F.time("Overall");const v=this._transport.getRenderingIntent(r,i,h,f),{renderingIntent:A,cacheKey:w}=v;g(this,xa,!1),c||(c=this._transport.getOptionalContentConfig(A));let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const b=!!(A&$s.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(v));const k=!!(this._pdfBug&&((j=globalThis.StepperManager)!=null&&j.enabled)),_=!this.recordedBBoxes&&(m||k),T=B=>{var z,q;if(x.renderTasks.delete(N),_){const te=(z=N.gfx)==null?void 0:z.dependencyTracker.take();te&&(N.stepper&&N.stepper.setOperatorBBoxes(te,N.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=te))}b&&g(this,xa,!0),E(this,Vc,gp).call(this),B?(N.capability.reject(B),this._abortOperatorList({intentState:x,reason:B instanceof Error?B:new Error(B)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(q=globalThis.Stats)!=null&&q.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new eS({callback:T,params:{canvas:t,canvasContext:e,dependencyTracker:_?new wB(t,x.operatorList.length,k):null,viewport:s,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||(x.renderTasks=new Set)).add(N);const M=N.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([B,z])=>{var q;if(this.destroyed){T();return}if((q=this._stats)==null||q.time("Rendering"),!(z.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:B,optionalContentConfig:z}),N.operatorListChanged()}).catch(T),M}getOperatorList({intent:e="display",annotationMode:t=ho.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>im.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){a.read().then(function({value:c,done:u}){if(u){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),g(this,xa,!1),Promise.all(e)}cleanup(e=!1){g(this,xa,!0);const t=E(this,Vc,gp).call(this);return e&&t&&this._stats&&(this._stats=new Ok),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,Vc,gp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,Vc,gp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof iE){let r=JB;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Nl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}xa=new WeakMap,Vc=new WeakSet,gp=function(){if(!o(this,xa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,xa,!1),!0};var qo,jr,ba,Wc,sw,qc,Gc,Xn,My,mR,gR,yp,Nh,Dy;const ot=class ot{constructor({name:e=null,port:t=null,verbosity:s=F4()}={}){S(this,Xn);S(this,qo,Promise.withResolvers());S(this,jr,null);S(this,ba,null);S(this,Wc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(o(ot,Gc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");o(ot,Gc).set(t,this),E(this,Xn,mR).call(this,t)}else E(this,Xn,gR).call(this)}get promise(){return o(this,qo).promise}get port(){return o(this,ba)}get messageHandler(){return o(this,jr)}destroy(){var e,t;this.destroyed=!0,(e=o(this,Wc))==null||e.terminate(),g(this,Wc,null),o(ot,Gc).delete(o(this,ba)),g(this,ba,null),(t=o(this,jr))==null||t.destroy(),g(this,jr,null)}static create(e){const t=o(this,Gc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ot(e)}static get workerSrc(){if(Fi.workerSrc)return Fi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pe(this,"_setupFakeWorkerGlobal",(async()=>o(this,Nh,Dy)?o(this,Nh,Dy):(await import(this.workerSrc)).WorkerMessageHandler)())}};qo=new WeakMap,jr=new WeakMap,ba=new WeakMap,Wc=new WeakMap,sw=new WeakMap,qc=new WeakMap,Gc=new WeakMap,Xn=new WeakSet,My=function(){o(this,qo).resolve(),o(this,jr).send("configure",{verbosity:this.verbosity})},mR=function(e){g(this,ba,e),g(this,jr,new dp("main","worker",e)),o(this,jr).on("ready",()=>{}),E(this,Xn,My).call(this)},gR=function(){if(o(ot,qc)||o(ot,Nh,Dy)){E(this,Xn,yp).call(this);return}let{workerSrc:e}=ot;try{ot._isSameOrigin(window.location,e)||(e=ot._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new dp("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?o(this,qo).reject(new Error("Worker was destroyed")):E(this,Xn,yp).call(this)},i=new AbortController;t.addEventListener("error",()=>{o(this,Wc)||r()},{signal:i.signal}),s.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}g(this,jr,s),g(this,ba,t),g(this,Wc,t),E(this,Xn,My).call(this)}),s.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{E(this,Xn,yp).call(this)}});const a=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};a();return}catch{zw("The worker has been disabled.")}E(this,Xn,yp).call(this)},yp=function(){o(ot,qc)||(fe("Setting up fake worker."),g(ot,qc,!0)),ot._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){o(this,qo).reject(new Error("Worker was destroyed"));return}const t=new uB;g(this,ba,t);const s=`fake${xt(ot,sw)._++}`,r=new dp(s+"_worker",s,t);e.setup(r,t),g(this,jr,new dp(s,s+"_worker",t)),E(this,Xn,My).call(this)}).catch(e=>{o(this,qo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Nh=new WeakSet,Dy=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(ot,Nh),S(ot,sw,0),S(ot,qc,!1),S(ot,Gc,new WeakMap),Vn&&(g(ot,qc,!0),Fi.workerSrc||(Fi.workerSrc="./pdf.worker.mjs")),ot._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},ot._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ot.fromPort=e=>{if(G4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ot.create(e)};let om=ot;var Sa,Ai,Rh,Mh,Aa,Xc,vp;class n6{constructor(e,t,s,r,i,a){S(this,Xc);S(this,Sa,new Map);S(this,Ai,new Map);S(this,Rh,new Map);S(this,Mh,new Map);S(this,Aa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new lR,this.fontLoader=new rB({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return pe(this,"annotationStorage",new oE)}getRenderingIntent(e,t=ho.ENABLE,s=null,r=!1,i=!1){let a=$s.DISPLAY,l=Ob;switch(e){case"any":a=$s.ANY;break;case"display":break;case"print":a=$s.PRINT;break;default:fe(`getRenderingIntent - invalid intent: ${e}`)}const c=a&$s.PRINT&&s instanceof qN?s:this.annotationStorage;switch(t){case ho.DISABLE:a+=$s.ANNOTATIONS_DISABLE;break;case ho.ENABLE:break;case ho.ENABLE_FORMS:a+=$s.ANNOTATIONS_FORMS;break;case ho.ENABLE_STORAGE:a+=$s.ANNOTATIONS_STORAGE,l=c.serializable;break;default:fe(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=$s.IS_EDITING),i&&(a+=$s.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[a,l.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=o(this,Aa))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of o(this,Ai).values())e.push(r._destroy());o(this,Ai).clear(),o(this,Rh).clear(),o(this,Mh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Sa).clear(),this.filterFactory.destroy(),am.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Nl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Ce(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){r.close();return}Ce(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(s,r)=>{Ce(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){r.close();return}Ce(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new e6(s,this))}),e.on("DocException",s=>{t._capability.reject(ts(s))}),e.on("PasswordRequest",s=>{g(this,Aa,Promise.withResolvers());try{if(!t.onPassword)throw ts(s);const r=i=>{i instanceof Error?o(this,Aa).reject(i):o(this,Aa).resolve({password:i})};t.onPassword(r,s.code)}catch(r){o(this,Aa).reject(r)}return o(this,Aa).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;o(this,Ai).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const f=i.error;fe(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const l=new jb(i),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,m)=>globalThis.FontInspector.fontAdded(f,m):null,u=new iB(l,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:d}=i;Ce(d,"The imageRef must be defined.");for(const f of o(this,Ai).values())for(const[,m]of f.objs)if((m==null?void 0:m.ref)===d)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,i);break;case"Pattern":const h=new Ib(i);this.commonObjs.resolve(s,h.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,a])=>{var c;if(this.destroyed)return;const l=o(this,Ai).get(r);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&fe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=o(this,Rh).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&o(this,Mh).set(i.refStr,e);const a=new t6(t,i,this,this._params.pdfBug);return o(this,Ai).set(t,a),a});return o(this,Rh).set(t,r),r}getPageIndex(e){return Bb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,Xc,vp).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Xc,vp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return E(this,Xc,vp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,Xc,vp).call(this,"GetOptionalContentConfig").then(t=>new LB(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=o(this,Sa).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new MB(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return o(this,Sa).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of o(this,Ai).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),o(this,Sa).clear(),this.filterFactory.destroy(!0),am.cleanup()}}cachedPageNumber(e){if(!Bb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return o(this,Mh).get(t)??null}}Sa=new WeakMap,Ai=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,Aa=new WeakMap,Xc=new WeakSet,vp=function(e,t=null){const s=o(this,Sa).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return o(this,Sa).set(e,r),r};var Go;class s6{constructor(e){S(this,Go,null);H(this,"onContinue",null);H(this,"onError",null);g(this,Go,e)}get promise(){return o(this,Go).capability.promise}cancel(e=0){o(this,Go).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=o(this,Go).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=o(this,Go);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Go=new WeakMap;var Xo,Yc;const Vl=class Vl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){S(this,Xo,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(o(Vl,Yc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Vl,Yc).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Cd(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),o(this,Xo)&&(window.cancelAnimationFrame(o(this,Xo)),g(this,Xo,null)),o(Vl,Yc).delete(this._canvas),e||(e=new iE(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,Xo,window.requestAnimationFrame(()=>{g(this,Xo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Vl,Yc).delete(this._canvas),this.callback())))}};Xo=new WeakMap,Yc=new WeakMap,S(Vl,Yc,new WeakSet);let eS=Vl;const r6="5.4.449",i6="f44e5f0e6";var Ts,Kc,Dh,Ht,Sg,Lh,Ea,Ag,Yo,Ir,Eg,Ge,tS,nS,sS,Bl,yR,ro;const ns=class ns{constructor({editor:e=null,uiManager:t=null}){S(this,Ge);S(this,Ts,null);S(this,Kc,null);S(this,Dh);S(this,Ht,null);S(this,Sg,!1);S(this,Lh,!1);S(this,Ea,null);S(this,Ag);S(this,Yo,null);S(this,Ir,null);var s,r;e?(g(this,Lh,!1),g(this,Ea,e)):g(this,Lh,!0),g(this,Ir,(e==null?void 0:e._uiManager)||t),g(this,Ag,o(this,Ir)._eventBus),g(this,Dh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=o(this,Ir))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),o(ns,Eg)||g(ns,Eg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return pe(this,"_keyboardManager",new b0([[["Escape","mac+Escape"],ns.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ns.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ns.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ns.prototype._moveToPrevious],[["Home","mac+Home"],ns.prototype._moveToBeginning],[["End","mac+End"],ns.prototype._moveToEnd]]))}renderButton(){const e=g(this,Ts,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",o(this,Ea)&&(e.ariaControls=`${o(this,Ea).id}_colorpicker_dropdown`);const t=o(this,Ir)._signal;e.addEventListener("click",E(this,Ge,Bl).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Ge,sS).bind(this),{signal:t});const s=g(this,Kc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=o(this,Dh),e.append(s),e}renderMainDropdown(){const e=g(this,Ht,E(this,Ge,tS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===o(this,Ts)){E(this,Ge,Bl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Ge,nS).call(this,t,e)}_moveToNext(e){var t,s;if(!o(this,Ge,ro)){E(this,Ge,Bl).call(this,e);return}if(e.target===o(this,Ts)){(t=o(this,Ht).firstElementChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=o(this,Ht))==null?void 0:t.firstElementChild)||e.target===o(this,Ts)){o(this,Ge,ro)&&this._hideDropdownFromKeyboard();return}o(this,Ge,ro)||E(this,Ge,Bl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!o(this,Ge,ro)){E(this,Ge,Bl).call(this,e);return}(t=o(this,Ht).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!o(this,Ge,ro)){E(this,Ge,Bl).call(this,e);return}(t=o(this,Ht).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=o(this,Ht))==null||e.classList.add("hidden"),o(this,Ts).ariaExpanded="false",(t=o(this,Yo))==null||t.abort(),g(this,Yo,null)}_hideDropdownFromKeyboard(){var e;if(!o(this,Lh)){if(!o(this,Ge,ro)){(e=o(this,Ea))==null||e.unselect();return}this.hideDropdown(),o(this,Ts).focus({preventScroll:!0,focusVisible:o(this,Sg)})}}updateColor(e){if(o(this,Kc)&&(o(this,Kc).style.backgroundColor=e),!o(this,Ht))return;const t=o(this,Ir).highlightColors.values();for(const s of o(this,Ht).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=o(this,Ts))==null||e.remove(),g(this,Ts,null),g(this,Kc,null),(t=o(this,Ht))==null||t.remove(),g(this,Ht,null)}};Ts=new WeakMap,Kc=new WeakMap,Dh=new WeakMap,Ht=new WeakMap,Sg=new WeakMap,Lh=new WeakMap,Ea=new WeakMap,Ag=new WeakMap,Yo=new WeakMap,Ir=new WeakMap,Eg=new WeakMap,Ge=new WeakSet,tS=function(){const e=document.createElement("div"),t=o(this,Ir)._signal;e.addEventListener("contextmenu",kr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),o(this,Ea)&&(e.id=`${o(this,Ea).id}_colorpicker_dropdown`);for(const[s,r]of o(this,Ir).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",o(ns,Eg)[s]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.ariaSelected=r===o(this,Dh),i.addEventListener("click",E(this,Ge,nS).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",E(this,Ge,sS).bind(this),{signal:t}),e},nS=function(e,t){t.stopPropagation(),o(this,Ag).dispatch("switchannotationeditorparams",{source:this,type:ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},sS=function(e){ns._keyboardManager.exec(this,e)},Bl=function(e){if(o(this,Ge,ro)){this.hideDropdown();return}if(g(this,Sg,e.detail===0),o(this,Yo)||(g(this,Yo,new AbortController),window.addEventListener("pointerdown",E(this,Ge,yR).bind(this),{signal:o(this,Ir).combinedSignal(o(this,Yo))})),o(this,Ts).ariaExpanded="true",o(this,Ht)){o(this,Ht).classList.remove("hidden");return}const t=g(this,Ht,E(this,Ge,tS).call(this));o(this,Ts).append(t)},yR=function(e){var t;(t=o(this,Ht))!=null&&t.contains(e.target)||this.hideDropdown()},ro=function(){return o(this,Ht)&&!o(this,Ht).classList.contains("hidden")},S(ns,Eg,null);let Bv=ns;var Ei,kg,Fh,Cg;const Wl=class Wl{constructor(e){S(this,Ei,null);S(this,kg,null);S(this,Fh,null);g(this,kg,e),g(this,Fh,e._uiManager),o(Wl,Cg)||g(Wl,Cg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(o(this,Ei))return o(this,Ei);const{editorType:e,colorType:t,color:s}=o(this,kg),r=g(this,Ei,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",o(Wl,Cg)[e]),r.addEventListener("input",()=>{o(this,Fh).updateParams(t,r.value)},{signal:o(this,Fh)._signal}),r}update(e){o(this,Ei)&&(o(this,Ei).value=e)}destroy(){var e;(e=o(this,Ei))==null||e.remove(),g(this,Ei,null)}hideDropdown(){}};Ei=new WeakMap,kg=new WeakMap,Fh=new WeakMap,Cg=new WeakMap,S(Wl,Cg,null);let Uv=Wl;function rC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Vf(n){return Math.max(0,Math.min(255,255*n))}class iC{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Vf(e),[e,e,e]}static G_HTML([e]){const t=rC(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Vf)}static RGB_HTML(e){return`#${e.map(rC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Vf(1-Math.min(1,e+r)),Vf(1-Math.min(1,s+r)),Vf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,a=1-s,l=Math.min(r,i,a);return["CMYK",r,i,a,l]}}class a6{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Qe("Abstract method `_createSVG` called.")}}class $v extends a6{_createSVG(e){return document.createElementNS(Wi,e)}}const o6=9,Ou=new WeakSet,l6=new Date().getTimezoneOffset()*60*1e3;class Bx{static create(e){switch(e.data.annotationType){case Ft.LINK:return new uE(e);case Ft.TEXT:return new u6(e);case Ft.WIDGET:switch(e.data.fieldType){case"Tx":return new d6(e);case"Btn":return e.data.radioButton?new xR(e):e.data.checkBox?new f6(e):new p6(e);case"Ch":return new m6(e);case"Sig":return new h6(e)}return new $u(e);case Ft.POPUP:return new iS(e);case Ft.FREETEXT:return new kR(e);case Ft.LINE:return new y6(e);case Ft.SQUARE:return new v6(e);case Ft.CIRCLE:return new w6(e);case Ft.POLYLINE:return new CR(e);case Ft.CARET:return new b6(e);case Ft.INK:return new dE(e);case Ft.POLYGON:return new x6(e);case Ft.HIGHLIGHT:return new _R(e);case Ft.UNDERLINE:return new S6(e);case Ft.SQUIGGLY:return new A6(e);case Ft.STRIKEOUT:return new E6(e);case Ft.STAMP:return new TR(e);case Ft.FILEATTACHMENT:return new k6(e);default:return new yt(e)}}}var Qc,Oh,fr,_g,rS;const wE=class wE{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){S(this,_g);S(this,Qc,null);S(this,Oh,!1);S(this,fr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wE._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>a?(a=t[c+1],i=t[c+2]):t[c+1]===a&&(i=Math.max(i,t[c+2]));return[i,a]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>a?(a=c[u+1],i=c[u]):c[u+1]===a&&(i=Math.max(i,c[u]));if(i!==1/0)return[i,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${sm}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${sm}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=o(this,fr))==null?void 0:e.popup)||this.popup)==null||t.remove(),g(this,fr,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(o(this,Qc)||g(this,Qc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&E(this,_g,rS).call(this,t);let r=((i=o(this,fr))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=o(this,fr).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),g(this,fr,null),this.popup=null))}resetEdited(){var e;o(this,Qc)&&(E(this,_g,rS).call(this,o(this,Qc).rect),(e=o(this,fr))==null||e.popup.resetEdited(),g(this,Qc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof $u)&&!(this instanceof uE)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof iS){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(v>0||A>0){const x=`calc(${v}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof xR){const x=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case Xu.SOLID:a.borderStyle="solid";break;case Xu.DASHED:a.borderStyle="dashed";break;case Xu.BEVELED:fe("Unimplemented border style: beveled");break;case Xu.INSET:fe("Unimplemented border style: inset");break;case Xu.UNDERLINE:a.borderBottomStyle="solid";break}const w=t.borderColor||null;w?(g(this,Oh,!0),a.borderColor=re.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):a.borderWidth=0}const u=re.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:m}=r.rawDims;a.left=`${100*(u[0]-f)/d}%`,a.top=`${100*(u[1]-m)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*l/d}%`,a.height=`${100*c/h}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],a=i[0],l=i.slice(1);r.target.style[s]=iC[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:iC[`${a}_rgb`](l)})};return pe(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const a=s[r];if(a){const l={detail:{[r]:i},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,A,w,x]=e.subarray(2,6);if(r===v&&i===A&&t===w&&s===x)return}const{style:a}=this.container;let l;if(o(this,Oh)){const{borderColor:v,borderWidth:A}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=r-t,u=i-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let v=2,A=e.length;v<A;v+=8){const w=e[v],x=e[v+1],b=e[v+2],k=e[v+3],_=d.createElement("rect"),T=(b-t)/c,N=(i-x)/u,M=(w-b)/c,F=(x-k)/u;_.setAttribute("x",T),_.setAttribute("y",N),_.setAttribute("width",M),_.setAttribute("height",F),m.append(_),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${N}" width="${M}" height="${F}"/>`)}o(this,Oh)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate),g(this,fr,new iS({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(o(this,fr)||this.popup||this.data.popupRef)}get extraPopupElement(){return o(this,fr)}render(){Qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:l}of r){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Ou.has(u)){fe(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Ou.has(r)&&s.push({id:a,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Qc=new WeakMap,Oh=new WeakMap,fr=new WeakMap,_g=new WeakSet,rS=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let yt=wE;class c6 extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Vs,Ul,vR,wR;class uE extends yt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});S(this,Vs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(E(this,Vs,vR).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(E(this,Vs,wR).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,Vs,Ul).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),E(this,Vs,Ul).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const a=r.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),E(this,Vs,Ul).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,Vs,Ul).call(this),!this._fieldObjects){fe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:i,refs:a,include:l}=s,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:v}of y)f.add(v)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:m}=f;switch(d.push(m),f.type){case"text":{const v=f.defaultValue||"";u.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(m,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Ou.has(y)){fe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Vs=new WeakSet,Ul=function(){this.container.setAttribute("data-internal-link","")},vR=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(s.content,s.filename,i),!1},E(this,Vs,Ul).call(this)},wR=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),E(this,Vs,Ul).call(this)};class u6 extends yt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class $u extends yt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return xn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var l;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,s,r){var i,a,l;for(const[c,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,r),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":re.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||o6,i=e.style;let a;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(u/(Rx*r))||1,h=u/d;a=Math.min(r,c(h/Rx))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(u/Rx))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=re.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class d6 extends $u{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),i.setValue(a.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ou.add(s),this.contentElement=s,s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",A=>{const w=this.data.defaultFieldValue??"";s.value=d.userValue=w,d.formattedValue=null});let v=A=>{const{formattedValue:w}=d;w!=null&&(A.target.value=w),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{var b;if(d.focused)return;const{target:x}=w;if(y&&(x.type=f,m&&(x.step=m)),d.userValue){const k=d.userValue;if(y)if(f==="time"){const _=new Date(k),T=[_.getHours(),_.getMinutes(),_.getSeconds()];x.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else x.value=new Date(k-l6).toISOString().split(f==="date"?"T":".",1)[0];else x.value=k}d.lastCommittedValue=x.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const x={value(b){d.userValue=b.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:k}=b.detail;d.formattedValue=k,k!=null&&b.target!==document.activeElement&&(b.target.value=k);const _={formattedValue:k};y&&(_.value=k),e.setValue(t,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var N;const{charLimit:k}=b.detail,{target:_}=b;if(k===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",k);let T=d.userValue;!T||T.length<=k||(T=T.slice(0,k),_.value=d.userValue=T,e.setValue(t,{value:T}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(x,w)}),s.addEventListener("keydown",w=>{var k;d.commitKey=1;let x=-1;if(w.key==="Escape"?x=0:w.key==="Enter"&&!this.data.multiLine?x=2:w.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:b}=w.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:x,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const A=v;v=null,s.addEventListener("blur",w=>{var k,_;if(!d.focused||!w.relatedTarget)return;(k=this.data.actions)!=null&&k.Blur||(d.focused=!1);const{target:x}=w;let{value:b}=x;if(y){if(b&&f==="time"){const T=b.split(":").map(N=>parseInt(N,10));b=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),x.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();x.type="text"}d.userValue=b,d.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),A(w)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",w=>{var F;d.lastCommittedValue=null;const{data:x,target:b}=w,{value:k,selectionStart:_,selectionEnd:T}=b;let N=_,M=T;switch(w.inputType){case"deleteWordBackward":{const D=k.substring(0,_).match(/\w*[^\w]*$/);D&&(N-=D[0].length);break}case"deleteWordForward":{const D=k.substring(_).match(/^[^\w]*\w*/);D&&(M+=D[0].length);break}case"deleteContentBackward":_===T&&(N-=1);break;case"deleteContentForward":_===T&&(M+=1);break}w.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,change:x||"",willCommit:!1,selStart:N,selEnd:M}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class h6 extends $u{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class f6 extends $u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Ou.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,s)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class xR extends $u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Ou.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const u of this._getElementsByName(l,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const d=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===s;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class p6 extends uE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class m6 extends $u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ou.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),r.append(h)}let a=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),a=()=>{d.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=d=>{const h=d?"value":"textContent",{options:f,multiple:m}=r;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=l(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(f){a==null||a();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const v of r.options)v.selected=y.has(v.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){r.multiple=!0},remove(f){const m=r.options,y=f.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,A=>A.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:m,displayValue:y,exportValue:v}=f.detail.insert,A=r.children[m],w=document.createElement("option");w.textContent=y,w.value=v,A?A.before(w):r.append(w),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:m}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:v,exportValue:A}=y,w=document.createElement("option");w.textContent=v,w.value=A,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var m;const h=l(!0),f=l(!1);e.setValue(t,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Tg,aS;class iS extends yt{constructor(t){const{data:s,elements:r,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&yt._hasPopupData(s)});S(this,Tg);if(this.elements=r,a&&yt._hasPopupData(s)){const l=this.popup=E(this,Tg,aS).call(this);for(const c of r)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=E(this,Tg,aS).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${pd}${i}`).join(",")),this.container}}Tg=new WeakSet,aS=function(){return new g6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ps,Ko,rw,iw,jh,Ih,Et,ki,Qo,Zc,Bh,Uh,Ci,Ns,ka,Ca,kt,_a,Zo,Pg,Ta,$h,Jc,Jo,Jt,el,xe,Ly,oS,lS,cS,Fy,uS,bR,SR,AR,ER,Oy,jy,dS;class g6{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){S(this,xe);S(this,Ps,null);S(this,Ko,E(this,xe,AR).bind(this));S(this,rw,E(this,xe,dS).bind(this));S(this,iw,E(this,xe,jy).bind(this));S(this,jh,E(this,xe,Oy).bind(this));S(this,Ih,null);S(this,Et,null);S(this,ki,null);S(this,Qo,null);S(this,Zc,null);S(this,Bh,null);S(this,Uh,null);S(this,Ci,!1);S(this,Ns,null);S(this,ka,null);S(this,Ca,null);S(this,kt,null);S(this,_a,null);S(this,Zo,null);S(this,Pg,null);S(this,Ta,null);S(this,$h,null);S(this,Jc,null);S(this,Jo,!1);S(this,Jt,null);S(this,el,null);g(this,Et,e),g(this,$h,r),g(this,ki,a),g(this,Ta,l),g(this,Bh,c),g(this,Ih,t),g(this,Pg,u),g(this,Uh,d),g(this,Zc,s),g(this,Ps,f),g(this,Jt,s[0]),g(this,Qo,Dv.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),f||(E(this,xe,Ly).call(this),o(this,Et).hidden=!0,h&&E(this,xe,Oy).call(this))}renderCommentButton(){if(o(this,kt)){o(this,kt).parentNode||o(this,Jt).container.after(o(this,kt));return}if(o(this,_a)||E(this,xe,oS).call(this),!o(this,_a))return;const{signal:e}=g(this,ka,new AbortController),t=o(this,Jt).hasOwnCommentButton,s=()=>{o(this,Ps).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{o(this,Ps).toggleCommentPopup(this,!1,!0,!t)},i=()=>{o(this,Ps).toggleCommentPopup(this,!1,!1)};if(t){g(this,kt,o(this,Jt).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",o(this,Ko),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=g(this,kt,document.createElement("button"));a.className="annotationCommentButton";const l=o(this,Jt).container;a.style.zIndex=l.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,xe,cS).call(this),E(this,xe,lS).call(this),a.addEventListener("keydown",o(this,Ko),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),l.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=o(this,Jt).commentData;return e?o(this,Bh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=o(this,kt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=o(this,Jt).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return o(this,kt)}get comment(){return o(this,el)||g(this,el,o(this,Jt).commentText),o(this,el)}set comment(e){e!==this.comment&&(o(this,Jt).commentText=g(this,el,e))}focus(){var e;(e=o(this,Jt).container)==null||e.focus()}get parentBoundingClientRect(){return o(this,Jt).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){o(this,kt)&&(o(this,kt).classList.toggle("selected",e),o(this,kt).ariaExpanded=t)}setSelectedCommentButton(e){o(this,kt).classList.toggle("selected",e)}get commentPopupPosition(){if(o(this,Zo))return o(this,Zo);const{x:e,y:t,height:s}=o(this,kt).getBoundingClientRect(),{x:r,y:i,width:a,height:l}=o(this,Jt).layer.getBoundingClientRect();return[(e-r)/a,(t+s-i)/l]}set commentPopupPosition(e){g(this,Zo,e)}hasDefaultPopupPosition(){return o(this,Zo)===null}get commentButtonPosition(){return o(this,_a)}get commentButtonWidth(){return o(this,kt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=o(this,Zo)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:a,width:l,height:c}=r;o(this,Ps).showDialog(null,this,i+t*l,a+s*c,{...e,parentDimensions:r})}render(){var s,r;if(o(this,Ns))return;const e=g(this,Ns,document.createElement("div"));if(e.className="popup",o(this,Ih)){const i=e.style.outlineColor=re.makeHexColor(...o(this,Ih));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=o(this,$h))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=o(this,$h)}if(e.append(t),o(this,Qo)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Qo).valueOf()})),i.dateTime=o(this,Qo).toISOString(),t.append(i)}dN({html:o(this,xe,Fy)||o(this,ki).str,dir:(r=o(this,ki))==null?void 0:r.dir,className:"popupContent"},e),o(this,Et).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(o(this,Ps)){s?(this.remove(),g(this,el,null)):t&&(t.deleted?this.remove():(E(this,xe,cS).call(this),g(this,el,t.text))),e&&(g(this,_a,null),E(this,xe,oS).call(this),E(this,xe,lS).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}E(this,xe,Ly).call(this),o(this,Jc)||g(this,Jc,{contentsObj:o(this,ki),richText:o(this,Ta)}),e&&g(this,Ca,null),t&&t.text&&(g(this,Ta,E(this,xe,SR).call(this,t.text)),g(this,Qo,Dv.toDateObject(t.date)),g(this,ki,null)),(r=o(this,Ns))==null||r.remove(),g(this,Ns,null)}resetEdited(){var e;o(this,Jc)&&({contentsObj:xt(this,ki)._,richText:xt(this,Ta)._}=o(this,Jc),g(this,Jc,null),(e=o(this,Ns))==null||e.remove(),g(this,Ns,null),g(this,Ca,null))}remove(){var e,t,s;if((e=o(this,ka))==null||e.abort(),g(this,ka,null),(t=o(this,Ns))==null||t.remove(),g(this,Ns,null),g(this,Jo,!1),g(this,Ci,!1),(s=o(this,kt))==null||s.remove(),g(this,kt,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){g(this,Jo,this.isVisible),o(this,Jo)&&(o(this,Et).hidden=!0)}maybeShow(){o(this,Ps)||(E(this,xe,Ly).call(this),o(this,Jo)&&(o(this,Ns)||E(this,xe,jy).call(this),g(this,Jo,!1),o(this,Et).hidden=!1))}get isVisible(){return o(this,Ps)?!1:o(this,Et).hidden===!1}}Ps=new WeakMap,Ko=new WeakMap,rw=new WeakMap,iw=new WeakMap,jh=new WeakMap,Ih=new WeakMap,Et=new WeakMap,ki=new WeakMap,Qo=new WeakMap,Zc=new WeakMap,Bh=new WeakMap,Uh=new WeakMap,Ci=new WeakMap,Ns=new WeakMap,ka=new WeakMap,Ca=new WeakMap,kt=new WeakMap,_a=new WeakMap,Zo=new WeakMap,Pg=new WeakMap,Ta=new WeakMap,$h=new WeakMap,Jc=new WeakMap,Jo=new WeakMap,Jt=new WeakMap,el=new WeakMap,xe=new WeakSet,Ly=function(){var t;if(o(this,ka))return;g(this,ka,new AbortController);const{signal:e}=o(this,ka);for(const s of this.trigger)s.addEventListener("click",o(this,jh),{signal:e}),s.addEventListener("pointerenter",o(this,iw),{signal:e}),s.addEventListener("pointerleave",o(this,rw),{signal:e}),s.classList.add("popupTriggerArea");for(const s of o(this,Zc))(t=s.container)==null||t.addEventListener("keydown",o(this,Ko),{signal:e})},oS=function(){const e=o(this,Zc).find(t=>t.hasCommentButton);e&&g(this,_a,e._normalizePoint(e.commentButtonPosition))},lS=function(){if(o(this,Jt).extraPopupElement&&!o(this,Jt).editor)return;o(this,kt)||this.renderCommentButton();const[e,t]=o(this,_a),{style:s}=o(this,kt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},cS=function(){o(this,Jt).extraPopupElement||(o(this,kt)||this.renderCommentButton(),o(this,kt).style.backgroundColor=this.commentButtonColor||"")},Fy=function(){const e=o(this,Ta),t=o(this,ki);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&o(this,Ta).html||null},uS=function(){var e,t,s;return((s=(t=(e=o(this,xe,Fy))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},bR=function(){var e,t,s;return((s=(t=(e=o(this,xe,Fy))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},SR=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:o(this,xe,bR),fontSize:o(this,xe,uS)?`calc(${o(this,xe,uS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},AR=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&o(this,Ci))&&E(this,xe,Oy).call(this)},ER=function(){if(o(this,Ca)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=o(this,Bh);let a=!!o(this,Uh),l=a?o(this,Uh):o(this,Pg);for(const y of o(this,Zc))if(!l||re.intersect(y.data.rect,l)!==null){l=y.data.rect,a=!0;break}const c=re.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=a?l[2]-l[0]+5:0,h=c[0]+d,f=c[1];g(this,Ca,[100*(h-r)/t,100*(f-i)/s]);const{style:m}=o(this,Et);m.left=`${o(this,Ca)[0]}%`,m.top=`${o(this,Ca)[1]}%`},Oy=function(){if(o(this,Ps)){o(this,Ps).toggleCommentPopup(this,!1);return}g(this,Ci,!o(this,Ci)),o(this,Ci)?(E(this,xe,jy).call(this),o(this,Et).addEventListener("click",o(this,jh)),o(this,Et).addEventListener("keydown",o(this,Ko))):(E(this,xe,dS).call(this),o(this,Et).removeEventListener("click",o(this,jh)),o(this,Et).removeEventListener("keydown",o(this,Ko)))},jy=function(){o(this,Ns)||this.render(),this.isVisible?o(this,Ci)&&o(this,Et).classList.add("focused"):(E(this,xe,ER).call(this),o(this,Et).hidden=!1,o(this,Et).style.zIndex=parseInt(o(this,Et).style.zIndex)+1e3)},dS=function(){o(this,Et).classList.remove("focused"),!(o(this,Ci)||!this.isVisible)&&(o(this,Et).hidden=!0,o(this,Et).style.zIndex=parseInt(o(this,Et).style.zIndex)-1e3)};class kR extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ge.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Ng;class y6 extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Ng,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=g(this,Ng,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,Ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap;var Rg;class v6 extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Rg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=g(this,Rg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",s-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,Rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rg=new WeakMap;var Mg;class w6 extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Mg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=g(this,Mg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",r/2),l.setAttribute("rx",s/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,Mg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mg=new WeakMap;var Dg;class CR extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Dg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:a,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(a,l,!0);let u=[];for(let h=0,f=s.length;h<f;h+=2){const m=s[h]-t[0],y=t[3]-s[h+1];u.push(`${m},${y}`)}u=u.join(" ");const d=g(this,Dg,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,Dg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dg=new WeakMap;class x6 extends CR{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class b6 extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Lg,eu,Fg,hS;class dE extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Fg);S(this,Lg,null);S(this,eu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ge.HIGHLIGHT:ge.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:u}=E(this,Fg,hS).call(this,s,t),d=this.svgFactory.create(c,u,!0),h=g(this,Lg,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",l);for(let f=0,m=r.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);o(this,eu).push(y),y.setAttribute("points",r[f].join(",")),h.append(y)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,a=o(this,Lg);if(s>=0&&a.setAttribute("stroke-width",s||1),r)for(let l=0,c=o(this,eu).length;l<c;l++)o(this,eu)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:u}=E(this,Fg,hS).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return o(this,eu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap,eu=new WeakMap,Fg=new WeakSet,hS=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class _R extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ge.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class S6 extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class A6 extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class E6 extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class TR extends yt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ge.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Og,jg,fS;class k6 extends yt{constructor(t){var r;super(t,{isRenderable:!0});S(this,jg);S(this,Og,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,jg,fS).bind(this)),g(this,Og,r);const{isMac:i}=xn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&E(this,jg,fS).call(this)}),!s.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return o(this,Og)}addHighlightArea(){this.container.classList.add("highlightArea")}}Og=new WeakMap,jg=new WeakSet,fS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var tu,nu,zh,tl,Ig,su,Rs,Bg,za,Iy,mS;const xE=class xE{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:d}){S(this,za);S(this,tu,null);S(this,nu,null);S(this,zh,null);S(this,tl,new Map);S(this,Ig,null);S(this,su,null);S(this,Rs,[]);S(this,Bg,!1);this.div=e,g(this,tu,t),g(this,nu,s),g(this,Ig,l||null),g(this,su,u||null),g(this,zh,d||new oE),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return o(this,tl).size>0}async render(e){var l;const{annotations:t}=e,s=this.div;Lu(s,this.viewport);const r=new Map,i=[],a={data:null,layer:s,linkService:o(this,su),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new $v,annotationStorage:o(this,zh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===Ft.POPUP;if(u){const f=r.get(c.id);if(!f)continue;if(!this._commentManager){i.push(c);continue}a.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;a.data=c;const d=Bx.create(a);if(!d.isRenderable)continue;if(!u&&(o(this,Rs).push(d),c.popupRef)){const f=r.get(c.popupRef);f?f.push(d):r.set(c.popupRef,[d])}const h=d.render();c.hidden&&(h.style.visibility="hidden"),d._isEditable&&(o(this,tl).set(d.data.id,d),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(d))}await E(this,za,Iy).call(this);for(const c of i){const u=a.elements=r.get(c.id);a.data=c;const d=Bx.create(a);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${pd}${c.id}`,c.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}E(this,za,mS).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:o(this,su),svgFactory:new $v,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=xE._defaultBorderStyle),t.data=s;const r=Bx.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${pd}${s.id}`,o(this,Rs).push(r))}await E(this,za,Iy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Lu(t,{rotation:e.rotation}),E(this,za,mS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(o(this,tl).values())}getEditableAnnotation(e){return o(this,tl).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:r}=e,i=new c6({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:o(this,su),annotationStorage:o(this,zh)});return i.render(),i.contentElement.id=`${pd}${s}`,i.createOrUpdatePopup(),o(this,Rs).push(i),i}removeAnnotation(e){var r;const t=o(this,Rs).findIndex(i=>i.data.id===e);if(t<0)return;const[s]=o(this,Rs).splice(t,1);(r=o(this,tu))==null||r.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);E(this,za,Iy).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};tu=new WeakMap,nu=new WeakMap,zh=new WeakMap,tl=new WeakMap,Ig=new WeakMap,su=new WeakMap,Rs=new WeakMap,Bg=new WeakMap,za=new WeakSet,Iy=async function(){var s,r,i;if(o(this,Rs).length===0)return;this.div.replaceChildren();const e=[];if(!o(this,Bg)){g(this,Bg,!0);for(const{contentElement:a,data:{id:l}}of o(this,Rs)){const c=a.id=`${pd}${l}`;e.push((s=o(this,Ig))==null?void 0:s.getAriaAttributes(c).then(u=>{if(u)for(const[d,h]of u)a.setAttribute(d,h)}))}}o(this,Rs).sort(({data:{rect:[a,l,c,u]}},{data:{rect:[d,h,f,m]}})=>{if(a===c&&l===u)return 1;if(d===f&&h===m)return-1;const y=u,v=l,A=(l+u)/2,w=m,x=h,b=(h+m)/2;if(A>=w&&b<=v)return-1;if(b>=y&&A<=x)return 1;const k=(a+c)/2,_=(d+f)/2;return k-_});const t=document.createDocumentFragment();for(const a of o(this,Rs))t.append(a.container),this._commentManager?(i=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||i.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),o(this,tu))for(const a of o(this,Rs))o(this,tu).addPointerInTextLayer(a.contentElement,!1)},mS=function(){var t;if(!o(this,nu))return;const e=this.div;for(const[s,r]of o(this,nu)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const l=o(this,tl).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}o(this,nu).clear()};let pS=xE;const ey=/\r\n?|\n/g;var Ms,Ug,ru,Ds,Bt,PR,NR,RR,By,Ha,Uy,$y,MR,yS,DR;const it=class it extends nt{constructor(t){super({...t,name:"freeTextEditor"});S(this,Bt);S(this,Ms,"");S(this,Ug,`${this.id}-editor`);S(this,ru,null);S(this,Ds);H(this,"_colorPicker",null);this.color=t.color||it._defaultColor||nt._defaultLineColor,g(this,Ds,t.fontSize||it._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=it.prototype,s=a=>a.isEmpty(),r=Fu.TRANSLATE_SMALL,i=Fu.TRANSLATE_BIG;return pe(this,"_keyboardManager",new b0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){nt.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ke.FREETEXT_SIZE:it._defaultFontSize=s;break;case ke.FREETEXT_COLOR:it._defaultColor=s;break}}updateParams(t,s){switch(t){case ke.FREETEXT_SIZE:E(this,Bt,PR).call(this,s);break;case ke.FREETEXT_COLOR:E(this,Bt,NR).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ke.FREETEXT_SIZE,it._defaultFontSize],[ke.FREETEXT_COLOR,it._defaultColor||nt._defaultLineColor]]}get propertiesToUpdate(){return[[ke.FREETEXT_SIZE,o(this,Ds)],[ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Uv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ke.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-it._internalPadding*t,-(it._internalPadding+o(this,Ds))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,ru,new AbortController);const t=this._uiManager.combinedSignal(o(this,ru));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Ug)),this._isDraggable=!0,(t=o(this,ru))==null||t.abort(),g(this,ru,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=o(this,Ms),s=g(this,Ms,E(this,Bt,RR).call(this).trimEnd());if(t===s)return;const r=i=>{if(g(this,Ms,i),!i){this.remove();return}E(this,Bt,$y).call(this),this._uiManager.rebuild(this),E(this,Bt,By).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),E(this,Bt,By).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){it._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Ug)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${o(this,Ds)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let y,v;switch(this.rotation){case 0:y=t+(l[0]-f)/d,v=s+this.height-(l[1]-m)/h;break;case 90:y=t+(l[0]-f)/d,v=s-(l[1]-m)/h,[c,u]=[u,-c];break;case 180:y=t-this.width+(l[0]-f)/d,v=s-(l[1]-m)/h,[c,u]=[-c,-u];break;case 270:y=t+(l[0]-f-this.height*h)/d,v=s+(l[1]-m-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(y*i,v*a,c,u)}else this._moveAfterPaste(t,s);E(this,Bt,$y).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,v,A;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=E(y=it,Ha,yS).call(y,s.getData("text")||"").replaceAll(ey,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=l,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(ey,"")),w!==this.editorDiv){let x=d;for(const b of this.editorDiv.childNodes){if(b===w){x=h;continue}x.push(E(v=it,Ha,Uy).call(v,b))}}d.push(c.nodeValue.slice(0,u).replaceAll(ey,""))}else if(c===this.editorDiv){let w=d,x=0;for(const b of this.editorDiv.childNodes)x++===u&&(w=h),w.push(E(A=it,Ha,Uy).call(A,b))}g(this,Ms,`${d.join(`
`)}${i}${h.join(`
`)}`),E(this,Bt,$y).call(this);const f=new Range;let m=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const x=w.nodeValue.length;if(m<=x){f.setStart(w,m),f.setEnd(w,m);break}m-=x}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=it._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var l;let i=null;if(t instanceof kR){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:m,richText:y,contentsObj:v,creationDate:A,modificationDate:w},textContent:x,textPosition:b,parent:{page:{pageNumber:k}}}=t;if(!x||x.length===0)return null;i=t={annotationType:ge.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:b,pageIndex:k-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(v==null?void 0:v.str)||null,richText:y,creationDate:A,modificationDate:w}}const a=await super.deserialize(t,s,r);return g(a,Ds,t.fontSize),a.color=re.makeHexColor(...t.color),g(a,Ms,E(l=it,Ha,yS).call(l,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:o(this,Ds),value:E(this,Bt,MR).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!E(this,Bt,DR).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${o(this,Ds)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of o(this,Ms).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),s.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:o(this,Ms)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ms=new WeakMap,Ug=new WeakMap,ru=new WeakMap,Ds=new WeakMap,Bt=new WeakSet,PR=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-o(this,Ds))*this.parentScale),g(this,Ds,i),E(this,Bt,By).call(this)},r=o(this,Ds);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NR=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RR=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(E(r=it,Ha,Uy).call(r,i)),s=i);return t.join(`
`)},By=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Ha=new WeakSet,Uy=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ey,"")},$y=function(){if(this.editorDiv.replaceChildren(),!!o(this,Ms))for(const t of o(this,Ms).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},MR=function(){return o(this,Ms).replaceAll(""," ")},yS=function(t){return t.replaceAll(" ","")},DR=function(t){const{value:s,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},S(it,Ha),H(it,"_freeTextDefaultContent",""),H(it,"_internalPadding",0),H(it,"_defaultColor",null),H(it,"_defaultFontSize",10),H(it,"_type","freetext"),H(it,"_editorType",ge.FREETEXT);let gS=it;class ne{toSVGPath(){Qe("Abstract method `toSVGPath` must be implemented.")}get box(){Qe("Abstract getter `box` must be implemented.")}serialize(e,t){Qe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*r,a[l+1]=s+e[l+1]*i;return a}static _rescaleAndSwap(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*r,a[l+1]=s+e[l]*i;return a}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,a){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+a)/6,(s+i)/2,(r+a)/2]}}H(ne,"PRECISION",1e-4);var Ls,Br,Hh,Vh,_i,be,iu,au,$g,zg,Wh,qh,nl,Hg,aw,ow,Xt,wp,LR,FR,OR,jR,IR,BR;const Ki=class Ki{constructor({x:e,y:t},s,r,i,a,l=0){S(this,Xt);S(this,Ls);S(this,Br,[]);S(this,Hh);S(this,Vh);S(this,_i,[]);S(this,be,new Float32Array(18));S(this,iu);S(this,au);S(this,$g);S(this,zg);S(this,Wh);S(this,qh);S(this,nl,[]);g(this,Ls,s),g(this,qh,i*r),g(this,Vh,a),o(this,be).set([NaN,NaN,NaN,NaN,e,t],6),g(this,Hh,l),g(this,zg,o(Ki,Hg)*r),g(this,$g,o(Ki,ow)*r),g(this,Wh,r),o(this,nl).push(e,t)}isEmpty(){return isNaN(o(this,be)[8])}add({x:e,y:t}){var F;g(this,iu,e),g(this,au,t);const[s,r,i,a]=o(this,Ls);let[l,c,u,d]=o(this,be).subarray(8,12);const h=e-u,f=t-d,m=Math.hypot(h,f);if(m<o(this,$g))return!1;const y=m-o(this,zg),v=y/m,A=v*h,w=v*f;let x=l,b=c;l=u,c=d,u+=A,d+=w,(F=o(this,nl))==null||F.push(e,t);const k=-w/y,_=A/y,T=k*o(this,qh),N=_*o(this,qh);return o(this,be).set(o(this,be).subarray(2,8),0),o(this,be).set([u+T,d+N],4),o(this,be).set(o(this,be).subarray(14,18),12),o(this,be).set([u-T,d-N],16),isNaN(o(this,be)[6])?(o(this,_i).length===0&&(o(this,be).set([l+T,c+N],2),o(this,_i).push(NaN,NaN,NaN,NaN,(l+T-s)/i,(c+N-r)/a),o(this,be).set([l-T,c-N],14),o(this,Br).push(NaN,NaN,NaN,NaN,(l-T-s)/i,(c-N-r)/a)),o(this,be).set([x,b,l,c,u,d],6),!this.isEmpty()):(o(this,be).set([x,b,l,c,u,d],6),Math.abs(Math.atan2(b-c,x-l)-Math.atan2(w,A))<Math.PI/2?([l,c,u,d]=o(this,be).subarray(2,6),o(this,_i).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/i,((c+d)/2-r)/a),[l,c,x,b]=o(this,be).subarray(14,18),o(this,Br).push(NaN,NaN,NaN,NaN,((x+l)/2-s)/i,((b+c)/2-r)/a),!0):([x,b,l,c,u,d]=o(this,be).subarray(0,6),o(this,_i).push(((x+5*l)/6-s)/i,((b+5*c)/6-r)/a,((5*l+u)/6-s)/i,((5*c+d)/6-r)/a,((l+u)/2-s)/i,((c+d)/2-r)/a),[u,d,l,c,x,b]=o(this,be).subarray(12,18),o(this,Br).push(((x+5*l)/6-s)/i,((b+5*c)/6-r)/a,((5*l+u)/6-s)/i,((5*c+d)/6-r)/a,((l+u)/2-s)/i,((c+d)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=o(this,_i),t=o(this,Br);if(isNaN(o(this,be)[6])&&!this.isEmpty())return E(this,Xt,LR).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,Xt,OR).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,Xt,FR).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,a){return new UR(e,t,s,r,i,a)}getOutlines(){var h;const e=o(this,_i),t=o(this,Br),s=o(this,be),[r,i,a,l]=o(this,Ls),c=new Float32Array((((h=o(this,nl))==null?void 0:h.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(o(this,nl)[f]-r)/a,c[f+1]=(o(this,nl)[f+1]-i)/l;if(c[c.length-2]=(o(this,iu)-r)/a,c[c.length-1]=(o(this,au)-i)/l,isNaN(s[6])&&!this.isEmpty())return E(this,Xt,jR).call(this,c);const u=new Float32Array(o(this,_i).length+24+o(this,Br).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=E(this,Xt,BR).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+m],u[d+1]=t[f+m+1],d+=2}return E(this,Xt,IR).call(this,u,d),this.newFreeDrawOutline(u,c,o(this,Ls),o(this,Wh),o(this,Hh),o(this,Vh))}};Ls=new WeakMap,Br=new WeakMap,Hh=new WeakMap,Vh=new WeakMap,_i=new WeakMap,be=new WeakMap,iu=new WeakMap,au=new WeakMap,$g=new WeakMap,zg=new WeakMap,Wh=new WeakMap,qh=new WeakMap,nl=new WeakMap,Hg=new WeakMap,aw=new WeakMap,ow=new WeakMap,Xt=new WeakSet,wp=function(){const e=o(this,be).subarray(4,6),t=o(this,be).subarray(16,18),[s,r,i,a]=o(this,Ls);return[(o(this,iu)+(e[0]-t[0])/2-s)/i,(o(this,au)+(e[1]-t[1])/2-r)/a,(o(this,iu)+(t[0]-e[0])/2-s)/i,(o(this,au)+(t[1]-e[1])/2-r)/a]},LR=function(){const[e,t,s,r]=o(this,Ls),[i,a,l,c]=E(this,Xt,wp).call(this);return`M${(o(this,be)[2]-e)/s} ${(o(this,be)[3]-t)/r} L${(o(this,be)[4]-e)/s} ${(o(this,be)[5]-t)/r} L${i} ${a} L${l} ${c} L${(o(this,be)[16]-e)/s} ${(o(this,be)[17]-t)/r} L${(o(this,be)[14]-e)/s} ${(o(this,be)[15]-t)/r} Z`},FR=function(e){const t=o(this,Br);e.push(`L${t[4]} ${t[5]} Z`)},OR=function(e){const[t,s,r,i]=o(this,Ls),a=o(this,be).subarray(4,6),l=o(this,be).subarray(16,18),[c,u,d,h]=E(this,Xt,wp).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-s)/i} L${c} ${u} L${d} ${h} L${(l[0]-t)/r} ${(l[1]-s)/i}`)},jR=function(e){const t=o(this,be),[s,r,i,a]=o(this,Ls),[l,c,u,d]=E(this,Xt,wp).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(h,e,o(this,Ls),o(this,Wh),o(this,Hh),o(this,Vh))},IR=function(e,t){const s=o(this,Br);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},BR=function(e,t){const s=o(this,be).subarray(4,6),r=o(this,be).subarray(16,18),[i,a,l,c]=o(this,Ls),[u,d,h,f]=E(this,Xt,wp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/c],t),t+=24},S(Ki,Hg,8),S(Ki,aw,2),S(Ki,ow,o(Ki,Hg)+o(Ki,aw));let zv=Ki;var Gh,ou,Pa,Vg,Fs,Wg,Nt,lw,$R;class UR extends ne{constructor(t,s,r,i,a,l){super();S(this,lw);S(this,Gh);S(this,ou,new Float32Array(4));S(this,Pa);S(this,Vg);S(this,Fs);S(this,Wg);S(this,Nt);g(this,Nt,t),g(this,Fs,s),g(this,Gh,r),g(this,Wg,i),g(this,Pa,a),g(this,Vg,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,lw,$R).call(this,l);const[c,u,d,h]=o(this,ou);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,m=s.length;f<m;f+=2)s[f]=(s[f]-c)/d,s[f+1]=(s[f+1]-u)/h}toSVGPath(){const t=[`M${o(this,Nt)[4]} ${o(this,Nt)[5]}`];for(let s=6,r=o(this,Nt).length;s<r;s+=6){if(isNaN(o(this,Nt)[s])){t.push(`L${o(this,Nt)[s+4]} ${o(this,Nt)[s+5]}`);continue}t.push(`C${o(this,Nt)[s]} ${o(this,Nt)[s+1]} ${o(this,Nt)[s+2]} ${o(this,Nt)[s+3]} ${o(this,Nt)[s+4]} ${o(this,Nt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],a){const l=r-t,c=i-s;let u,d;switch(a){case 0:u=ne._rescale(o(this,Nt),t,i,l,-c),d=ne._rescale(o(this,Fs),t,i,l,-c);break;case 90:u=ne._rescaleAndSwap(o(this,Nt),t,s,l,c),d=ne._rescaleAndSwap(o(this,Fs),t,s,l,c);break;case 180:u=ne._rescale(o(this,Nt),r,s,-l,c),d=ne._rescale(o(this,Fs),r,s,-l,c);break;case 270:u=ne._rescaleAndSwap(o(this,Nt),r,i,-l,-c),d=ne._rescaleAndSwap(o(this,Fs),r,i,-l,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return o(this,ou)}newOutliner(t,s,r,i,a,l=0){return new zv(t,s,r,i,a,l)}getNewOutline(t,s){const[r,i,a,l]=o(this,ou),[c,u,d,h]=o(this,Gh),f=a*d,m=l*h,y=r*d+c,v=i*h+u,A=this.newOutliner({x:o(this,Fs)[0]*f+y,y:o(this,Fs)[1]*m+v},o(this,Gh),o(this,Wg),t,o(this,Vg),s??o(this,Pa));for(let w=2;w<o(this,Fs).length;w+=2)A.add({x:o(this,Fs)[w]*f+y,y:o(this,Fs)[w+1]*m+v});return A.getOutlines()}}Gh=new WeakMap,ou=new WeakMap,Pa=new WeakMap,Vg=new WeakMap,Fs=new WeakMap,Wg=new WeakMap,Nt=new WeakMap,lw=new WeakSet,$R=function(t){const s=o(this,Nt);let r=s[4],i=s[5];const a=[r,i,r,i];let l=r,c=i,u=r,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,v=s.length;y<v;y+=6){const A=s[y+4],w=s[y+5];isNaN(s[y])?(re.pointBoundingBox(A,w,a),c>w?(l=A,c=w):c===w&&(l=h(l,A)),d<w?(u=A,d=w):d===w&&(u=h(u,A))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,re.bezierBoundingBox(r,i,...s.slice(y,y+6),f),re.rectBoundingBox(f[0],f[1],f[2],f[3],a),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=h(l,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),r=A,i=w}const m=o(this,ou);m[0]=a[0]-o(this,Pa),m[1]=a[1]-o(this,Pa),m[2]=a[2]-a[0]+2*o(this,Pa),m[3]=a[3]-a[1]+2*o(this,Pa),this.firstPoint=[l,c],this.lastPoint=[u,d]};var qg,Gg,Xg,sl,Ur,Kn,zR,zy,HR,VR,wS;class vS{constructor(e,t=0,s=0,r=!0){S(this,Kn);S(this,qg);S(this,Gg);S(this,Xg);S(this,sl,[]);S(this,Ur,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:v,y:A,width:w,height:x}of e){const b=Math.floor((v-t)/a)*a,k=Math.ceil((v+w+t)/a)*a,_=Math.floor((A-t)/a)*a,T=Math.ceil((A+x+t)/a)*a,N=[b,_,T,!0],M=[k,_,T,!1];o(this,sl).push(N,M),re.rectBoundingBox(b,_,k,T,i)}const l=i[2]-i[0]+2*s,c=i[3]-i[1]+2*s,u=i[0]-s,d=i[1]-s;let h=r?-1/0:1/0,f=1/0;const m=o(this,sl).at(r?-1:-2),y=[m[0],m[2]];for(const v of o(this,sl)){const[A,w,x,b]=v;!b&&r?w<f?(f=w,h=A):w===f&&(h=Math.max(h,A)):b&&!r&&(w<f?(f=w,h=A):w===f&&(h=Math.min(h,A))),v[0]=(A-u)/l,v[1]=(w-d)/c,v[2]=(x-d)/c}g(this,qg,new Float32Array([u,d,l,c])),g(this,Gg,[h,f]),g(this,Xg,y)}getOutlines(){o(this,sl).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of o(this,sl))t[3]?(e.push(...E(this,Kn,wS).call(this,t)),E(this,Kn,HR).call(this,t)):(E(this,Kn,VR).call(this,t),e.push(...E(this,Kn,wS).call(this,t)));return E(this,Kn,zR).call(this,e)}}qg=new WeakMap,Gg=new WeakMap,Xg=new WeakMap,sl=new WeakMap,Ur=new WeakMap,Kn=new WeakSet,zR=function(e){const t=[],s=new Set;for(const a of e){const[l,c,u]=a;t.push([l,c,a],[l,u,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const r=[];let i;for(;s.size>0;){const a=s.values().next().value;let[l,c,u,d,h]=a;s.delete(a);let f=l,m=c;for(i=[l,u],r.push(i);;){let y;if(s.has(d))y=d;else if(s.has(h))y=h;else break;s.delete(y),[l,c,u,d,h]=y,f!==l&&(i.push(f,m,l,m===c?c:u),f=l),m=m===c?u:c}i.push(f,m)}return new C6(r,o(this,qg),o(this,Gg),o(this,Xg))},zy=function(e){const t=o(this,Ur);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,a=t[i][0];if(a===e)return i;a<e?s=i+1:r=i-1}return r+1},HR=function([,e,t]){const s=E(this,Kn,zy).call(this,e);o(this,Ur).splice(s,0,[e,t])},VR=function([,e,t]){const s=E(this,Kn,zy).call(this,e);for(let r=s;r<o(this,Ur).length;r++){const[i,a]=o(this,Ur)[r];if(i!==e)break;if(i===e&&a===t){o(this,Ur).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,a]=o(this,Ur)[r];if(i!==e)break;if(i===e&&a===t){o(this,Ur).splice(r,1);return}}},wS=function(e){const[t,s,r]=e,i=[[t,s,r]],a=E(this,Kn,zy).call(this,r);for(let l=0;l<a;l++){const[c,u]=o(this,Ur)[l];for(let d=0,h=i.length;d<h;d++){const[,f,m]=i[d];if(!(u<=f||m<=c)){if(f>=c){if(m>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,m>u&&i.push([t,u,m])}}}return i};var Yg,Xh;class C6 extends ne{constructor(t,s,r,i){super();S(this,Yg);S(this,Xh);g(this,Xh,t),g(this,Yg,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of o(this,Xh)){let[r,i]=s;t.push(`M${r} ${i}`);for(let a=2;a<s.length;a+=2){const l=s[a],c=s[a+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],a){const l=[],c=r-t,u=i-s;for(const d of o(this,Xh)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;l.push(h)}return l}get box(){return o(this,Yg)}get classNamesForOutlining(){return["highlightOutline"]}}Yg=new WeakMap,Xh=new WeakMap;class xS extends zv{newFreeDrawOutline(e,t,s,r,i,a){return new _6(e,t,s,r,i,a)}}class _6 extends UR{newOutliner(e,t,s,r,i,a=0){return new xS(e,t,s,r,i,a)}}var Yh,Kg,Na,lu,Qg,us,Zg,Jg,cu,Os,js,hn,Kh,Qh,Rn,Zh,pr,e0,we,bS,Hy,WR,qR,GR,SS,$l,wr,ed,XR,Vy,Wy,YR,KR,QR,ZR,JR;const Re=class Re extends nt{constructor(t){super({...t,name:"highlightEditor"});S(this,we);S(this,Yh,null);S(this,Kg,0);S(this,Na);S(this,lu,null);S(this,Qg,null);S(this,us,null);S(this,Zg,null);S(this,Jg,0);S(this,cu,null);S(this,Os,null);S(this,js,null);S(this,hn,!1);S(this,Kh,null);S(this,Qh,null);S(this,Rn,null);S(this,Zh,"");S(this,pr);S(this,e0,"");this.color=t.color||Re._defaultColor,g(this,pr,t.thickness||Re._defaultThickness),this.opacity=t.opacity||Re._defaultOpacity,g(this,Na,t.boxes||null),g(this,e0,t.methodOfCreation||""),g(this,Zh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(g(this,hn,!0),E(this,we,Hy).call(this,t),E(this,we,$l).call(this)):o(this,Na)&&(g(this,Yh,t.anchorNode),g(this,Kg,t.anchorOffset),g(this,Zg,t.focusNode),g(this,Jg,t.focusOffset),E(this,we,bS).call(this),E(this,we,$l).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Re.prototype;return pe(this,"_keyboardManager",new b0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,hn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:o(this,pr),methodOfCreation:o(this,e0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;nt.initialize(t,s),Re._defaultColor||(Re._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ke.HIGHLIGHT_COLOR:Re._defaultColor=s;break;case ke.HIGHLIGHT_THICKNESS:Re._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return o(this,Qh)}get commentButtonPosition(){return o(this,Kh)}updateParams(t,s){switch(t){case ke.HIGHLIGHT_COLOR:E(this,we,WR).call(this,s);break;case ke.HIGHLIGHT_THICKNESS:E(this,we,qR).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,Re._defaultColor],[ke.HIGHLIGHT_THICKNESS,Re._defaultThickness]]}get propertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,this.color||Re._defaultColor],[ke.HIGHLIGHT_THICKNESS,o(this,pr)||Re._defaultThickness],[ke.HIGHLIGHT_FREE,o(this,hn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(o(this,js),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=o(this,Qg))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",g(this,Qg,new Bv({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,we,Wy).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,we,Wy).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,we,SS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,we,$l).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?E(this,we,SS).call(this):t&&(E(this,we,$l).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,a,l;const{drawLayer:s}=this.parent;let r;o(this,hn)?(t=(t-this.rotation+360)%360,r=E(i=Re,wr,ed).call(i,o(this,Os).box,t)):r=E(a=Re,wr,ed).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(o(this,js),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(o(this,Rn),{bbox:E(l=Re,wr,ed).call(l,o(this,us).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();o(this,Zh)&&(t.setAttribute("aria-label",o(this,Zh)),t.setAttribute("role","mark")),o(this,hn)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,we,XR).bind(this),{signal:this._uiManager._signal});const s=g(this,cu,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=o(this,lu),this.setDims(),vN(this,o(this,cu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,Rn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,Rn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,we,Vy).call(this,!0);break;case 1:case 3:E(this,we,Vy).call(this,!1);break}}select(){var t;super.select(),o(this,Rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,Rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),o(this,Rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,Rn),{rootClass:{selected:!1}}),o(this,hn)||E(this,we,Vy).call(this,!1))}get _mustFixPosition(){return!o(this,hn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(o(this,js),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(o(this,Rn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:a}){const{x:l,y:c,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),m=y=>{h.abort(),E(this,wr,ZR).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Tt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",kr,{signal:f}),r.addEventListener("pointermove",E(this,wr,QR).bind(this,t),{signal:f}),this._freeHighlight=new xS({x:i,y:a},[l,c,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var v,A,w,x;let i=null;if(t instanceof _R){const{data:{quadPoints:b,rect:k,rotation:_,id:T,color:N,opacity:M,popupRef:F,richText:D,contentsObj:j,creationDate:B,modificationDate:z},parent:{page:{pageNumber:q}}}=t;i=t={annotationType:ge.HIGHLIGHT,color:Array.from(N),opacity:M,quadPoints:b,boxes:null,pageIndex:q-1,rect:k.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:D,comment:(j==null?void 0:j.str)||null,creationDate:B,modificationDate:z}}else if(t instanceof dE){const{data:{inkLists:b,rect:k,rotation:_,id:T,color:N,borderStyle:{rawWidth:M},popupRef:F,richText:D,contentsObj:j,creationDate:B,modificationDate:z},parent:{page:{pageNumber:q}}}=t;i=t={annotationType:ge.HIGHLIGHT,color:Array.from(N),thickness:M,inkLists:b,boxes:null,pageIndex:q-1,rect:k.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:D,comment:(j==null?void 0:j.str)||null,creationDate:B,modificationDate:z}}const{color:a,quadPoints:l,inkLists:c,opacity:u}=t,d=await super.deserialize(t,s,r);d.color=re.makeHexColor(...a),d.opacity=u||1,c&&g(d,pr,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[m,y]=d.pageTranslation;if(l){const b=g(d,Na,[]);for(let k=0;k<l.length;k+=8)b.push({x:(l[k]-m)/h,y:1-(l[k+1]-y)/f,width:(l[k+2]-l[k])/h,height:(l[k+1]-l[k+5])/f});E(v=d,we,bS).call(v),E(A=d,we,$l).call(A),d.rotate(d.rotation)}else if(c){g(d,hn,!0);const b=c[0],k={x:b[0]-m,y:f-(b[1]-y)},_=new xS(k,[0,0,h,f],1,o(d,pr)/2,!0,.001);for(let M=0,F=b.length;M<F;M+=2)k.x=b[M]-m,k.y=f-(b[M+1]-y),_.add(k);const{id:T,clipPathId:N}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);E(w=d,we,Hy).call(w,{highlightOutlines:_.getOutlines(),highlightId:T,clipPathId:N}),E(x=d,we,$l).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:o(this,pr),quadPoints:E(this,we,YR).call(this),outlines:E(this,we,KR).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!E(this,we,JR).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Yh=new WeakMap,Kg=new WeakMap,Na=new WeakMap,lu=new WeakMap,Qg=new WeakMap,us=new WeakMap,Zg=new WeakMap,Jg=new WeakMap,cu=new WeakMap,Os=new WeakMap,js=new WeakMap,hn=new WeakMap,Kh=new WeakMap,Qh=new WeakMap,Rn=new WeakMap,Zh=new WeakMap,pr=new WeakMap,e0=new WeakMap,we=new WeakSet,bS=function(){const t=new vS(o(this,Na),.001);g(this,Os,t.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,Os).box;const s=new vS(o(this,Na),.0025,.001,this._uiManager.direction==="ltr");g(this,us,s.getOutlines());const{firstPoint:r}=o(this,Os);g(this,Kh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=o(this,us);g(this,Qh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Hy=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,m;if(g(this,Os,t),g(this,us,t.getNewOutline(o(this,pr)/2+1.5,.0025)),s>=0)g(this,js,s),g(this,lu,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),g(this,Rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,us).box,path:{d:o(this,us).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,js),{bbox:E(f=Re,wr,ed).call(f,o(this,Os).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,Rn),{bbox:E(m=Re,wr,ed).call(m,o(this,us).box,y),path:{d:o(this,us).toSVGPath()}})}const[a,l,c,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=u;break;case 90:{const[y,v]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*v/y,this.height=u*y/v;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[y,v]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*v/y,this.height=u*y/v;break}}const{firstPoint:d}=t;g(this,Kh,[(d[0]-a)/c,(d[1]-l)/u]);const{lastPoint:h}=o(this,us);g(this,Qh,[(h[0]-a)/c,(h[1]-l)/u])},WR=function(t){const s=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Re._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},qR=function(t){const s=o(this,pr),r=i=>{g(this,pr,i),E(this,we,GR).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},GR=function(t){o(this,hn)&&(E(this,we,Hy).call(this,{highlightOutlines:o(this,Os).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},SS=function(){o(this,js)===null||!this.parent||(this.parent.drawLayer.remove(o(this,js)),g(this,js,null),this.parent.drawLayer.remove(o(this,Rn)),g(this,Rn,null))},$l=function(t=this.parent){o(this,js)===null&&({id:xt(this,js)._,clipPathId:xt(this,lu)._}=t.drawLayer.draw({bbox:o(this,Os).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:o(this,hn)},path:{d:o(this,Os).toSVGPath()}},!1,!0),g(this,Rn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,hn)},bbox:o(this,us).box,path:{d:o(this,us).toSVGPath()}},o(this,hn))),o(this,cu)&&(o(this,cu).style.clipPath=o(this,lu)))},wr=new WeakSet,ed=function([t,s,r,i],a){switch(a){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},XR=function(t){Re._keyboardManager.exec(this,t)},Vy=function(t){if(!o(this,Yh))return;const s=window.getSelection();t?s.setPosition(o(this,Yh),o(this,Kg)):s.setPosition(o(this,Zg),o(this,Jg))},Wy=function(){return o(this,hn)?this.rotation:0},YR=function(){if(o(this,hn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,a=o(this,Na),l=new Float32Array(a.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of a){const m=u*t+r,y=(1-d)*s+i;l[c]=l[c+4]=m,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=m+h*t,l[c+5]=l[c+7]=y-f*s,c+=8}return l},KR=function(t){return o(this,Os).serialize(t,E(this,we,Wy).call(this))},QR=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ZR=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},JR=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},S(Re,wr),H(Re,"_defaultColor",null),H(Re,"_defaultOpacity",1),H(Re,"_defaultThickness",12),H(Re,"_type","highlight"),H(Re,"_editorType",ge.HIGHLIGHT),H(Re,"_freeHighlightId",-1),H(Re,"_freeHighlight",null),H(Re,"_freeHighlightClipId","");let Hv=Re;var uu;class eM{constructor(){S(this,uu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){o(this,uu)[e]=t}toSVGProperties(){const e=o(this,uu);return g(this,uu,Object.create(null)),{root:e}}reset(){g(this,uu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Qe("Not implemented")}}uu=new WeakMap;var Is,Jh,en,du,hu,Pe,AS,ES,kS,xp,tM,qy,bp,td;const Ae=class Ae extends nt{constructor(t){super(t);S(this,Pe);S(this,Is,null);S(this,Jh);H(this,"_colorPicker",null);H(this,"_drawId",null);g(this,Jh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(E(this,Pe,AS).call(this,t),E(this,Pe,xp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(s))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Qe("Not implemented")}static get typesMap(){Qe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(o(Ae,en).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,a=i[s],l=c=>{var d;i.updateProperty(s,c);const u=o(this,Is).updateProperty(s,c);u&&E(this,Pe,bp).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(o(this,Is).getPathResizingSVGProperties(E(this,Pe,qy).call(this)),{bbox:E(this,Pe,td).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(o(this,Is).getPathResizedSVGProperties(E(this,Pe,qy).call(this)),{bbox:E(this,Pe,td).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,Pe,td).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties(o(this,Is).getPathTranslatedSVGProperties(E(this,Pe,qy).call(this),this.parentDimensions),{bbox:E(this,Pe,td).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,Jh)&&(g(this,Jh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,Pe,kS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Pe,xp).call(this),E(this,Pe,bp).call(this,o(this,Is).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,Pe,kS).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,Pe,xp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ae._mergeSVGProperties({bbox:E(this,Pe,td).call(this)},o(this,Is).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Pe,bp).call(this,o(this,Is).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,a){Qe("Not implemented")}static startDrawing(t,s,r,i){var A;const{target:a,offsetX:l,offsetY:c,pointerId:u,pointerType:d}=i;if(Cn.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=t,{width:f,height:m}=a.getBoundingClientRect(),y=g(Ae,du,new AbortController),v=t.combinedSignal(y);if(Cn.setPointer(d,u),window.addEventListener("pointerup",w=>{Cn.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:v}),window.addEventListener("pointercancel",w=>{Cn.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",w=>{Cn.isSamePointerType(w.pointerType)&&(Cn.initializeAndAddPointerId(w.pointerId),o(Ae,en).isCancellable()&&(o(Ae,en).removeLastElement(),o(Ae,en).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",kr,{signal:v}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),a.addEventListener("touchmove",w=>{Cn.isSameTimeStamp(w.timeStamp)&&Tt(w)},{signal:v}),t.toggleDrawing(),(A=s._editorUndoBar)==null||A.hide(),o(Ae,en)){t.drawLayer.updateProperties(this._currentDrawId,o(Ae,en).startNew(l,c,f,m,h));return}s.updateUIForDefaultProperties(this),g(Ae,en,this.createDrawerInstance(l,c,f,m,h)),g(Ae,hu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(o(Ae,hu).toSVGProperties(),o(Ae,en).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Cn.isSameTimeStamp(t.timeStamp),!o(Ae,en))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(Cn.isSamePointerId(i)){if(Cn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(Ae,en).add(s,r)),Cn.setTimeStamp(t.timeStamp),Tt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,g(Ae,en,null),g(Ae,hu,null),Cn.clearPointerType(),Cn.clearTimeStamp()),o(Ae,du)&&(o(Ae,du).abort(),g(Ae,du,null),Cn.clearPointerIds())}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,o(Ae,en).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=o(Ae,en),i=this._currentDrawId,a=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ke.DRAW_STEP),!o(Ae,en).isEmpty()){const{pageDimensions:[r,i],scale:a}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(Ae,en).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:o(Ae,hu),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,a,l){Qe("Not implemented")}static async deserialize(t,s,r){var h,f;const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=s.viewport,u=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),d=await super.deserialize(t,s,r);return d.createDrawingOptions(t),E(h=d,Pe,AS).call(h,{drawOutlines:u}),E(f=d,Pe,xp).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,r]=this.pageTranslation,[i,a]=this.pageDimensions;return o(this,Is).serialize([s,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Is=new WeakMap,Jh=new WeakMap,en=new WeakMap,du=new WeakMap,hu=new WeakMap,Pe=new WeakSet,AS=function({drawOutlines:t,drawId:s,drawingOptions:r}){g(this,Is,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=E(this,Pe,ES).call(this,t,this.parent),E(this,Pe,bp).call(this,t.box)},ES=function(t,s){const{id:r}=s.drawLayer.draw(Ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},kS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},xp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,Pe,ES).call(this,o(this,Is),t)}},tM=function([t,s,r,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[s,1-t,r*(l/a),i*(a/l)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(l/a),i*(a/l)];default:return[t,s,r,i]}},qy=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-s,t,r*(a/l),i*(l/a)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(a/l),i*(l/a)];default:return[t,s,r,i]}},bp=function(t){[this.x,this.y,this.width,this.height]=E(this,Pe,tM).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},td=function(){const{x:t,y:s,width:r,height:i,rotation:a,parentRotation:l,parentDimensions:[c,u]}=this;switch((a*4+l)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(c/u),i*(u/c),r*(c/u)];case 5:return[1-s,t,r*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-s,i*(u/c),r*(c/u)];case 7:return[s-r*(c/u),1-t-i*(u/c),r*(c/u),i*(u/c)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/c),s,i*(u/c),r*(c/u)];case 13:return[1-s-r*(c/u),t-i*(u/c),r*(c/u),i*(u/c)];case 14:return[1-t,1-s-r*(c/u),i*(u/c),r*(c/u)];case 15:return[s,1-t,r*(c/u),i*(u/c)];default:return[t,s,r,i]}},H(Ae,"_currentDrawId",-1),H(Ae,"_currentParent",null),S(Ae,en,null),S(Ae,du,null),S(Ae,hu,null),H(Ae,"_INNER_MARGIN",3);let Vv=Ae;var Ti,tn,nn,fu,ef,Un,fn,mr,pu,mu,gu,tf,Gy;class T6{constructor(e,t,s,r,i,a){S(this,tf);S(this,Ti,new Float64Array(6));S(this,tn);S(this,nn);S(this,fu);S(this,ef);S(this,Un);S(this,fn,"");S(this,mr,0);S(this,pu,new A0);S(this,mu);S(this,gu);g(this,mu,s),g(this,gu,r),g(this,fu,i),g(this,ef,a),[e,t]=E(this,tf,Gy).call(this,e,t);const l=g(this,tn,[NaN,NaN,NaN,NaN,e,t]);g(this,Un,[e,t]),g(this,nn,[{line:l,points:o(this,Un)}]),o(this,Ti).set(l,0)}updateProperty(e,t){e==="stroke-width"&&g(this,ef,t)}isEmpty(){return!o(this,nn)||o(this,nn).length===0}isCancellable(){return o(this,Un).length<=10}add(e,t){[e,t]=E(this,tf,Gy).call(this,e,t);const[s,r,i,a]=o(this,Ti).subarray(2,6),l=e-i,c=t-a;return Math.hypot(o(this,mu)*l,o(this,gu)*c)<=2?null:(o(this,Un).push(e,t),isNaN(s)?(o(this,Ti).set([i,a,e,t],2),o(this,tn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(o(this,Ti)[0])&&o(this,tn).splice(6,6),o(this,Ti).set([s,r,i,a,e,t],0),o(this,tn).push(...ne.createBezierPoints(s,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(o(this,Un).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){g(this,mu,s),g(this,gu,r),g(this,fu,i),[e,t]=E(this,tf,Gy).call(this,e,t);const a=g(this,tn,[NaN,NaN,NaN,NaN,e,t]);g(this,Un,[e,t]);const l=o(this,nn).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),o(this,nn).push({line:a,points:o(this,Un)}),o(this,Ti).set(a,0),g(this,mr,0),this.toSVGPath(),null}getLastElement(){return o(this,nn).at(-1)}setLastElement(e){return o(this,nn)?(o(this,nn).push(e),g(this,tn,e.line),g(this,Un,e.points),g(this,mr,0),{path:{d:this.toSVGPath()}}):o(this,pu).setLastElement(e)}removeLastElement(){if(!o(this,nn))return o(this,pu).removeLastElement();o(this,nn).pop(),g(this,fn,"");for(let e=0,t=o(this,nn).length;e<t;e++){const{line:s,points:r}=o(this,nn)[e];g(this,tn,s),g(this,Un,r),g(this,mr,0),this.toSVGPath()}return{path:{d:o(this,fn)}}}toSVGPath(){const e=ne.svgRound(o(this,tn)[4]),t=ne.svgRound(o(this,tn)[5]);if(o(this,Un).length===2)return g(this,fn,`${o(this,fn)} M ${e} ${t} Z`),o(this,fn);if(o(this,Un).length<=6){const r=o(this,fn).lastIndexOf("M");g(this,fn,`${o(this,fn).slice(0,r)} M ${e} ${t}`),g(this,mr,6)}if(o(this,Un).length===4){const r=ne.svgRound(o(this,tn)[10]),i=ne.svgRound(o(this,tn)[11]);return g(this,fn,`${o(this,fn)} L ${r} ${i}`),g(this,mr,12),o(this,fn)}const s=[];o(this,mr)===0&&(s.push(`M ${e} ${t}`),g(this,mr,6));for(let r=o(this,mr),i=o(this,tn).length;r<i;r+=6){const[a,l,c,u,d,h]=o(this,tn).slice(r,r+6).map(ne.svgRound);s.push(`C${a} ${l} ${c} ${u} ${d} ${h}`)}return g(this,fn,o(this,fn)+s.join(" ")),g(this,mr,o(this,tn).length),o(this,fn)}getOutlines(e,t,s,r){const i=o(this,nn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),o(this,pu).build(o(this,nn),e,t,s,o(this,fu),o(this,ef),r),g(this,Ti,null),g(this,tn,null),g(this,nn,null),g(this,fn,null),o(this,pu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ti=new WeakMap,tn=new WeakMap,nn=new WeakMap,fu=new WeakMap,ef=new WeakMap,Un=new WeakMap,fn=new WeakMap,mr=new WeakMap,pu=new WeakMap,mu=new WeakMap,gu=new WeakMap,tf=new WeakSet,Gy=function(e,t){return ne._normalizePoint(e,t,o(this,mu),o(this,gu),o(this,fu))};var $n,t0,n0,Bs,Pi,Ni,nf,sf,yu,yn,Gi,nM,sM,rM;class A0 extends ne{constructor(){super(...arguments);S(this,yn);S(this,$n);S(this,t0,0);S(this,n0);S(this,Bs);S(this,Pi);S(this,Ni);S(this,nf);S(this,sf);S(this,yu)}build(t,s,r,i,a,l,c){g(this,Pi,s),g(this,Ni,r),g(this,nf,i),g(this,sf,a),g(this,yu,l),g(this,n0,c??0),g(this,Bs,t),E(this,yn,sM).call(this)}get thickness(){return o(this,yu)}setLastElement(t){return o(this,Bs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,Bs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of o(this,Bs)){if(t.push(`M${ne.svgRound(s[4])} ${ne.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ne.svgRound(s[10])} ${ne.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[a,l,c,u,d,h]=s.subarray(r,r+6).map(ne.svgRound);t.push(`C${a} ${l} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,s,r,i],a){const l=[],c=[],[u,d,h,f]=E(this,yn,nM).call(this);let m,y,v,A,w,x,b,k,_;switch(o(this,sf)){case 0:_=ne._rescale,m=t,y=s+i,v=r,A=-i,w=t+u*r,x=s+(1-d-f)*i,b=t+(u+h)*r,k=s+(1-d)*i;break;case 90:_=ne._rescaleAndSwap,m=t,y=s,v=r,A=i,w=t+d*r,x=s+u*i,b=t+(d+f)*r,k=s+(u+h)*i;break;case 180:_=ne._rescale,m=t+r,y=s,v=-r,A=i,w=t+(1-u-h)*r,x=s+d*i,b=t+(1-u)*r,k=s+(d+f)*i;break;case 270:_=ne._rescaleAndSwap,m=t+r,y=s+i,v=-r,A=-i,w=t+(1-d-f)*r,x=s+(1-u-h)*i,b=t+(1-d)*r,k=s+(1-u)*i;break}for(const{line:T,points:N}of o(this,Bs))l.push(_(T,m,y,v,A,a?new Array(T.length):null)),c.push(_(N,m,y,v,A,a?new Array(N.length):null));return{lines:l,points:c,rect:[w,x,b,k]}}static deserialize(t,s,r,i,a,{paths:{lines:l,points:c},rotation:u,thickness:d}){const h=[];let f,m,y,v,A;switch(u){case 0:A=ne._rescale,f=-t/r,m=s/i+1,y=1/r,v=-1/i;break;case 90:A=ne._rescaleAndSwap,f=-s/i,m=-t/r,y=1/i,v=1/r;break;case 180:A=ne._rescale,f=t/r+1,m=-s/i,y=-1/r,v=1/i;break;case 270:A=ne._rescaleAndSwap,f=s/i+1,m=t/r+1,y=-1/i,v=-1/r;break}if(!l){l=[];for(const x of c){const b=x.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const k=new Float32Array(3*(b-2));l.push(k);let[_,T,N,M]=x.subarray(0,4);k.set([NaN,NaN,NaN,NaN,_,T],0);for(let F=4;F<b;F+=2){const D=x[F],j=x[F+1];k.set(ne.createBezierPoints(_,T,N,M,D,j),(F-2)*3),[_,T,N,M]=[N,M,D,j]}}}for(let x=0,b=l.length;x<b;x++)h.push({line:A(l[x].map(k=>k??NaN),f,m,y,v),points:A(c[x].map(k=>k??NaN),f,m,y,v)});const w=new this.prototype.constructor;return w.build(h,r,i,1,u,d,a),w}get box(){return o(this,$n)}updateProperty(t,s){return t==="stroke-width"?E(this,yn,rM).call(this,s):null}updateParentDimensions([t,s],r){const[i,a]=E(this,yn,Gi).call(this);g(this,Pi,t),g(this,Ni,s),g(this,nf,r);const[l,c]=E(this,yn,Gi).call(this),u=l-i,d=c-a,h=o(this,$n);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return g(this,t0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,$n).map(ne.svgRound).join(" ")}get defaultProperties(){const[t,s]=o(this,$n);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=o(this,$n);let r=0,i=0,a=0,l=0,c=0,u=0;switch(o(this,t0)){case 90:i=s/t,a=-t/s,c=t;break;case 180:r=-1,l=-1,c=t,u=s;break;case 270:i=-s/t,a=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${a} ${l} ${ne.svgRound(c)} ${ne.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[a,l]=E(this,yn,Gi).call(this),[c,u,d,h]=o(this,$n);if(Math.abs(d-a)<=ne.PRECISION||Math.abs(h-l)<=ne.PRECISION){const A=t+r/2-(c+d/2),w=s+i/2-(u+h/2);return{path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(s)}`,transform:`${this.rotationTransform} translate(${A} ${w})`}}}const f=(r-2*a)/(d-2*a),m=(i-2*l)/(h-2*l),y=d/r,v=h/i;return{path:{"transform-origin":`${ne.svgRound(c)} ${ne.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${v}) translate(${ne.svgRound(a)} ${ne.svgRound(l)}) scale(${f} ${m}) translate(${ne.svgRound(-a)} ${ne.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[a,l]=E(this,yn,Gi).call(this),c=o(this,$n),[u,d,h,f]=c;if(c[0]=t,c[1]=s,c[2]=r,c[3]=i,Math.abs(h-a)<=ne.PRECISION||Math.abs(f-l)<=ne.PRECISION){const w=t+r/2-(u+h/2),x=s+i/2-(d+f/2);for(const{line:b,points:k}of o(this,Bs))ne._translate(b,w,x,b),ne._translate(k,w,x,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*a)/(h-2*a),y=(i-2*l)/(f-2*l),v=-m*(u+a)+t+a,A=-y*(d+l)+s+l;if(m!==1||y!==1||v!==0||A!==0)for(const{line:w,points:x}of o(this,Bs))ne._rescale(w,v,A,m,y,w),ne._rescale(x,v,A,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,a]=r,l=o(this,$n),c=t-l[0],u=s-l[1];if(o(this,Pi)===i&&o(this,Ni)===a)for(const{line:d,points:h}of o(this,Bs))ne._translate(d,c,u,d),ne._translate(h,c,u,h);else{const d=o(this,Pi)/i,h=o(this,Ni)/a;g(this,Pi,i),g(this,Ni,a);for(const{line:f,points:m}of o(this,Bs))ne._rescale(f,c,u,d,h,f),ne._rescale(m,c,u,d,h,m);l[2]*=d,l[3]*=h}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(s)}`}}}get defaultSVGProperties(){const t=o(this,$n);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t[0])} ${ne.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}$n=new WeakMap,t0=new WeakMap,n0=new WeakMap,Bs=new WeakMap,Pi=new WeakMap,Ni=new WeakMap,nf=new WeakMap,sf=new WeakMap,yu=new WeakMap,yn=new WeakSet,Gi=function(t=o(this,yu)){const s=o(this,n0)+t/2*o(this,nf);return o(this,sf)%180===0?[s/o(this,Pi),s/o(this,Ni)]:[s/o(this,Ni),s/o(this,Pi)]},nM=function(){const[t,s,r,i]=o(this,$n),[a,l]=E(this,yn,Gi).call(this,0);return[t+a,s+l,r-2*a,i-2*l]},sM=function(){const t=g(this,$n,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of o(this,Bs)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)re.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],l=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,m,y,v]=i.subarray(c,c+6);re.bezierBoundingBox(a,l,d,h,f,m,y,v,t),a=y,l=v}}const[s,r]=E(this,yn,Gi).call(this);t[0]=Wn(t[0]-s,0,1),t[1]=Wn(t[1]-r,0,1),t[2]=Wn(t[2]+s,0,1),t[3]=Wn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},rM=function(t){const[s,r]=E(this,yn,Gi).call(this);g(this,yu,t);const[i,a]=E(this,yn,Gi).call(this),[l,c]=[i-s,a-r],u=o(this,$n);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class Ww extends eM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Ww(this._viewParameters);return e.updateAll(this),e}}var cw,iM;const wd=class wd extends Vv{constructor(t){super({...t,name:"inkEditor"});S(this,cw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){nt.initialize(t,s),this._defaultDrawingOptions=new Ww(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return pe(this,"typesMap",new Map([[ke.INK_THICKNESS,"stroke-width"],[ke.INK_COLOR,"stroke"],[ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,a){return new T6(t,s,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,a,l){return A0.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){let i=null;if(t instanceof dE){const{data:{inkLists:l,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:v,contentsObj:A,creationDate:w,modificationDate:x},parent:{page:{pageNumber:b}}}=t;i=t={annotationType:ge.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:v,comment:(A==null?void 0:A.str)||null,creationDate:w,modificationDate:x}}const a=await super.deserialize(t,s,r);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Uv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=wd.getDefaultDrawingOptions({stroke:re.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:nt._colorManager.convert(i),opacity:a,thickness:l,paths:{lines:s,points:r}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!E(this,cw,iM).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};cw=new WeakSet,iM=function(t){const{color:s,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},H(wd,"_type","ink"),H(wd,"_editorType",ge.INK),H(wd,"_defaultDrawingOptions",null);let CS=wd;class _S extends A0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ty=8,Wf=3;var vu,Oe,TS,$r,aM,oM,PS,Xy,lM,cM,uM,NS,RS,dM;class Oa{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,a,l,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${s} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:v,actualBoundingBoxDescent:A,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:b}=d.measureText(e),k=1.5,_=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,b)*k),T=Math.ceil(Math.max(Math.abs(v)+Math.abs(A)||h,Math.abs(w)+Math.abs(x)||h)*k);u=new OffscreenCanvas(_,T),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,_,T),d.fillStyle="black",d.fillText(e,_*(k-1)/2,T*(3-k)/2);const N=E(this,Oe,NS).call(this,d.getImageData(0,0,_,T).data),M=E(this,Oe,uM).call(this,N),F=E(this,Oe,RS).call(this,M),D=E(this,Oe,PS).call(this,N,_,T,F);return this.processDrawnLines({lines:{curves:D,width:_,height:T},pageWidth:i,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[a,l,c]=E(this,Oe,dM).call(this,e),[u,d]=E(this,Oe,cM).call(this,a,l,c,Math.hypot(l,c)*o(this,vu).sigmaSFactor,o(this,vu).sigmaR,o(this,vu).kernelSize),h=E(this,Oe,RS).call(this,d),f=E(this,Oe,PS).call(this,u,l,c,h);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:a,areContours:l}){r%180!==0&&([t,s]=[s,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],m=Math.min(t/u,s/d),y=m/t,v=m/s,A=[];for(const{points:x}of c){const b=a?E(this,Oe,lM).call(this,x):x;if(!b)continue;A.push(b);const k=b.length,_=new Float32Array(k),T=new Float32Array(3*(k===2?2:k-2));if(f.push({line:T,points:_}),k===2){_[0]=b[0]*y,_[1]=b[1]*v,T.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[N,M,F,D]=b;N*=y,M*=v,F*=y,D*=v,_.set([N,M,F,D],0),T.set([NaN,NaN,NaN,NaN,N,M],0);for(let j=4;j<k;j+=2){const B=_[j]=b[j]*y,z=_[j+1]=b[j+1]*v;T.set(ne.createBezierPoints(N,M,F,D,B,z),(j-2)*3),[N,M,F,D]=[F,D,B,z]}}if(f.length===0)return null;const w=l?new _S:new A0;return w.build(f,t,s,1,r,l?0:h,i),{outline:w,newCurves:A,areContours:l,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let a=1/0,l=-1/0,c=0;for(const b of e){c+=b.length;for(let k=2,_=b.length;k<_;k++){const T=b[k]-b[k-2];a=Math.min(a,T),l=Math.max(l,T)}}let u;a>=-128&&l<=127?u=Int8Array:a>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=ty+Wf*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=r,f[m++]=i,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(s??0)),f[m++]=d,f[m++]=u.BYTES_PER_ELEMENT;for(const b of e)f[m++]=b.length-2,f[m++]=b[0],f[m++]=b[1];const y=new CompressionStream("deflate-raw"),v=y.writable.getWriter();await v.ready,v.write(f);const A=u.prototype.constructor;for(const b of e){const k=new A(b.length-2);for(let _=2,T=b.length;_<T;_++)k[_-2]=b[_]-b[_-2];v.write(k)}v.close();const w=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(w);return cN(x)}static async decompressSignature(e){try{const t=V4(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,l=0;for await(const b of s)a||(a=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),a.set(b,l),l+=b.length;const c=new Uint32Array(a.buffer,0,a.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,m=c[5],y=c[6],v=c[7],A=[],w=(ty+Wf*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(v){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,w);break}l=0;for(let b=0;b<y;b++){const k=c[Wf*b+ty],_=new Float32Array(k+2);A.push(_);for(let T=0;T<Wf-1;T++)_[T]=c[Wf*b+ty+T+1];for(let T=0;T<k;T++)_[T+2]=_[T]+x[l++]}return{areContours:f,thickness:m,outlines:A,width:d,height:h}}catch(t){return fe(`decompressSignature: ${t}`),null}}}vu=new WeakMap,Oe=new WeakSet,TS=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},$r=new WeakMap,aM=function(e,t,s,r,i,a,l){const c=E(this,Oe,TS).call(this,s,r,i,a);for(let u=0;u<8;u++){const d=(-u+c-l+16)%8,h=o(this,$r)[2*d],f=o(this,$r)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},oM=function(e,t,s,r,i,a,l){const c=E(this,Oe,TS).call(this,s,r,i,a);for(let u=0;u<8;u++){const d=(u+c+l+16)%8,h=o(this,$r)[2*d],f=o(this,$r)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},PS=function(e,t,s,r){const i=e.length,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=e[d]<=r?1:0;for(let d=1;d<s-1;d++)a[d*t]=a[d*t+t-1]=0;for(let d=0;d<t;d++)a[d]=a[t*s-1-d]=0;let l=1,c;const u=[];for(let d=1;d<s-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,m=a[f];if(m===0)continue;let y=d,v=h;if(m===1&&a[f-1]===0)l+=1,v-=1;else if(m>=1&&a[f+1]===0)l+=1,v+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const A=[h,d],w=v===h+1,x={isHole:w,points:A,id:l,parent:0};u.push(x);let b;for(const j of u)if(j.id===c){b=j;break}b?b.isHole?x.parent=w?b.parent:c:x.parent=w?c:b.parent:x.parent=w?c:0;const k=E(this,Oe,aM).call(this,a,t,d,h,y,v,0);if(k===-1){a[f]=-l,a[f]!==1&&(c=Math.abs(a[f]));continue}let _=o(this,$r)[2*k],T=o(this,$r)[2*k+1];const N=d+_,M=h+T;y=N,v=M;let F=d,D=h;for(;;){const j=E(this,Oe,oM).call(this,a,t,F,D,y,v,1);_=o(this,$r)[2*j],T=o(this,$r)[2*j+1];const B=F+_,z=D+T;A.push(z,B);const q=F*t+D;if(a[q+1]===0?a[q]=-l:a[q]===1&&(a[q]=l),B===d&&z===h&&F===N&&D===M){a[f]!==1&&(c=Math.abs(a[f]));break}else y=F,v=D,F=B,D=z}}}return u},Xy=function(e,t,s,r){if(s-t<=4){for(let N=t;N<s-2;N+=2)r.push(e[N],e[N+1]);return}const i=e[t],a=e[t+1],l=e[s-4]-i,c=e[s-3]-a,u=Math.hypot(l,c),d=l/u,h=c/u,f=d*a-h*i,m=c/l,y=1/u,v=Math.atan(m),A=Math.cos(v),w=Math.sin(v),x=y*(Math.abs(A)+Math.abs(w)),b=y*(1-x+x**2),k=Math.max(Math.atan(Math.abs(w+A)*b),Math.atan(Math.abs(w-A)*b));let _=0,T=t;for(let N=t+2;N<s-2;N+=2){const M=Math.abs(f-d*e[N+1]+h*e[N]);M>_&&(T=N,_=M)}_>(u*k)**2?(E(this,Oe,Xy).call(this,e,t,T+2,r),E(this,Oe,Xy).call(this,e,T,s,r)):r.push(i,a)},lM=function(e){const t=[],s=e.length;return E(this,Oe,Xy).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},cM=function(e,t,s,r,i,a){const l=new Float32Array(a**2),c=-2*r**2,u=a>>1;for(let v=0;v<a;v++){const A=(v-u)**2;for(let w=0;w<a;w++)l[v*a+w]=Math.exp((A+(w-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let v=0;v<256;v++)d[v]=Math.exp(v**2/h);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let v=0;v<s;v++)for(let A=0;A<t;A++){const w=v*t+A,x=e[w];let b=0,k=0;for(let T=0;T<a;T++){const N=v+T-u;if(!(N<0||N>=s))for(let M=0;M<a;M++){const F=A+M-u;if(F<0||F>=t)continue;const D=e[N*t+F],j=l[T*a+M]*d[Math.abs(D-x)];b+=D*j,k+=j}}const _=m[w]=Math.round(b/k);y[_]++}return[m,y]},uM=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},NS=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,c=s.length;l<c;l++){const u=s[l]=e[l<<2];r=Math.max(r,u),i=Math.min(i,u)}const a=255/(r-i);for(let l=0,c=s.length;l<c;l++)s[l]=(s[l]-i)*a;return s},RS=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let a=i,l=i;for(t=i;t<256;t++){const c=e[t];c>s&&(t-a>r&&(r=t-a,l=t-1),s=c,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},dM=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=o(this,vu);let a=s,l=r;if(s>i||r>i){let f=s,m=r,y=Math.log2(Math.max(s,r)/i);const v=Math.floor(y);y=y===v?v-1:v;for(let w=0;w<y;w++){a=Math.ceil(f/2),l=Math.ceil(m/2);const x=new OffscreenCanvas(a,l);x.getContext("2d").drawImage(e,0,0,f,m,0,0,a,l),f=a,m=l,e!==t&&e.close(),e=x.transferToImageBitmap()}const A=Math.min(i/a,i/l);a=Math.round(a*A),l=Math.round(l*A)}const u=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,l);const d=u.getImageData(0,0,a,l).data;return[E(this,Oe,NS).call(this,d),a,l]},S(Oa,Oe),S(Oa,vu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(Oa,$r,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class hE extends eM{constructor(){super(),super.updateProperties({fill:nt._defaultLineColor,"stroke-width":0})}clone(){const e=new hE;return e.updateAll(this),e}}class fE extends Ww{constructor(e){super(e),super.updateProperties({stroke:nt._defaultLineColor,"stroke-width":1})}clone(){const e=new fE(this._viewParameters);return e.updateAll(this),e}}var rl,Ri,il,wu;const Ss=class Ss extends Vv{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});S(this,rl,!1);S(this,Ri,null);S(this,il,null);S(this,wu,null);this._willKeepAspectRatio=!0,g(this,il,t.signatureData||null),g(this,Ri,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){nt.initialize(t,s),this._defaultDrawingOptions=new hE,this._defaultDrawnSignatureOptions=new fE(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!o(this,Ri)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(o(this,il)){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:u,heightInPage:d}=o(this,il),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,y=Oa.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:m,innerMargin:Ss._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(y,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:o(this,Ri)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){g(this,wu,t),this.addEditToolbar()}getUuid(){return o(this,wu)}get description(){return o(this,Ri)}set description(t){g(this,Ri,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:a}=o(this,il),l=Math.max(i,a),c=Oa.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:a,y:l}=this,{outline:c}=g(this,il,t);g(this,rl,c instanceof _S),this.description=r;let u;o(this,rl)?u=Ss.getDefaultDrawingOptions():(u=Ss._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=s/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Oa.process(t,s,r,i,Ss._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Oa.extractContoursFromText(t,s,r,i,a,Ss._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Oa.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:Ss._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=Ss.getDefaultDrawingOptions():(this._drawingOptions=Ss._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:o(this,rl),color:[0,0,0],thickness:o(this,rl)?0:i});return this.addComment(a),t?(a.paths={lines:s,points:r},a.uuid=o(this,wu),a.isCopy=!0):a.lines=s,o(this,Ri)&&(a.accessibilityData={type:"Figure",alt:o(this,Ri)}),a}static deserializeDraw(t,s,r,i,a,l){return l.areContours?_S.deserialize(t,s,r,i,a,l):A0.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){var a;const i=await super.deserialize(t,s,r);return g(i,rl,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",g(i,wu,t.uuid),i}};rl=new WeakMap,Ri=new WeakMap,il=new WeakMap,wu=new WeakMap,H(Ss,"_type","signature"),H(Ss,"_editorType",ge.SIGNATURE),H(Ss,"_defaultDrawingOptions",null);let MS=Ss;var ut,sn,al,Ra,ol,rf,Ma,xu,Mi,Us,af,Ne,Sp,Ap,Yy,Ky,Qy,LS,Zy,hM;class DS extends nt{constructor(t){super({...t,name:"stampEditor"});S(this,Ne);S(this,ut,null);S(this,sn,null);S(this,al,null);S(this,Ra,null);S(this,ol,null);S(this,rf,"");S(this,Ma,null);S(this,xu,!1);S(this,Mi,null);S(this,Us,!1);S(this,af,!1);g(this,Ra,t.bitmapUrl),g(this,ol,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){nt.initialize(t,s)}static isHandlingMimeForPasting(t){return vb.includes(t)}static paste(t,s){s.pasteEditor({mode:ge.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;o(this,sn)&&(g(this,ut,null),this._uiManager.imageManager.deleteId(o(this,sn)),(t=o(this,Ma))==null||t.remove(),g(this,Ma,null),o(this,Mi)&&(clearTimeout(o(this,Mi)),g(this,Mi,null))),super.remove()}rebuild(){if(!this.parent){o(this,sn)&&E(this,Ne,Yy).call(this);return}super.rebuild(),this.div!==null&&(o(this,sn)&&o(this,Ma)===null&&E(this,Ne,Yy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(o(this,al)||o(this,ut)||o(this,Ra)||o(this,ol)||o(this,sn)||o(this,xu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),o(this,xu)||(o(this,ut)?E(this,Ne,Ky).call(this):E(this,Ne,Yy).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(g(this,sn,r),i&&g(this,ut,i),g(this,xu,!1),E(this,Ne,Ky).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,Mi)!==null&&clearTimeout(o(this,Mi)),g(this,Mi,setTimeout(()=>{g(this,Mi,null),E(this,Ne,LS).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:a}=o(this,ut),l=new Bi;let c=o(this,ut),u=i,d=a,h=null;if(s){if(i>s||a>s){const N=Math.min(s/i,s/a);u=Math.floor(i*N),d=Math.floor(a*N)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*l.sx),y=h.height=Math.ceil(d*l.sy);o(this,Us)||(c=E(this,Ne,Qy).call(this,m,y));const v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let A="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":K4.isDarkMode&&(A="#8f8f9d",w="#42414d");const x=15,b=x*l.sx,k=x*l.sy,_=new OffscreenCanvas(b*2,k*2),T=_.getContext("2d");T.fillStyle=A,T.fillRect(0,0,b*2,k*2),T.fillStyle=w,T.fillRect(0,0,b,k),T.fillRect(b,k,b,k),v.fillStyle=v.createPattern(_,"repeat"),v.fillRect(0,0,m,y),v.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(r){let m,y;if(l.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=o(this,ut),i>t||a>t){const w=Math.min(t/i,t/a);m=Math.floor(i*w),y=Math.floor(a*w),o(this,Us)||(c=E(this,Ne,Qy).call(this,m,y))}const A=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:A.getImageData(0,0,m,y).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,s,r){var A;let i=null,a=!1;if(t instanceof TR){const{data:{rect:w,rotation:x,id:b,structParent:k,popupRef:_,richText:T,contentsObj:N,creationDate:M,modificationDate:F},container:D,parent:{page:{pageNumber:j}},canvas:B}=t;let z,q;B?(delete t.canvas,{id:z,bitmap:q}=r.imageManager.getFromCanvas(D.id,B),B.remove()):(a=!0,t._hasNoCanvas=!0);const te=((A=await s._structTree.getAriaAttributes(`${pd}${b}`))==null?void 0:A.get("aria-label"))||"";i=t={annotationType:ge.STAMP,bitmapId:z,bitmap:q,pageIndex:j-1,rect:w.slice(0),rotation:x,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:te},isSvg:!1,structParent:k,popupRef:_,richText:T,comment:(N==null?void 0:N.str)||null,creationDate:M,modificationDate:F}}const l=await super.deserialize(t,s,r),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=t;a?(r.addMissingCanvas(t.id,l),g(l,xu,!0)):h&&r.imageManager.isValidId(h)?(g(l,sn,h),u&&g(l,ut,u)):g(l,Ra,d),g(l,Us,f);const[y,v]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/v,m&&(l.altTextData=m),l._initialData=i,t.comment&&l.setCommentData(t),g(l,af,!!i),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:o(this,sn),isSvg:o(this,Us)});if(this.addComment(r),t)return r.bitmapUrl=E(this,Ne,Zy).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=E(this,Ne,hM).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const l=o(this,Us)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(o(this,sn)))s.stamps.set(o(this,sn),{area:l,serialized:r}),r.bitmap=E(this,Ne,Zy).call(this,!1);else if(o(this,Us)){const c=s.stamps.get(o(this,sn));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=E(this,Ne,Zy).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ut=new WeakMap,sn=new WeakMap,al=new WeakMap,Ra=new WeakMap,ol=new WeakMap,rf=new WeakMap,Ma=new WeakMap,xu=new WeakMap,Mi=new WeakMap,Us=new WeakMap,af=new WeakMap,Ne=new WeakSet,Sp=function(t,s=!1){if(!t){this.remove();return}g(this,ut,t.bitmap),s||(g(this,sn,t.id),g(this,Us,t.isSvg)),t.file&&g(this,rf,t.file.name),E(this,Ne,Ky).call(this)},Ap=function(){if(g(this,al,null),this._uiManager.enableWaiting(!1),!!o(this,Ma)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ut)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Yy=function(){if(o(this,sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,sn)).then(r=>E(this,Ne,Sp).call(this,r,!0)).finally(()=>E(this,Ne,Ap).call(this));return}if(o(this,Ra)){const r=o(this,Ra);g(this,Ra,null),this._uiManager.enableWaiting(!0),g(this,al,this._uiManager.imageManager.getFromUrl(r).then(i=>E(this,Ne,Sp).call(this,i)).finally(()=>E(this,Ne,Ap).call(this)));return}if(o(this,ol)){const r=o(this,ol);g(this,ol,null),this._uiManager.enableWaiting(!0),g(this,al,this._uiManager.imageManager.getFromFile(r).then(i=>E(this,Ne,Sp).call(this,i)).finally(()=>E(this,Ne,Ap).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=vb.join(",");const s=this._uiManager._signal;g(this,al,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Ne,Sp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>E(this,Ne,Ap).call(this))),t.click()},Ky=function(){var u;const{div:t}=this;let{width:s,height:r}=o(this,ut);const[i,a]=this.pageDimensions,l=.75;if(this.width)s=this.width*i,r=this.height*a;else if(s>l*i||r>l*a){const d=Math.min(l*i/s,l*a/r);s*=d,r*=d}this._uiManager.enableWaiting(!1);const c=g(this,Ma,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/i,this.height=r/a,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,Ne,LS).call(this),o(this,af)||(this.parent.addUndoableEditor(this),g(this,af,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,rf)&&this.div.setAttribute("aria-description",o(this,rf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Qy=function(t,s){const{width:r,height:i}=o(this,ut);let a=r,l=i,c=o(this,ut);for(;a>2*t||l>2*s;){const u=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const h=new OffscreenCanvas(a,l);h.getContext("2d").drawImage(c,0,0,u,d,0,0,a,l),c=h.transferToImageBitmap()}return c},LS=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,a=new Bi,l=Math.ceil(r*t*a.sx),c=Math.ceil(i*s*a.sy),u=o(this,Ma);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const d=o(this,Us)?o(this,ut):E(this,Ne,Qy).call(this,l,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,l,c)},Zy=function(t){if(t){if(o(this,Us)){const i=this._uiManager.imageManager.getSvgUrl(o(this,sn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=o(this,ut),s.getContext("2d").drawImage(o(this,ut),0,0),s.toDataURL()}if(o(this,Us)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*Rl.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Rl.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(o(this,ut),0,0,o(this,ut).width,o(this,ut).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(o(this,ut))},hM=function(t){var l;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},H(DS,"_type","stamp"),H(DS,"_editorType",ge.STAMP);var bu,of,ll,cl,Da,ds,ul,lf,cf,zr,La,rn,Fa,dl,uf,oe,hl,Ke,OS,fM,ii,jS,IS,Jy;const Tr=class Tr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){S(this,Ke);S(this,bu);S(this,of,!1);S(this,ll,null);S(this,cl,null);S(this,Da,null);S(this,ds,new Map);S(this,ul,!1);S(this,lf,!1);S(this,cf,!1);S(this,zr,null);S(this,La,null);S(this,rn,null);S(this,Fa,null);S(this,dl,null);S(this,uf,-1);S(this,oe);const h=[...o(Tr,hl).values()];if(!Tr._initialized){Tr._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),g(this,oe,e),this.pageIndex=t,this.div=s,g(this,bu,i),g(this,ll,a),this.viewport=u,g(this,rn,c),this.drawLayer=l,this._structTree=r,o(this,oe).addLayer(this)}get isEmpty(){return o(this,ds).size===0}get isInvisible(){return this.isEmpty&&o(this,oe).getMode()===ge.NONE}updateToolbar(e){o(this,oe).updateToolbar(e)}updateMode(e=o(this,oe).getMode()){switch(E(this,Ke,Jy).call(this),e){case ge.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ge.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ge.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ge.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of o(Tr,hl).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=o(this,rn))==null?void 0:t.div)}setEditingState(e){o(this,oe).setEditingState(e)}addCommands(e){o(this,oe).addCommands(e)}cleanUndoStack(e){o(this,oe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=o(this,ll))==null||t.togglePointerEvents(e)}async enable(){var s;g(this,cf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=o(this,dl))==null||s.abort(),g(this,dl,null);const e=new Set;for(const r of o(this,Ke,OS))r.enableEditing(),r.show(!0),r.annotationElementId&&(o(this,oe).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=o(this,ll);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),o(this,oe).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,cf,!1),o(this,oe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(g(this,lf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),o(this,rn)&&!o(this,dl)){g(this,dl,new AbortController);const i=o(this,oe).combinedSignal(o(this,dl));o(this,rn).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:u,timeStamp:d}=a,h=o(this,uf);if(d-h>500){g(this,uf,d);return}g(this,uf,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const v=new RegExp(`^${sm}[0-9]+$`);for(const w of m)if(v.test(w.id)){y=w.id;break}if(!y)return;const A=o(this,ds).get(y);(A==null?void 0:A.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),A.dblclick(a))},{signal:i,capture:!0})}const e=o(this,ll),t=[];if(e){const i=new Map,a=new Map;for(const c of o(this,Ke,OS)){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);(r=this.getEditableAnnotation(c.annotationElementId))==null||r.show(),c.remove()}const l=e.getEditableAnnotations();for(const c of l){const{id:u}=c.data;if(o(this,oe).isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=i.get(u),d&&(o(this,oe).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}E(this,Ke,Jy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of o(Tr,hl).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),g(this,lf,!1)}getEditableAnnotation(e){var t;return((t=o(this,ll))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){o(this,oe).getActive()!==e&&o(this,oe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=o(this,rn))!=null&&e.div&&!o(this,Fa)){g(this,Fa,new AbortController);const t=o(this,oe).combinedSignal(o(this,Fa));o(this,rn).div.addEventListener("pointerdown",E(this,Ke,fM).bind(this),{signal:t}),o(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=o(this,rn))!=null&&e.div&&o(this,Fa)&&(o(this,Fa).abort(),g(this,Fa,null),o(this,rn).div.classList.remove("highlighting"))}enableClick(){if(o(this,cl))return;g(this,cl,new AbortController);const e=o(this,oe).combinedSignal(o(this,cl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=o(this,cl))==null||e.abort(),g(this,cl,null)}attach(e){o(this,ds).set(e.id,e);const{annotationElementId:t}=e;t&&o(this,oe).isDeletedAnnotationElement(t)&&o(this,oe).removeDeletedAnnotationElement(e)}detach(e){var t;o(this,ds).delete(e.id),(t=o(this,bu))==null||t.removePointerInTextLayer(e.contentDiv),!o(this,lf)&&e.annotationElementId&&o(this,oe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),o(this,oe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(o(this,oe).addDeletedAnnotationElement(e),nt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),o(this,oe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!o(this,cf)),o(this,oe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!o(this,Da)&&(e._focusEventsAllowed=!1,g(this,Da,setTimeout(()=>{g(this,Da,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:o(this,oe)._signal}),t.focus())},0))),e._structTreeParentId=(s=o(this,bu))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of o(this,ds).values())if(t.uid===e)return t;return null}getNextId(){return o(this,oe).getId()}combinedSignal(e){return o(this,oe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=o(this,Ke,ii))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await o(this,oe).updateMode(e.mode);const{offsetX:s,offsetY:r}=E(this,Ke,IS).call(this),i=this.getNextId(),a=E(this,Ke,jS).call(this,{parent:this,id:i,x:s,y:r,uiManager:o(this,oe),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=o(Tr,hl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,o(this,oe)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=E(this,Ke,jS).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:o(this,oe),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(E(this,Ke,IS).call(this),!0,e)}setSelected(e){o(this,oe).setSelected(e)}toggleSelected(e){o(this,oe).toggleSelected(e)}unselect(e){o(this,oe).unselect(e)}pointerup(e){var r;const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!o(this,ul)||(g(this,ul,!1),(r=o(this,Ke,ii))!=null&&r.isDrawer&&o(this,Ke,ii).supportMultipleDrawings))return;if(!o(this,of)){g(this,of,!0);return}const s=o(this,oe).getMode();if(s===ge.STAMP||s===ge.SIGNATURE){o(this,oe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(o(this,oe).getMode()===ge.HIGHLIGHT&&this.enableTextSelection(),o(this,ul)){g(this,ul,!1);return}const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(g(this,ul,!0),(r=o(this,Ke,ii))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=o(this,oe).getActive();g(this,of,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),o(this,zr)){o(this,Ke,ii).startDrawing(this,o(this,oe),!1,e);return}o(this,oe).setCurrentDrawingSession(this),g(this,zr,new AbortController);const t=o(this,oe).combinedSignal(o(this,zr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,La,null),this.commitOrRemove())},{signal:t}),o(this,Ke,ii).startDrawing(this,o(this,oe),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&g(this,La,t);return}o(this,La)&&setTimeout(()=>{var t;(t=o(this,La))==null||t.focus(),g(this,La,null)},0)}endDrawingSession(e=!1){return o(this,zr)?(o(this,oe).setCurrentDrawingSession(null),o(this,zr).abort(),g(this,zr,null),g(this,La,null),o(this,Ke,ii).endDrawing(e)):null}findNewParent(e,t,s){const r=o(this,oe).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return o(this,zr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,zr)&&o(this,Ke,ii).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=o(this,oe).getActive())==null?void 0:e.parent)===this&&(o(this,oe).commitOrRemove(),o(this,oe).setActiveEditor(null)),o(this,Da)&&(clearTimeout(o(this,Da)),g(this,Da,null));for(const s of o(this,ds).values())(t=o(this,bu))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,o(this,ds).clear(),o(this,oe).removeLayer(this)}render({viewport:e}){this.viewport=e,Lu(this.div,e);for(const t of o(this,oe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){o(this,oe).commitOrRemove(),E(this,Ke,Jy).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Lu(this.div,{rotation:s}),t!==s)for(const r of o(this,ds).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return o(this,oe).viewParameters.realScale}};bu=new WeakMap,of=new WeakMap,ll=new WeakMap,cl=new WeakMap,Da=new WeakMap,ds=new WeakMap,ul=new WeakMap,lf=new WeakMap,cf=new WeakMap,zr=new WeakMap,La=new WeakMap,rn=new WeakMap,Fa=new WeakMap,dl=new WeakMap,uf=new WeakMap,oe=new WeakMap,hl=new WeakMap,Ke=new WeakSet,OS=function(){return o(this,ds).size!==0?o(this,ds).values():o(this,oe).getEditors(this.pageIndex)},fM=function(e){o(this,oe).unselectAll();const{target:t}=e;if(t===o(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&o(this,rn).div.contains(t)){const{isMac:s}=xn.platform;if(e.button!==0||e.ctrlKey&&s)return;o(this,oe).showAllEditors("highlight",!0,!0),o(this,rn).div.classList.add("free"),this.toggleDrawing(),Hv.startHighlighting(this,o(this,oe).direction==="ltr",{target:o(this,rn).div,x:e.x,y:e.y}),o(this,rn).div.addEventListener("pointerup",()=>{o(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,oe)._signal}),e.preventDefault()}},ii=function(){return o(Tr,hl).get(o(this,oe).getMode())},jS=function(e){const t=o(this,Ke,ii);return t?new t.prototype.constructor(e):null},IS=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+r),u=(i+l)/2-e,d=(a+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},Jy=function(){for(const e of o(this,ds).values())e.isEmpty()&&e.remove()},H(Tr,"_initialized",!1),S(Tr,hl,new Map([gS,CS,DS,Hv,MS].map(e=>[e._editorType,e])));let FS=Tr;var Hr,zn,Su,s0,uw,pM,Ui,US,mM,$S;const $t=class $t{constructor({pageIndex:e}){S(this,Ui);S(this,Hr,null);S(this,zn,new Map);S(this,Su,new Map);this.pageIndex=e}setParent(e){if(!o(this,Hr)){g(this,Hr,e);return}if(o(this,Hr)!==e){if(o(this,zn).size>0)for(const t of o(this,zn).values())t.remove(),e.append(t);g(this,Hr,e)}}static get _svgFactory(){return pe(this,"_svgFactory",new $v)}draw(e,t=!1,s=!1){const r=xt($t,s0)._++,i=E(this,Ui,US).call(this),a=$t._svgFactory.createElement("defs");i.append(a);const l=$t._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&o(this,Su).set(r,l);const u=s?E(this,Ui,mM).call(this,a,c):null,d=$t._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),o(this,zn).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=xt($t,s0)._++,r=E(this,Ui,US).call(this),i=$t._svgFactory.createElement("defs");r.append(i);const a=$t._svgFactory.createElement("path");i.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=$t._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=$t._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=$t._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=$t._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return r.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),o(this,zn).set(s,r),s}finalizeDraw(e,t){o(this,Su).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:r,rootClass:i,path:a}=t,l=typeof e=="number"?o(this,zn).get(e):e;if(l){if(s&&E(this,Ui,$S).call(this,l,s),r&&E(c=$t,uw,pM).call(c,l,r),i){const{classList:u}=l;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(a){const d=l.firstElementChild.firstElementChild;E(this,Ui,$S).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const s=o(this,zn).get(e);s&&(o(t,Hr).append(s),o(this,zn).delete(e),o(t,zn).set(e,s))}remove(e){o(this,Su).delete(e),o(this,Hr)!==null&&(o(this,zn).get(e).remove(),o(this,zn).delete(e))}destroy(){g(this,Hr,null);for(const e of o(this,zn).values())e.remove();o(this,zn).clear(),o(this,Su).clear()}};Hr=new WeakMap,zn=new WeakMap,Su=new WeakMap,s0=new WeakMap,uw=new WeakSet,pM=function(e,[t,s,r,i]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},Ui=new WeakSet,US=function(){const e=$t._svgFactory.create(1,1,!0);return o(this,Hr).append(e),e.setAttribute("aria-hidden",!0),e},mM=function(e,t){const s=$t._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=$t._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},$S=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},S($t,uw),S($t,s0,0);let BS=$t;globalThis._pdfjsTestingUtils={HighlightOutliner:vS};globalThis.pdfjsLib={AbortException:Nl,AnnotationEditorLayer:FS,AnnotationEditorParamsType:ke,AnnotationEditorType:ge,AnnotationEditorUIManager:Fu,AnnotationLayer:pS,AnnotationMode:ho,AnnotationType:Ft,applyOpacity:Z4,build:i6,ColorPicker:Bv,createValidAbsoluteUrl:iN,CSSConstants:Q4,DOMSVGFactory:$v,DrawLayer:BS,FeatureTest:xn,fetchData:v0,findContrastColor:J4,getDocument:fR,getFilenameFromUrl:W4,getPdfFilenameFromUrl:q4,getRGB:x0,getUuid:lN,getXfaPageViewport:X4,GlobalWorkerOptions:Fi,ImageKind:xy,InvalidPDFException:gb,isDataScheme:Hw,isPdfFile:aE,isValidExplicitDest:cB,MathClamp:Wn,noContextMenu:kr,normalizeUnicode:z4,OPS:rm,OutputScale:Bi,PasswordResponses:D4,PDFDataRangeTransport:pR,PDFDateString:Dv,PDFWorker:om,PermissionFlag:M4,PixelsPerInch:Rl,RenderingCancelledException:iE,renderRichText:dN,ResponseException:Mv,setLayerDimensions:Lu,shadow:pe,SignatureExtractor:Oa,stopEvent:Tt,SupportedImageMimeTypes:vb,TextLayer:am,TouchManager:Fv,updateUrlHash:aN,Util:re,VerbosityLevel:Uw,version:r6,XfaLayer:uN};Fi.workerSrc="/pdf.worker.min.mjs";const pE=({isOpen:n,onClose:e,fileUrl:t,fileName:s,fileType:r})=>{const[i,a]=C.useState(1),[l,c]=C.useState({x:0,y:0}),[u,d]=C.useState(!1),[h,f]=C.useState({x:0,y:0}),[m,y]=C.useState(!1),[v,A]=C.useState(1),[w,x]=C.useState(1),[b,k]=C.useState(null),[_,T]=C.useState(null),[N,M]=C.useState(!1),[F,D]=C.useState(null),j=C.useRef(null),B=C.useRef(null);C.useEffect(()=>{if(!n||r!=="pdf"||!t)return;let ce=!1;return M(!0),D(null),(async()=>{try{const De=await fetch(t);if(!De.ok)throw new Error(`HTTP ${De.status}: ${De.statusText}`);const Jn=await De.arrayBuffer(),Js=await fR({data:Jn}).promise;if(ce)return;k(Js),x(Js.numPages),A(1)}catch(De){if(ce)return;console.error("Failed to load PDF:",De),D("Failed to load PDF. The file may be corrupted or inaccessible.")}finally{ce||M(!1)}})(),()=>{ce=!0}},[n,t,r]),C.useEffect(()=>{if(!b||r!=="pdf")return;let ce=!1;return M(!0),(async()=>{var De,Jn;try{const bs=await b.getPage(v);if(ce)return;const Js=bs.getViewport({scale:1}),E0=((De=j.current)==null?void 0:De.clientWidth)||800,Gw=((Jn=j.current)==null?void 0:Jn.clientHeight)||600,Xw=E0/Js.width,bE=Gw/Js.height,R=Math.min(Xw,bE)*.9*2,L=bs.getViewport({scale:R}),I=document.createElement("canvas"),J=I.getContext("2d");if(!J)throw new Error("Failed to get canvas context");if(I.width=L.width,I.height=L.height,await bs.render({canvasContext:J,viewport:L}).promise,ce)return;const K=I.toDataURL("image/png");T(K)}catch(bs){if(ce)return;console.error("Failed to render PDF page:",bs),D("Failed to render page.")}finally{ce||M(!1)}})(),()=>{ce=!0}},[b,v,r]),C.useEffect(()=>{n&&(a(1),c({x:0,y:0}),A(1),D(null),T(null),k(null))},[n,t]),C.useEffect(()=>{!n&&b&&(b.destroy(),k(null))},[n,b]),C.useEffect(()=>{const ce=wt=>{if(n)switch(wt.key){case"Escape":m?y(!1):e();break;case"+":case"=":_e();break;case"-":Me();break;case"0":G();break;case"ArrowLeft":r==="pdf"&&v>1&&A(De=>De-1);break;case"ArrowRight":r==="pdf"&&v<w&&A(De=>De+1);break}};return document.addEventListener("keydown",ce),()=>document.removeEventListener("keydown",ce)},[n,m,e,r,v,w]);const z=C.useCallback(ce=>{if(ce.ctrlKey||ce.metaKey){ce.preventDefault();const wt=ce.deltaY>0?-.1:.1;a(De=>Math.min(Math.max(.25,De+wt),5))}},[]),q=ce=>{i>1&&(d(!0),f({x:ce.clientX-l.x,y:ce.clientY-l.y}))},te=ce=>{u&&i>1&&c({x:ce.clientX-h.x,y:ce.clientY-h.y})},V=()=>{d(!1)},Y=ce=>{i>1&&ce.touches.length===1&&(d(!0),f({x:ce.touches[0].clientX-l.x,y:ce.touches[0].clientY-l.y}))},P=ce=>{u&&i>1&&ce.touches.length===1&&c({x:ce.touches[0].clientX-h.x,y:ce.touches[0].clientY-h.y})},U=()=>{d(!1)},[$,ie]=C.useState(null),Z=ce=>{if(ce.touches.length===2){const wt=ce.touches[0],De=ce.touches[1],Jn=Math.hypot(De.clientX-wt.clientX,De.clientY-wt.clientY);if($!==null){const bs=(Jn-$)*.01;a(Js=>Math.min(Math.max(.25,Js+bs),5))}ie(Jn)}else P(ce)},ae=()=>{ie(null),U()},_e=()=>{a(ce=>Math.min(ce+.25,5))},Me=()=>{a(ce=>Math.max(ce-.25,.25))},G=()=>{a(1),c({x:0,y:0})},de=()=>{y(!m)},Yt=()=>{window.open(t,"_blank")};return n?p.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center ${m?"":"p-2 sm:p-4"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),p.jsxs("div",{className:`relative bg-gray-900 rounded-lg shadow-2xl flex flex-col ${m?"w-full h-full rounded-none":"w-full h-full max-w-6xl max-h-[95vh] sm:max-h-[90vh]"}`,children:[p.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 border-b border-gray-700",children:[p.jsx("h3",{className:"text-white font-medium truncate max-w-[150px] sm:max-w-md text-sm sm:text-base",children:s}),p.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[p.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg px-1 sm:px-2",children:[p.jsx("button",{onClick:Me,className:"p-1 sm:p-1.5 text-gray-400 hover:text-white transition-colors",title:"Zoom Out (-)",children:p.jsx(RI,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),p.jsxs("span",{className:"text-gray-300 text-xs sm:text-sm min-w-[3rem] sm:min-w-[4rem] text-center",children:[Math.round(i*100),"%"]}),p.jsx("button",{onClick:_e,className:"p-1 sm:p-1.5 text-gray-400 hover:text-white transition-colors",title:"Zoom In (+)",children:p.jsx(DI,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),p.jsx("button",{onClick:Yt,className:"p-1.5 sm:p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Download",children:p.jsx(qP,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),p.jsx("button",{onClick:de,className:"hidden sm:block p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Toggle Fullscreen",children:m?p.jsx(Jj,{className:"w-5 h-5"}):p.jsx(tI,{className:"w-5 h-5"})}),p.jsx("button",{onClick:e,className:"p-1.5 sm:p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Close (Esc)",children:p.jsx(JA,{className:"w-5 h-5 sm:w-5 sm:h-5"})})]})]}),p.jsxs("div",{ref:j,className:"flex-1 overflow-hidden relative bg-gray-800",onWheel:z,onMouseDown:q,onMouseMove:te,onMouseUp:V,onMouseLeave:V,onTouchStart:Y,onTouchMove:Z,onTouchEnd:ae,style:{cursor:i>1?u?"grabbing":"grab":"default",touchAction:"none"},children:[N&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/80 z-10",children:p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-primary-500 border-t-transparent"}),p.jsx("p",{className:"text-gray-400 mt-3 text-sm",children:"Loading document..."})]})}),F&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("p",{className:"text-red-400 mb-4",children:F}),p.jsx("button",{onClick:Yt,className:"btn btn-primary",children:"Download Instead"})]})}),!F&&p.jsx("div",{ref:B,className:"absolute inset-0 flex items-center justify-center transition-transform duration-75",style:{transform:`translate(${l.x}px, ${l.y}px) scale(${i})`,transformOrigin:"center center"},children:r==="pdf"?_?p.jsx("img",{src:_,alt:`${s} - Page ${v}`,className:"max-w-full max-h-full object-contain select-none",draggable:!1}):null:p.jsx("img",{src:t,alt:s,className:"max-w-full max-h-full object-contain select-none",draggable:!1,onLoad:()=>M(!1),onError:()=>D("Failed to load image.")})})]}),r==="pdf"&&w>1&&p.jsxs("div",{className:"flex items-center justify-center px-4 py-2 border-t border-gray-700 bg-gray-900",children:[p.jsx("button",{onClick:()=>A(ce=>Math.max(1,ce-1)),disabled:v<=1||N,className:"p-1.5 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p.jsx(GP,{className:"w-5 h-5"})}),p.jsxs("span",{className:"text-gray-300 text-sm mx-4",children:["Page ",v," of ",w]}),p.jsx("button",{onClick:()=>A(ce=>Math.min(w,ce+1)),disabled:v>=w||N,className:"p-1.5 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p.jsx(Qj,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"hidden sm:block absolute bottom-4 left-4 text-xs text-gray-500",children:[i>1?"Drag to pan  ":"","Ctrl+Scroll to zoom  Pinch to zoom on mobile  Press Esc to close"]})]})]}):null};function bn(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ya(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function gM(n,e){const t=bn(n);if(isNaN(e))return Ya(n,NaN);if(!e)return t;const s=t.getDate(),r=Ya(n,t.getTime());r.setMonth(t.getMonth()+e+1,0);const i=r.getDate();return s>=i?r:(t.setFullYear(r.getFullYear(),r.getMonth(),s),t)}const yM=6048e5,P6=864e5,vM=6e4,wM=36e5;let N6={};function qw(){return N6}function lm(n,e){var l,c,u,d;const t=qw(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,r=bn(n),i=r.getDay(),a=(i<s?7:0)+i-s;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Wv(n){return lm(n,{weekStartsOn:1})}function xM(n){const e=bn(n),t=e.getFullYear(),s=Ya(n,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const r=Wv(s),i=Ya(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Wv(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function aC(n){const e=bn(n);return e.setHours(0,0,0,0),e}function oC(n){const e=bn(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function R6(n,e){const t=aC(n),s=aC(e),r=+t-oC(t),i=+s-oC(s);return Math.round((r-i)/P6)}function M6(n){const e=xM(n),t=Ya(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Wv(t)}function D6(n,e){return gM(n,e*12)}function L6(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function F6(n){if(!L6(n)&&typeof n!="number")return!1;const e=bn(n);return!isNaN(Number(e))}function qf(n){const e=bn(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Gf(n){const e=bn(n);return e.setDate(1),e.setHours(0,0,0,0),e}function O6(n){const e=bn(n),t=Ya(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const j6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I6=(n,e,t)=>{let s;const r=j6[n];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Ux(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const B6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},z6={date:Ux({formats:B6,defaultWidth:"full"}),time:Ux({formats:U6,defaultWidth:"full"}),dateTime:Ux({formats:$6,defaultWidth:"full"})},H6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V6=(n,e,t,s)=>H6[n];function Xf(n){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):a;r=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return r[i]}}const W6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},K6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Q6=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Z6={ordinalNumber:Q6,era:Xf({values:W6,defaultWidth:"wide"}),quarter:Xf({values:q6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Xf({values:G6,defaultWidth:"wide"}),day:Xf({values:X6,defaultWidth:"wide"}),dayPeriod:Xf({values:Y6,defaultWidth:"wide",formattingValues:K6,defaultFormattingWidth:"wide"})};function Yf(n){return(e,t={})=>{const s=t.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],l=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?eU(l,h=>h.test(a)):J6(l,h=>h.test(a));let u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function J6(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function eU(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function tU(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const r=s[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(r.length);return{value:a,rest:l}}}const nU=/^(\d+)(th|st|nd|rd)?/i,sU=/\d+/i,rU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iU={any:[/^b/i,/^(a|c)/i]},aU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oU={any:[/1/i,/2/i,/3/i,/4/i]},lU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pU={ordinalNumber:tU({matchPattern:nU,parsePattern:sU,valueCallback:n=>parseInt(n,10)}),era:Yf({matchPatterns:rU,defaultMatchWidth:"wide",parsePatterns:iU,defaultParseWidth:"any"}),quarter:Yf({matchPatterns:aU,defaultMatchWidth:"wide",parsePatterns:oU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Yf({matchPatterns:lU,defaultMatchWidth:"wide",parsePatterns:cU,defaultParseWidth:"any"}),day:Yf({matchPatterns:uU,defaultMatchWidth:"wide",parsePatterns:dU,defaultParseWidth:"any"}),dayPeriod:Yf({matchPatterns:hU,defaultMatchWidth:"any",parsePatterns:fU,defaultParseWidth:"any"})},mU={code:"en-US",formatDistance:I6,formatLong:z6,formatRelative:V6,localize:Z6,match:pU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gU(n){const e=bn(n);return R6(e,O6(e))+1}function yU(n){const e=bn(n),t=+Wv(e)-+M6(e);return Math.round(t/yM)+1}function bM(n,e){var d,h,f,m;const t=bn(n),s=t.getFullYear(),r=qw(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=Ya(n,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const l=lm(a,e),c=Ya(n,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=lm(c,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function vU(n,e){var l,c,u,d;const t=qw(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,r=bM(n,e),i=Ya(n,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),lm(i,e)}function wU(n,e){const t=bn(n),s=+lm(t,e)-+vU(t,e);return Math.round(s/yM)+1}function Ue(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const no={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return Ue(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ue(t+1,2)},d(n,e){return Ue(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ue(n.getHours()%12||12,e.length)},H(n,e){return Ue(n.getHours(),e.length)},m(n,e){return Ue(n.getMinutes(),e.length)},s(n,e){return Ue(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,t-3));return Ue(r,e.length)}},qu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lC={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return t.ordinalNumber(r,{unit:"year"})}return no.y(n,e)},Y:function(n,e,t,s){const r=bM(n,s),i=r>0?r:1-r;if(e==="YY"){const a=i%100;return Ue(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ue(i,e.length)},R:function(n,e){const t=xM(n);return Ue(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ue(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Ue(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Ue(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return no.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return Ue(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const r=wU(n,s);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Ue(r,e.length)},I:function(n,e,t){const s=yU(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Ue(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):no.d(n,e)},D:function(n,e,t){const s=gU(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Ue(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ue(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ue(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Ue(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let r;switch(s===12?r=qu.noon:s===0?r=qu.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let r;switch(s>=17?r=qu.evening:s>=12?r=qu.afternoon:s>=4?r=qu.morning:r=qu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return no.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):no.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Ue(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Ue(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):no.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):no.s(n,e)},S:function(n,e){return no.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return uC(s);case"XXXX":case"XX":return zl(s);case"XXXXX":case"XXX":default:return zl(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return uC(s);case"xxxx":case"xx":return zl(s);case"xxxxx":case"xxx":default:return zl(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cC(s,":");case"OOOO":default:return"GMT"+zl(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cC(s,":");case"zzzz":default:return"GMT"+zl(s,":")}},t:function(n,e,t){const s=Math.trunc(n.getTime()/1e3);return Ue(s,e.length)},T:function(n,e,t){const s=n.getTime();return Ue(s,e.length)}};function cC(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),i=s%60;return i===0?t+String(r):t+String(r)+e+Ue(i,2)}function uC(n,e){return n%60===0?(n>0?"-":"+")+Ue(Math.abs(n)/60,2):zl(n,e)}function zl(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Ue(Math.trunc(s/60),2),i=Ue(s%60,2);return t+r+e+i}const dC=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},SM=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xU=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],r=t[2];if(!r)return dC(n,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",dC(s,e)).replace("{{time}}",SM(r,e))},bU={p:SM,P:xU},SU=/^D+$/,AU=/^Y+$/,EU=["D","DD","YY","YYYY"];function kU(n){return SU.test(n)}function CU(n){return AU.test(n)}function _U(n,e,t){const s=TU(n,e,t);if(console.warn(s),EU.includes(n))throw new RangeError(s)}function TU(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const PU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RU=/^'([^]*?)'?$/,MU=/''/g,DU=/[a-zA-Z]/;function cm(n,e,t){var d,h,f,m;const s=qw(),r=s.locale??mU,i=s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=s.weekStartsOn??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=bn(n);if(!F6(l))throw new RangeError("Invalid time value");let c=e.match(NU).map(y=>{const v=y[0];if(v==="p"||v==="P"){const A=bU[v];return A(y,r.formatLong)}return y}).join("").match(PU).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:LU(y)};if(lC[v])return{isToken:!0,value:y};if(v.match(DU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:r};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(CU(v)||kU(v))&&_U(v,e,String(n));const A=lC[v[0]];return A(l,v,r.localize,u)}).join("")}function LU(n){const e=n.match(RU);return e?e[1].replace(MU,"'"):n}function FU(n,e){const t=+bn(n),[s,r]=[+bn(e.start),+bn(e.end)].sort((i,a)=>i-a);return t>=s&&t<=r}function $x(n,e){const s=BU(n);let r;if(s.date){const c=UU(s.date,2);r=$U(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const i=r.getTime();let a=0,l;if(s.time&&(a=zU(s.time),isNaN(a)))return new Date(NaN);if(s.timezone){if(l=HU(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+a),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+a+l)}const ny={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OU=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jU=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,IU=/^([+-])(\d{2})(?::?(\d{2}))?$/;function BU(n){const e={},t=n.split(ny.dateTimeDelimiter);let s;if(t.length>2)return e;if(/:/.test(t[0])?s=t[0]:(e.date=t[0],s=t[1],ny.timeZoneDelimiter.test(e.date)&&(e.date=n.split(ny.timeZoneDelimiter)[0],s=n.substr(e.date.length,n.length))),s){const r=ny.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function UU(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=n.match(t);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:n.slice((s[1]||s[2]).length)}}function $U(n,e){if(e===null)return new Date(NaN);const t=n.match(OU);if(!t)return new Date(NaN);const s=!!t[4],r=Kf(t[1]),i=Kf(t[2])-1,a=Kf(t[3]),l=Kf(t[4]),c=Kf(t[5])-1;if(s)return XU(e,l,c)?VU(e,l,c):new Date(NaN);{const u=new Date(0);return!qU(e,i,a)||!GU(e,r)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(r,a)),u)}}function Kf(n){return n?parseInt(n):1}function zU(n){const e=n.match(jU);if(!e)return NaN;const t=zx(e[1]),s=zx(e[2]),r=zx(e[3]);return YU(t,s,r)?t*wM+s*vM+r*1e3:NaN}function zx(n){return n&&parseFloat(n.replace(",","."))||0}function HU(n){if(n==="Z")return 0;const e=n.match(IU);if(!e)return 0;const t=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return KU(s,r)?t*(s*wM+r*vM):NaN}function VU(n,e,t){const s=new Date(0);s.setUTCFullYear(n,0,4);const r=s.getUTCDay()||7,i=(e-1)*7+t+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const WU=[31,null,31,30,31,30,31,31,30,31,30,31];function AM(n){return n%400===0||n%4===0&&n%100!==0}function qU(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(WU[e]||(AM(n)?29:28))}function GU(n,e){return e>=1&&e<=(AM(n)?366:365)}function XU(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function YU(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function KU(n,e){return e>=0&&e<=59}function Hx(n,e){return gM(n,-e)}function hC(n,e){return D6(n,-100)}const QU=()=>{const{id:n}=D5(),e=parseInt(n||"0"),[t,s]=C.useState(!1),[r,i]=C.useState(null),{data:a,isLoading:l}=Xs({queryKey:["patient",e],queryFn:()=>Cl.get(e),enabled:!!e}),{data:c,isLoading:u}=Xs({queryKey:["documents",{patient_id:e}],queryFn:()=>_l.list({patient_id:e}),enabled:!!e}),d=f=>{i(f),s(!0)},h=()=>{s(!1),i(null)};return l?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):a?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(mn,{to:"/patients",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:p.jsx(GP,{className:"w-5 h-5 text-gray-500"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.name}),p.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a.relationship||"Patient","  ",a.document_count," documents"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"card p-6",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Patient Information"}),p.jsxs("div",{className:"space-y-3",children:[a.date_of_birth&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Date of Birth"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:cm(new Date(a.date_of_birth),"MMMM d, yyyy")})]}),a.gender&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gender"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.gender})]}),a.blood_group&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Blood Group"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.blood_group})]}),a.allergies&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Allergies"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.allergies})]}),a.chronic_conditions&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Chronic Conditions"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.chronic_conditions})]}),a.emergency_contact&&p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Emergency Contact"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.emergency_contact})]})]})]}),p.jsxs("div",{className:"lg:col-span-2 card",children:[p.jsxs("div",{className:"card-header flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Documents"}),p.jsx(mn,{to:`/documents?patient_id=${e}`,className:"btn btn-primary btn-sm",children:"Upload Document"})]}),p.jsx("div",{className:"card-body",children:u?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-primary-500 border-t-transparent"})}):c!=null&&c.documents&&c.documents.length>0?p.jsx("div",{className:"space-y-4",children:c.documents.map(f=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[p.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg flex-shrink-0",children:p.jsx(Qr,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white break-words",children:f.display_name||f.file_name}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.document_type,"  ",cm(new Date(f.upload_date),"MMM d, yyyy")]}),f.prescription&&p.jsxs("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:[f.prescription.doctor_name||"Doctor"," - ",f.prescription.medicines.length," medicine(s)"]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[p.jsx("button",{onClick:()=>d(f),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"View Document",children:p.jsx(Iw,{className:"w-5 h-5 text-gray-500"})}),f.prescription&&p.jsx("span",{className:`badge ${f.prescription.parsing_status==="success"?"badge-success":f.prescription.parsing_status==="partial"?"badge-warning":"badge-error"}`,children:f.prescription.parsing_status})]})]},f.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Qr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No documents uploaded yet"})]})})]})]}),r&&p.jsx(pE,{isOpen:t,onClose:h,fileUrl:_l.getFileUrl(r.id),fileName:r.display_name||r.file_name,fileType:r.file_type==="pdf"?"pdf":"image"})]}):p.jsxs("div",{className:"text-center py-12",children:[p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Patient not found"}),p.jsx(mn,{to:"/patients",className:"btn btn-primary mt-4",children:"Back to Patients"})]})},ZU=()=>{const n=c0(),e=C.useRef(null),t=C.useRef(null),s=C.useRef(null),[r]=uF(),i=r.get("patient_id"),[a,l]=C.useState(i?parseInt(i):null),[c,u]=C.useState(null),[d,h]=C.useState(null),[f,m]=C.useState(!1),[y,v]=C.useState(null),[A,w]=C.useState("prescription"),[x,b]=C.useState("idle"),[k,_]=C.useState(""),[T,N]=C.useState(!0),[M,F]=C.useState(!1),[D,j]=C.useState(null);C.useEffect(()=>{i&&l(parseInt(i))},[i]);const{data:B}=Xs({queryKey:["patients"],queryFn:Cl.list}),{data:z,isLoading:q}=Xs({queryKey:["documents",{patient_id:a}],queryFn:()=>_l.list(a?{patient_id:a}:void 0)}),te=Kl({mutationFn:_l.upload,onSuccess:()=>{n.invalidateQueries({queryKey:["documents"]}),n.invalidateQueries({queryKey:["patients"]}),b("success"),u(null),h(null),_(""),setTimeout(()=>b("idle"),3e3)},onError:()=>{b("error")}}),V=G=>{var Yt;const de=(Yt=G.target.files)==null?void 0:Yt[0];de&&(u(de),h(URL.createObjectURL(de)),b("idle"))},Y=C.useCallback(async()=>{try{const G=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});v(G),m(!0),t.current&&(t.current.srcObject=G)}catch(G){console.error("Error accessing camera:",G),alert("Unable to access camera. Please check permissions.")}},[]),P=C.useCallback(()=>{if(t.current&&s.current){const G=t.current,de=s.current;de.width=G.videoWidth,de.height=G.videoHeight;const Yt=de.getContext("2d");Yt==null||Yt.drawImage(G,0,0),de.toBlob(ce=>{if(ce){const wt=new File([ce],`capture-${Date.now()}.jpg`,{type:"image/jpeg"});u(wt),h(URL.createObjectURL(ce))}},"image/jpeg",.95),U()}},[]),U=C.useCallback(()=>{y&&(y.getTracks().forEach(G=>G.stop()),v(null)),m(!1)},[y]),$=async()=>{if(!c||!a){alert("Please select a patient and a file");return}b("uploading"),te.mutate({file:c,patientId:a,documentType:A,displayName:k||void 0,generateDisplayName:T})},ie=C.useCallback(G=>{G.preventDefault();const de=G.dataTransfer.files[0];de&&(de.type.startsWith("image/")||de.type==="application/pdf")&&(u(de),h(URL.createObjectURL(de)),b("idle"))},[]),Z=C.useCallback(G=>{G.preventDefault()},[]),ae=G=>{j(G),F(!0)},_e=G=>_l.getFileUrl(G),Me=G=>G.display_name||G.file_name;return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Documents"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload prescriptions and medical records for AI-powered parsing"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"card p-6 space-y-6",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Upload Document"}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Patient"}),p.jsxs("select",{value:a||"",onChange:G=>l(G.target.value?parseInt(G.target.value):null),className:"input w-full",children:[p.jsx("option",{value:"",children:"Choose a patient..."}),B==null?void 0:B.patients.map(G=>p.jsxs("option",{value:G.id,children:[G.name," ",G.relationship?`(${G.relationship})`:""]},G.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Document Type"}),p.jsxs("select",{value:A,onChange:G=>w(G.target.value),className:"input w-full",children:[p.jsx("option",{value:"prescription",children:"Prescription"}),p.jsx("option",{value:"lab_report",children:"Lab Report"}),p.jsx("option",{value:"medical_record",children:"Medical Record"}),p.jsx("option",{value:"imaging",children:"Imaging (X-Ray, MRI, etc.)"}),p.jsx("option",{value:"other",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name (Optional)"}),p.jsx("input",{type:"text",value:k,onChange:G=>_(G.target.value),placeholder:"e.g., Dr. Smith Cardiology Visit",className:"input w-full"}),p.jsxs("div",{className:"mt-2 flex items-center",children:[p.jsx("input",{type:"checkbox",id:"generateDisplayName",checked:T,onChange:G=>N(G.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),p.jsxs("label",{htmlFor:"generateDisplayName",className:"ml-2 flex items-center text-sm text-gray-600 dark:text-gray-400",children:[p.jsx(VI,{className:"w-4 h-4 mr-1 text-primary-500"}),"Auto-generate name with AI"]})]}),p.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:k?"Your custom name will be used":T?"AI will suggest a descriptive name based on content":"Original file name will be shown"})]}),f?p.jsxs("div",{className:"relative",children:[p.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg"}),p.jsx("canvas",{ref:s,className:"hidden"}),p.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center space-x-4",children:[p.jsxs("button",{onClick:P,className:"btn btn-primary",children:[p.jsx(xk,{className:"w-5 h-5 mr-2"}),"Capture"]}),p.jsx("button",{onClick:U,className:"btn btn-secondary",children:"Cancel"})]})]}):p.jsxs("div",{onDrop:ie,onDragOver:Z,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-primary-500 transition-colors",children:[d?p.jsxs("div",{className:"space-y-4",children:[(c==null?void 0:c.type)==="application/pdf"?p.jsx("div",{className:"flex items-center justify-center",children:p.jsx(Qr,{className:"w-16 h-16 text-primary-500"})}):p.jsx("img",{src:d,alt:"Preview",className:"max-h-48 mx-auto rounded-lg"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c==null?void 0:c.name}),p.jsx("button",{onClick:()=>{u(null),h(null)},className:"text-red-500 hover:text-red-600",children:"Remove"})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsx(pI,{className:"w-12 h-12 text-gray-400 mx-auto"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Drag and drop a file here, or click to browse"}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("button",{onClick:()=>{var G;return(G=e.current)==null?void 0:G.click()},className:"btn btn-secondary",children:"Browse Files"}),p.jsxs("button",{onClick:Y,className:"btn btn-secondary",children:[p.jsx(xk,{className:"w-5 h-5 mr-2"}),"Camera"]})]}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Supports: JPG, PNG, PDF (max 10MB)"})]}),p.jsx("input",{ref:e,type:"file",accept:"image/*,application/pdf",onChange:V,className:"hidden"})]}),p.jsx("button",{onClick:$,disabled:!c||!a||x==="uploading",className:"btn btn-primary w-full",children:x==="uploading"?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Processing with AI..."]}):x==="success"?p.jsxs(p.Fragment,{children:[p.jsx(QA,{className:"w-5 h-5 mr-2"}),"Uploaded Successfully!"]}):x==="error"?p.jsxs(p.Fragment,{children:[p.jsx(wI,{className:"w-5 h-5 mr-2"}),"Upload Failed - Try Again"]}):"Upload & Parse Document"})]}),p.jsxs("div",{className:"card",children:[p.jsxs("div",{className:"card-header flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Documents"}),p.jsxs("select",{value:a||"",onChange:G=>l(G.target.value?parseInt(G.target.value):null),className:"input input-sm w-40",children:[p.jsx("option",{value:"",children:"All patients"}),B==null?void 0:B.patients.map(G=>p.jsx("option",{value:G.id,children:G.name},G.id))]})]}),p.jsx("div",{className:"card-body max-h-[500px] overflow-y-auto",children:q?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-primary-500 border-t-transparent"})}):z!=null&&z.documents&&z.documents.length>0?p.jsx("div",{className:"space-y-3",children:z.documents.map(G=>{var de;return p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[p.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[p.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded",children:p.jsx(Qr,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:Me(G)}),G.display_name&&G.display_name!==G.file_name&&p.jsx("p",{className:"text-xs text-gray-400 truncate",children:G.file_name}),p.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(de=G.document_type)==null?void 0:de.replace("_"," "),"  ",cm(new Date(G.upload_date),"MMM d, yyyy")]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[G.prescription&&p.jsx("span",{className:`badge ${G.prescription.parsing_status==="success"?"badge-success":G.prescription.parsing_status==="partial"?"badge-warning":"badge-error"}`,children:G.prescription.parsing_status}),p.jsx("button",{onClick:()=>ae(G),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"View Document",children:p.jsx(Iw,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})]},G.id)})}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Qr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No documents found"})]})})]})]}),D&&p.jsx(pE,{isOpen:M,onClose:()=>{F(!1),j(null)},fileUrl:_e(D.id),fileName:Me(D),fileType:D.file_type==="pdf"?"pdf":"image"})]})},Vx=[{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"last_3_months",label:"Last 3 Months"},{value:"last_6_months",label:"Last 6 Months"},{value:"this_year",label:"This Year"},{value:"all_time",label:"All Time"},{value:"custom",label:"Custom Range"}],Qf=[{value:"prescription",label:"Prescriptions",icon:ZA,color:"text-blue-500"},{value:"lab_report",label:"Lab Reports",icon:rI,color:"text-green-500"},{value:"imaging",label:"X-Ray / MRI / CT",icon:II,color:"text-purple-500"},{value:"medical_record",label:"Medical Records",icon:Qr,color:"text-orange-500"}],JU=()=>{var Y;const[n,e]=C.useState(""),[t,s]=C.useState(null),[r,i]=C.useState(["prescription","lab_report","imaging","medical_record"]),[a,l]=C.useState("this_month"),[c,u]=C.useState(""),[d,h]=C.useState(""),[f,m]=C.useState(!1),[y,v]=C.useState(null),[A,w]=C.useState(!1),[x,b]=C.useState(null),{data:k}=Xs({queryKey:["patients"],queryFn:Cl.list}),{data:_,isLoading:T}=Xs({queryKey:["documents",{patient_id:t}],queryFn:()=>_l.list(t?{patient_id:t}:void 0)}),N=C.useMemo(()=>{const P=new Date;switch(a){case"this_month":return{from:Gf(P),to:qf(P)};case"last_month":const U=Hx(P,1);return{from:Gf(U),to:qf(U)};case"last_3_months":return{from:Gf(Hx(P,2)),to:qf(P)};case"last_6_months":return{from:Gf(Hx(P,5)),to:qf(P)};case"this_year":return{from:new Date(P.getFullYear(),0,1),to:new Date(P.getFullYear(),11,31)};case"all_time":return{from:hC(P),to:P};case"custom":return{from:c?$x(c):hC(P),to:d?$x(d):P};default:return{from:Gf(P),to:qf(P)}}},[a,c,d]),M=C.useMemo(()=>_!=null&&_.documents?_.documents.filter(P=>{var $,ie,Z,ae,_e,Me;if(!r.includes(P.document_type||"prescription"))return!1;const U=$x(P.upload_date);if(!FU(U,{start:N.from,end:N.to}))return!1;if(n){const G=n.toLowerCase(),de=(P.display_name||P.file_name).toLowerCase(),Yt=((ie=($=P.prescription)==null?void 0:$.doctor_name)==null?void 0:ie.toLowerCase())||"",ce=((ae=(Z=P.prescription)==null?void 0:Z.diagnosis)==null?void 0:ae.toLowerCase())||"",wt=((Me=(_e=P.prescription)==null?void 0:_e.medicines)==null?void 0:Me.map(De=>De.name.toLowerCase()).join(" "))||"";if(!de.includes(G)&&!Yt.includes(G)&&!ce.includes(G)&&!wt.includes(G))return!1}return!0}).sort((P,U)=>new Date(U.upload_date).getTime()-new Date(P.upload_date).getTime()):[],[_,r,N,n]),F=P=>{i(U=>U.includes(P)?U.filter($=>$!==P):[...U,P])},D=P=>{if(P.frequency)return P.frequency;const U=[];return P.morning&&U.push("Morning"),P.afternoon&&U.push("Afternoon"),P.evening&&U.push("Evening"),P.night&&U.push("Night"),U.length>0?U.join(", "):"As directed"},j=P=>{const U=Qf.find(ie=>ie.value===P)||Qf[0],$=U.icon;return p.jsx($,{className:`w-5 h-5 ${U.color}`})},B=P=>{const U=Qf.find($=>$.value===P);return(U==null?void 0:U.label)||"Document"},z=P=>{b(P),w(!0)},q=P=>_l.getFileUrl(P),te=P=>P.display_name||P.file_name,V=P=>{const U=k==null?void 0:k.patients.find($=>$.id===P);return(U==null?void 0:U.name)||"Unknown"};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Medical Records"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View all prescriptions, lab reports, X-rays, and medical documents"})]}),p.jsx("div",{className:"card p-4",children:p.jsxs("div",{className:"flex flex-col space-y-4",children:[p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Dp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search by document name, doctor, diagnosis, medicines...",value:n,onChange:P=>e(P.target.value),className:"input w-full pl-10"})]}),p.jsxs("select",{value:t||"",onChange:P=>s(P.target.value?parseInt(P.target.value):null),className:"input w-full md:w-48",children:[p.jsx("option",{value:"",children:"All Patients"}),k==null?void 0:k.patients.map(P=>p.jsx("option",{value:P.id,children:P.name},P.id))]}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{value:a,onChange:P=>l(P.target.value),className:"input w-full md:w-48 appearance-none",children:Vx.map(P=>p.jsx("option",{value:P.value,children:P.label},P.value))}),p.jsx(XP,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),p.jsxs("button",{onClick:()=>m(!0),className:"btn btn-secondary flex items-center",children:[p.jsx(kI,{className:"w-5 h-5 mr-2"}),"Filters",r.length<4&&p.jsx("span",{className:"ml-2 bg-primary-500 text-white text-xs rounded-full px-2 py-0.5",children:r.length})]})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Qf.map(P=>{const U=r.includes(P.value),$=P.icon;return p.jsxs("button",{onClick:()=>F(P.value),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${U?"bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 border border-primary-300 dark:border-primary-700":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 border border-transparent"}`,children:[p.jsx($,{className:`w-4 h-4 mr-1.5 ${U?P.color:""}`}),P.label]},P.value)})}),a==="custom"&&p.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-gray-200 dark:border-gray-700",children:[p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Custom Range:"}),p.jsx("input",{type:"date",value:c,onChange:P=>u(P.target.value),className:"input",placeholder:"From"}),p.jsx("span",{className:"text-gray-400",children:"to"}),p.jsx("input",{type:"date",value:d,onChange:P=>h(P.target.value),className:"input",placeholder:"To"})]})]})}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[p.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:M.length})," ","records found",a!=="all_time"&&p.jsxs("span",{className:"ml-2 text-gray-500",children:[" ",(Y=Vx.find(P=>P.value===a))==null?void 0:Y.label]})]})}),p.jsx("div",{className:"space-y-4",children:T?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):M.length>0?M.map(P=>{var U,$,ie,Z;return p.jsxs("div",{className:"card overflow-hidden",children:[p.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>v(y===P.id?null:P.id),children:p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[p.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4 min-w-0 flex-1",children:[p.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg flex-shrink-0",children:j(P.document_type)}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsxs("div",{className:"flex flex-wrap items-start gap-2",children:[p.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white break-words",children:te(P)}),p.jsx("span",{className:"badge badge-primary text-xs flex-shrink-0",children:B(P.document_type)})]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[p.jsxs("span",{className:"flex items-center",children:[p.jsx(hI,{className:"w-4 h-4 mr-1"}),cm(new Date(P.upload_date),"MMM d, yyyy")]}),p.jsxs("span",{children:["Patient: ",V(P.patient_id)]}),((U=P.prescription)==null?void 0:U.doctor_name)&&p.jsxs("span",{children:["Dr. ",P.prescription.doctor_name]}),(($=P.prescription)==null?void 0:$.medicines)&&P.prescription.medicines.length>0&&p.jsxs("span",{children:[P.prescription.medicines.length," medicine(s)"]})]}),((ie=P.prescription)==null?void 0:ie.diagnosis)&&p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[p.jsx("span",{className:"font-medium",children:"Diagnosis:"})," ",P.prescription.diagnosis]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 self-end sm:self-start",children:[p.jsx("button",{onClick:ae=>{ae.stopPropagation(),z(P)},className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"View Document",children:p.jsx(Iw,{className:"w-5 h-5 text-gray-500"})}),p.jsx(cI,{className:`w-5 h-5 text-gray-400 transition-transform ${y===P.id?"rotate-180":""}`})]})]})}),y===P.id&&p.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-gray-100 dark:border-gray-700",children:p.jsxs("div",{className:"pt-4 space-y-4",children:[P.prescription&&p.jsxs(p.Fragment,{children:[(P.prescription.doctor_name||P.prescription.hospital_name)&&p.jsxs("div",{className:"flex flex-wrap gap-6",children:[P.prescription.doctor_name&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Doctor"}),p.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[P.prescription.doctor_name,P.prescription.doctor_speciality&&p.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",P.prescription.doctor_speciality,")"]})]})]}),P.prescription.hospital_name&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Hospital/Clinic"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.prescription.hospital_name})]})]}),P.prescription.medicines&&P.prescription.medicines.length>0&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Medicines"}),p.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3",children:P.prescription.medicines.map(ae=>p.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[p.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[ae.name,ae.dosage&&p.jsx("span",{className:"text-primary-600 dark:text-primary-400 ml-2",children:ae.dosage})]}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[D(ae),ae.duration_days&&`  ${ae.duration_days} days`]}),ae.instructions&&p.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:ae.instructions})]},ae.id))})]}),P.prescription.notes&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Notes"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:P.prescription.notes})]})]}),P.medical_report&&p.jsxs(p.Fragment,{children:[(P.medical_report.lab_name||P.medical_report.referring_doctor)&&p.jsxs("div",{className:"flex flex-wrap gap-6",children:[P.medical_report.lab_name&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Lab/Facility"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.medical_report.lab_name})]}),P.medical_report.referring_doctor&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Referring Doctor"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.medical_report.referring_doctor})]})]}),P.medical_report.findings&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Findings"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1 whitespace-pre-line",children:P.medical_report.findings})]}),P.medical_report.conclusion&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Conclusion"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:P.medical_report.conclusion})]}),P.medical_report.recommendations&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Recommendations"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:P.medical_report.recommendations})]}),P.medical_report.summary&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Summary"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:P.medical_report.summary})]})]}),!P.prescription&&!P.medical_report&&p.jsxs("div",{className:"flex flex-wrap gap-6",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"File Name"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:P.file_name})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"File Type"}),p.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:((Z=P.file_type)==null?void 0:Z.toUpperCase())||"Unknown"})]}),P.file_size&&p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"File Size"}),p.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[(P.file_size/1024).toFixed(1)," KB"]})]}),P.notes&&p.jsxs("div",{className:"w-full",children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Notes"}),p.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:P.notes})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic w-full",children:"Click the eye icon to view the document"})]})]})})]},P.id)}):p.jsxs("div",{className:"card p-12 text-center",children:[p.jsx(Qr,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No records found"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n||r.length<4||a!=="all_time"?"Try adjusting your filters or search query":"Upload your first medical document to get started"})]})}),f&&p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>m(!1)}),p.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filter Records"}),p.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:p.jsx(JA,{className:"w-5 h-5 text-gray-500"})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Document Types"}),p.jsx("div",{className:"space-y-2",children:Qf.map(P=>{const U=P.icon;return p.jsxs("label",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:[p.jsx("input",{type:"checkbox",checked:r.includes(P.value),onChange:()=>F(P.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),p.jsx(U,{className:`w-5 h-5 ml-3 ${P.color}`}),p.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:P.label})]},P.value)})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Date Range"}),p.jsx("select",{value:a,onChange:P=>l(P.target.value),className:"input w-full",children:Vx.map(P=>p.jsx("option",{value:P.value,children:P.label},P.value))}),a==="custom"&&p.jsxs("div",{className:"mt-3 flex gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From"}),p.jsx("input",{type:"date",value:c,onChange:P=>u(P.target.value),className:"input w-full"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To"}),p.jsx("input",{type:"date",value:d,onChange:P=>h(P.target.value),className:"input w-full"})]})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>{i(["prescription","lab_report","imaging","medical_record"]),l("this_month"),u(""),h("")},className:"btn btn-secondary flex-1",children:"Reset"}),p.jsx("button",{onClick:()=>m(!1),className:"btn btn-primary flex-1",children:"Apply"})]})]})]}),x&&p.jsx(pE,{isOpen:A,onClose:()=>{w(!1),b(null)},fileUrl:q(x.id),fileName:te(x),fileType:x.file_type==="pdf"?"pdf":"image"})]})},e8=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(null),{data:r}=Xs({queryKey:["patients"],queryFn:Cl.list}),{data:i,isLoading:a}=Xs({queryKey:["medicine-search",n,t],queryFn:()=>WP.searchMedicines(n,t||void 0),enabled:n.length>=2});return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Medicine Search"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Search your entire medical history for specific medicines"})]}),p.jsxs("div",{className:"card p-6",children:[p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Dp,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search for a medicine (e.g., Paracetamol, Amoxicillin)...",value:n,onChange:l=>e(l.target.value),className:"input w-full pl-12 text-lg py-4",autoFocus:!0})]}),p.jsxs("select",{value:t||"",onChange:l=>s(l.target.value?parseInt(l.target.value):null),className:"input md:w-48",children:[p.jsx("option",{value:"",children:"All Patients"}),r==null?void 0:r.patients.map(l=>p.jsx("option",{value:l.id,children:l.name},l.id))]})]}),n.length>0&&n.length<2&&p.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Type at least 2 characters to search"})]}),a&&n.length>=2&&p.jsx("div",{className:"flex justify-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}),i&&i.length>0&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Found ",i.length,' result(s) for "',n,'"']}),p.jsx("div",{className:"grid gap-4",children:i.map((l,c)=>p.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-xl font-semibold text-primary-600 dark:text-primary-400",children:l.medicine.name}),l.medicine.dosage&&p.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Dosage: ",p.jsx("span",{className:"font-medium",children:l.medicine.dosage})]}),p.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[l.medicine.frequency&&p.jsx("span",{className:"badge badge-primary",children:l.medicine.frequency}),l.medicine.timing&&p.jsx("span",{className:"badge badge-secondary",children:l.medicine.timing}),l.medicine.duration_days&&p.jsxs("span",{className:"badge",children:[l.medicine.duration_days," days"]})]})]}),p.jsx(mn,{to:`/patients/${l.patient_id}`,className:"btn btn-secondary btn-sm",children:"View Patient"})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-4 text-sm text-gray-500 dark:text-gray-400",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(ub,{className:"w-4 h-4 mr-2"}),l.patient_name]}),l.prescription_date&&p.jsxs("div",{className:"flex items-center",children:[p.jsx(XP,{className:"w-4 h-4 mr-2"}),cm(new Date(l.prescription_date),"MMMM d, yyyy")]}),l.doctor_name&&p.jsxs("div",{children:["Doctor: ",l.doctor_name]})]})]},c))})]}),n.length>=2&&!a&&i&&i.length===0&&p.jsxs("div",{className:"card p-12 text-center",children:[p.jsx(Dp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No results found"}),p.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[`We couldn't find any medicines matching "`,n,'".',p.jsx("br",{}),"Try a different search term or check the spelling."]})]}),n.length===0&&p.jsxs("div",{className:"card p-12 text-center",children:[p.jsx(Dp,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Search Your Medical History"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Enter a medicine name to find all instances across your prescriptions. This helps you track when you've been prescribed certain medications."})]})]})},t8=()=>{const n=c0(),{user:e,setUser:t,logout:s}=d0(),[r,i]=C.useState(!1),[a,l]=C.useState(""),[c,u]=C.useState((e==null?void 0:e.username)||""),[d,h]=C.useState((e==null?void 0:e.full_name)||""),[f,m]=C.useState(null),[y,v]=C.useState(Hj()),[A,w]=C.useState(!1),[x,b]=C.useState("idle"),[k,_]=C.useState(!1),[T,N]=C.useState(""),[M,F]=C.useState(""),[D,j]=C.useState(!1),{data:B,isLoading:z}=Xs({queryKey:["settings"],queryFn:Hu.get}),q=Kl({mutationFn:Hu.updateProfile,onSuccess:async()=>{const $=await bf.getMe();t($),m("Profile updated successfully!"),setTimeout(()=>m(null),3e3)}}),te=Kl({mutationFn:Hu.updateApiKey,onSuccess:()=>{n.invalidateQueries({queryKey:["settings"]}),l(""),m("API key saved successfully!"),setTimeout(()=>m(null),3e3)}}),V=Kl({mutationFn:Hu.deleteApiKey,onSuccess:()=>{n.invalidateQueries({queryKey:["settings"]}),m("API key deleted"),setTimeout(()=>m(null),3e3)}}),Y=Kl({mutationFn:Hu.exportData,onSuccess:$=>{const ie=new Blob([JSON.stringify($,null,2)],{type:"application/json"}),Z=URL.createObjectURL(ie),ae=document.createElement("a");ae.href=Z,ae.download=`medical-history-export-${new Date().toISOString().split("T")[0]}.json`,ae.click(),URL.revokeObjectURL(Z),m("Data exported successfully!"),setTimeout(()=>m(null),3e3)}}),P=()=>{q.mutate({username:c,full_name:d})},U=()=>{a.trim()&&te.mutate(a.trim())};return z?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and API configuration"})]}),f&&p.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg",children:[p.jsx(QA,{className:"w-5 h-5"}),p.jsx("span",{children:f})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"card p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(YI,{className:"w-6 h-6 text-primary-500"}),p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Profile"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),p.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"input w-full bg-gray-50 dark:bg-gray-700 cursor-not-allowed"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),p.jsx("input",{type:"text",value:c,onChange:$=>u($.target.value),placeholder:"Choose a username",className:"input w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),p.jsx("input",{type:"text",value:d,onChange:$=>h($.target.value),placeholder:"Your full name",className:"input w-full"})]}),p.jsx("button",{onClick:P,disabled:q.isPending,className:"btn btn-primary",children:q.isPending?"Saving...":"Update Profile"})]})]}),p.jsxs("div",{className:"card p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(PI,{className:"w-6 h-6 text-primary-500"}),p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"OpenRouter API Key"})]}),p.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:p.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["An API key is required to parse prescriptions and medical documents using AI. Get your API key from"," ",p.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"font-medium underline",children:"OpenRouter.ai"})]})}),p.jsx("div",{className:"space-y-4",children:B!=null&&B.has_api_key?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(zI,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),p.jsx("span",{className:"text-green-700 dark:text-green-400",children:"API Key configured"})]}),p.jsx("span",{className:"text-sm text-gray-500 font-mono",children:B.api_key_preview})]}),p.jsx("button",{onClick:()=>V.mutate(),disabled:V.isPending,className:"btn btn-secondary text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Remove API Key"})]}):p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:r?"text":"password",value:a,onChange:$=>l($.target.value),placeholder:"sk-or-v1-...",className:"input w-full pr-10"}),p.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?p.jsx(SI,{className:"w-5 h-5"}):p.jsx(Iw,{className:"w-5 h-5"})})]}),p.jsx("button",{onClick:U,disabled:!a.trim()||te.isPending,className:"btn btn-primary",children:te.isPending?"Saving...":"Save API Key"})]})})]}),p.jsxs("div",{className:"card p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(qP,{className:"w-6 h-6 text-primary-500"}),p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Export Data"})]}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Download all your patients, documents, and prescriptions as a JSON file for backup or migration."}),p.jsx("button",{onClick:()=>Y.mutate(),disabled:Y.isPending,className:"btn btn-secondary",children:Y.isPending?"Exporting...":"Export All Data"})]}),p.jsxs("div",{className:"card p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(YP,{className:"w-6 h-6 text-primary-500"}),p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backend Server"})]}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure the backend API server URL. Useful for self-hosted deployments."}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"url",value:y,onChange:$=>{v($.target.value),b("idle")},placeholder:"http://localhost:8000/api/v1",className:"input w-full pr-24"}),x==="success"&&p.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500 text-sm",children:" Connected"}),x==="error"&&p.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-red-500 text-sm",children:" Failed"})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:async()=>{w(!0),b("idle");try{const $=y.replace(/\/+$/,"");let ie;try{ie=await st.get(`${$}/health`,{timeout:5e3})}catch{const Z=$.replace(/\/api\/v1\/?$/,"");ie=await st.get(`${Z}/health`,{timeout:5e3})}ie.status===200?(b("success"),VP($),m("Backend URL updated successfully!"),setTimeout(()=>m(null),3e3)):b("error")}catch{b("error")}w(!1)},disabled:A,className:"btn btn-primary",children:A?"Testing...":"Test & Save"}),p.jsx("button",{onClick:()=>{Wj(),v("http://localhost:8000/api/v1"),b("idle"),m("Backend URL reset to default"),setTimeout(()=>m(null),3e3)},className:"btn btn-secondary",children:"Reset to Default"})]})]})]}),p.jsxs("div",{className:"card p-6 space-y-6 border-red-200 dark:border-red-800",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(bk,{className:"w-6 h-6 text-red-500"}),p.jsx("h2",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Danger Zone"})]}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Once you delete your account, all of your data will be permanently removed. This action cannot be undone."}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Log Out"}),p.jsxs("button",{onClick:()=>_(!0),className:"btn bg-red-500 text-white hover:bg-red-600",children:[p.jsx(KP,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})]})]}),k&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6 space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4",children:p.jsx(bk,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),p.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Delete Account"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2 text-sm",children:"This will permanently delete your account and all associated data including patients, documents, and prescriptions."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter your password to confirm"}),p.jsx("input",{type:"password",value:T,onChange:$=>{N($.target.value),F("")},placeholder:"Your password",className:"input w-full",autoComplete:"current-password"}),M&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:M})]}),p.jsxs("div",{className:"flex space-x-3",children:[p.jsx("button",{onClick:()=>{_(!1),N(""),F("")},className:"btn btn-secondary flex-1",disabled:D,children:"Cancel"}),p.jsx("button",{onClick:async()=>{var $,ie;if(!T){F("Please enter your password");return}j(!0),F("");try{await Hu.deleteAccount(T),s()}catch(Z){F(((ie=($=Z.response)==null?void 0:$.data)==null?void 0:ie.detail)||"Invalid password or deletion failed")}finally{j(!1)}},className:"btn bg-red-500 text-white hover:bg-red-600 flex-1",disabled:D||!T,children:D?"Deleting...":"Delete Account"})]})]})]})})]})};function n8(){const{isAuthenticated:n,isLoading:e,setUser:t,setLoading:s}=d0(),[r,i]=C.useState(!zj());return C.useEffect(()=>{if(r){s(!1);return}(async()=>{if(localStorage.getItem("access_token"))try{const c=await bf.getMe();t(c)}catch{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t(null)}else s(!1)})()},[t,s,r]),r?p.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:p.jsx(t4,{onConfigured:()=>i(!1)})}):e?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent"})}):p.jsxs(Y5,{children:[p.jsxs(es,{element:p.jsx(n4,{}),children:[p.jsx(es,{path:"/login",element:n?p.jsx(H0,{to:"/dashboard",replace:!0}):p.jsx(T4,{})}),p.jsx(es,{path:"/register",element:n?p.jsx(H0,{to:"/dashboard",replace:!0}):p.jsx(P4,{})})]}),p.jsxs(es,{element:n?p.jsx(r4,{}):p.jsx(H0,{to:"/login",replace:!0}),children:[p.jsx(es,{path:"/dashboard",element:p.jsx(N4,{})}),p.jsx(es,{path:"/patients",element:p.jsx(R4,{})}),p.jsx(es,{path:"/patients/:id",element:p.jsx(QU,{})}),p.jsx(es,{path:"/documents",element:p.jsx(ZU,{})}),p.jsx(es,{path:"/records",element:p.jsx(JU,{})}),p.jsx(es,{path:"/search",element:p.jsx(e8,{})}),p.jsx(es,{path:"/settings",element:p.jsx(t8,{})})]}),p.jsx(es,{path:"/",element:p.jsx(H0,{to:n?"/dashboard":"/login",replace:!0})}),p.jsx(es,{path:"*",element:p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"404"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Page not found"})]})})})]})}const s8=new LF({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Wx.createRoot(document.getElementById("root")).render(p.jsx(Mn.StrictMode,{children:p.jsx(FF,{client:s8,children:p.jsxs(rF,{children:[p.jsx(n8,{}),p.jsx(LO,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})}));
//# sourceMappingURL=index-Bx4p83wB.js.map
